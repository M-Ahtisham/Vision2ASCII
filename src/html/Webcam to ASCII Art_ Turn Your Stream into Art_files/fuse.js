!function(e){"function"==typeof fuseDefine&&fuseDefine.amd?fuseDefine(e):e()}((function(){"use strict";var e={settings:{account_code:"asciiart",account_domain_map:{},fuse_blocked_url:[],fuse_breakpoints:{l:769,m:668,s:576,xs:0},fuse_cdn:"cdn.fuseplatform.net",fuse_cdn_platform:"cloudflare",fuse_id:3083,fuse_industry:["IAB1"],fuse_settings:{admiral:{enabled:!0,propertyId:"244"},afs:{enabled:!1},amazonUam:{enabled:!1},blockthrough:!0,cmp:"script",cmpProvider:{partner:"quantcast"},confiant:!1,disableAutoLoadSlots:!1,disableGdprPersonalisation:!1,enableAutoRegistration:!1,enableMiniScrollers:!1,forceSafeFrame:!1,fullScreenAdExpansion:5,fuse_test_urls:[],headerbidding:1e3,id5:{enabled:!1},identity:{enabled:!1},in2wInjection:5,inskinWidth:1200,networkAccountParams:{ttd:{publisherId:{serverclient:{parameterValue:"01GSV2RKVVF93YZBNTTHKSEZ7S"}}}},networkCode:"71161633",networkContractParams:{kueezrtb:{cId:{serverclient:{parameterValue:"672357405abdfcb87eaca9cd"}},pId:{serverclient:{parameterValue:"65lk7c192882r0011813fn9"}}},ttd:{supplySourceId:{serverclient:{parameterValue:"publift"}}}},networkNetworkParams:{},onLoadCallback:"//sticky vrec\nif (screen.width > 960) {\n    const setLhsVrecHeight = () => {\n        const container = document.querySelectorAll('.content')[0];\n        const lhsad = document.querySelectorAll('[data-fuse=\"22882377973\"]')[0];\n        const lhschild = document.querySelectorAll('#fuse-slot-22882377973-1')[0];\n        if (lhsad && container && lhschild) {\n            lhsad.style.height = container.getBoundingClientRect().height - 1300 + 'px';\n            lhschild.style.position = 'sticky';\n            lhschild.style.top = '60px';\n        }\n    }\n    let scrollDone = false;\n    let scrollTimeout;\n    document.addEventListener('scroll', () => {\n        scrollDone = false;\n        if (scrollTimeout) {\n            window.clearTimeout(scrollTimeout);\n        }\n\n\n        scrollTimeout = window.setTimeout(() => {\n            setLhsVrecHeight();\n        }, 100);\n    });\n}",prebid:{analytics:[],breakpoint_options:{l:{enabled:!0,timeout:1e3},m:{enabled:!0,timeout:1e3},s:{enabled:!0,timeout:1e3},xs:{enabled:!0,timeout:1e3}},defaultTimeout:1e3,enabled:!0,sendAllBids:!1},responsive:!0,strict_cmp:!1,tagCategories:{},telemetry:"default",topStickyHeaderSelector:"",useAuctionSlotLimit:5,useBackwardCompatibleNaming:!1,useBidCache:95,useComboZones:5,useCriteoId:95,useGptPreAuctionModule:95,useId5:95,useIncreaseInitialTimeout:95,useIndustry:95,useMaxViewports:5,useMinimumPerceivedRefresh:5,useNewBids:!1,usePrebidContextualSignals:5,useRandomBidderElimination:5,useRefreshPrebidTimeoutBuffering:95,useSharedId:95,useSspRefreshExclusion:5,useViewportRefresh:95,videoSettings:{enabled:!1},yandexBlockId:""},fuse_slots:[{activateConditionConfig:{type:"none"},attributes:{adblock:!1,comboZoneEnabled:!0,dynamic:!1,headerbidding:!0,interscroller:!1,interstitial:!1,miniscroller:!1,refresh:!1,scrollToStick:!1,sticky:!1},bids:[{bidSizes:["120x600","160x600"],bidder:"33across",params:{productId:"siab",siteId:"bBsDW-S8Or7yoIrkHcnnVW"}},{bidSizes:["120x600","160x600"],bidder:"appnexus",params:{placementId:"29383521"}},{bidSizes:["120x600","160x600"],bidder:"pubmatic",params:{adSlot:"71161633/ASCIIART_asciiart/art_dynamic_vrec_1",publisherId:"156762"}},{bidSizes:["120x600","160x600"],bidder:"rubicon",params:{accountId:"20884",siteId:"474126",zoneId:"2814362"}},{bidSizes:["120x600","160x600"],bidder:"smartadserver",params:{domain:"https://prg-apac.smartadserver.com",formatId:116284,pageId:1720333,siteId:566977}},{bidSizes:["120x600","160x600"],bidder:"triplelift",params:{inventoryCode:"Asciiart_StandardDisplay_StandardDisplay"}},{bidSizes:["120x600","160x600"],bidder:"vidazoo",params:{cId:"66bcb2841f24a4c72df7aca4",pId:"59ac17c192832d0011283fe3",subDomain:"exchange"}}],dynamicAttributes:{each:0,incrementEach:0,position:"in",repeatHeight:1e3,skip:0},gamAdUnitId:"22885812668",id:"art_dynamic_vrec_1",interscrollerAttributes:{showBanner:!1,zIndex:0},matchedNetworks:[{matched_schemas:[{bid_type:"serverclient",fields:{contract:{mandatory:{cId:null,pId:null}}},matched_schema:{schema_name:"kueezrtbBidconfig",sizes:["120x600","160x600"]}}],network_code:"kueezrtb"},{matched_schemas:[{bid_type:"serverclient",fields:{account:{mandatory:{publisherId:null}},contract:{mandatory:{supplySourceId:null}}},matched_schema:{schema_name:"ttdBidconfig",sizes:["120x600","160x600"]}}],network_code:"ttd"}],mediaTypes:[],networkZoneParameters:{},sizeMapping:{m:[[120,600],[160,600]],s:[],xs:[]},sizes:[[120,600],[160,600]],slot:"/71161633,22340956133/ASCIIART_asciiart/art_dynamic_vrec_1",stickyAttributes:{allowClose:!1,allowReopen:!1,bgOpacity:0,compact:!1,isButtonOutside:!1,isHideForever:!1,isTop:!1,scrollCreative:!1}},{activateConditionConfig:{type:"none"},attributes:{adblock:!1,comboZoneEnabled:!0,dynamic:!1,headerbidding:!0,interscroller:!1,interstitial:!1,miniscroller:!1,refresh:!1,scrollToStick:!1,sticky:!1},bids:[{bidSizes:["300x100","300x50","320x100","320x50","468x60","728x90","970x90"],bidder:"33across",params:{productId:"siab",siteId:"bBsDW-S8Or7yoIrkHcnnVW"}},{bidSizes:["300x100","300x50","320x100","320x50","468x60","728x90","970x90"],bidder:"appnexus",params:{placementId:"29340293"}},{bidSizes:["300x50"],bidder:"criteo",params:{publisherSubId:"22882339590_1486317_300x50",zoneId:1486317}},{bidSizes:["300x100"],bidder:"criteo",params:{publisherSubId:"22882339590_1486318_300x100",zoneId:1486318}},{bidSizes:["320x50"],bidder:"criteo",params:{publisherSubId:"22882339590_1486319_320x50",zoneId:1486319}},{bidSizes:["320x100"],bidder:"criteo",params:{publisherSubId:"22882339590_1486320_320x100",zoneId:1486320}},{bidSizes:["728x90"],bidder:"criteo",params:{publisherSubId:"22882339590_1486324_728x90",zoneId:1486324}},{bidSizes:["970x90"],bidder:"criteo",params:{publisherSubId:"22882339590_1486325_970x90",zoneId:1486325}},{bidSizes:["300x100","300x50","320x100","320x50","468x60","728x90","970x90"],bidder:"pubmatic",params:{adSlot:"71161633/ASCIIART_asciiart/art_header",publisherId:"156762"}},{bidSizes:["300x100","300x50","320x100","320x50","468x60","728x90","970x90"],bidder:"rubicon",params:{accountId:"20884",siteId:"474126",zoneId:"2814362"}},{bidSizes:["300x100","300x50","320x100","320x50","468x60","728x90","970x90"],bidder:"smartadserver",params:{domain:"https://prg-apac.smartadserver.com",formatId:116284,pageId:1720333,siteId:566977}},{bidSizes:["300x100","300x50","320x100","320x50","468x60","728x90","970x90"],bidder:"triplelift",params:{inventoryCode:"Asciiart_StandardDisplay_StandardDisplay"}},{bidSizes:["300x100","300x50","320x100","320x50","468x60","728x90","970x90"],bidder:"vidazoo",params:{cId:"66bcb2841f24a4c72df7aca4",pId:"59ac17c192832d0011283fe3",subDomain:"exchange"}}],gamAdUnitId:"22882339590",id:"art_header",matchedNetworks:[{matched_schemas:[{bid_type:"serverclient",fields:{contract:{mandatory:{cId:null,pId:null}}},matched_schema:{schema_name:"kueezrtbBidconfig",sizes:["300x100","300x50","320x100","320x50","468x60","728x90","970x90"]}}],network_code:"kueezrtb"},{matched_schemas:[{bid_type:"serverclient",fields:{account:{mandatory:{publisherId:null}},contract:{mandatory:{supplySourceId:null}}},matched_schema:{schema_name:"ttdBidconfig",sizes:["300x100","300x50","320x100","320x50","468x60","728x90","970x90"]}}],network_code:"ttd"}],networkZoneParameters:{},sizeMapping:{l:[[468,60],[728,90],[970,90]],m:[[468,60],[728,90],[970,90]],s:[[300,50],[300,100],[320,50],[320,100],[468,60]],xl:[[468,60],[728,90],[970,90]],xs:[[300,50],[300,100],[320,50],[320,100]]},sizes:[[300,50],[300,100],[320,50],[320,100],[468,60],[728,90],[970,90]],slot:"/71161633,22340956133/ASCIIART_asciiart/art_header"},{activateConditionConfig:{type:"none"},attributes:{adblock:!1,comboZoneEnabled:!0,dynamic:!1,headerbidding:!0,interscroller:!1,interstitial:!1,miniscroller:!1,refresh:!1,scrollToStick:!1,sticky:!1},bids:[{bidSizes:["120x600","160x600","300x100","300x250","300x50","300x600","320x100","320x480","320x50","336x280","468x60","728x90","970x250","970x90"],bidder:"33across",params:{productId:"siab",siteId:"bBsDW-S8Or7yoIrkHcnnVW"}},{bidSizes:["120x600","160x600","300x100","300x250","300x50","300x600","320x100","320x480","320x50","336x280","468x60","728x90","970x250","970x90"],bidder:"appnexus",params:{placementId:"29340296"}},{bidSizes:["160x600"],bidder:"criteo",params:{publisherSubId:"22882339845_1486316_160x600",zoneId:1486316}},{bidSizes:["300x50"],bidder:"criteo",params:{publisherSubId:"22882339845_1486317_300x50",zoneId:1486317}},{bidSizes:["300x100"],bidder:"criteo",params:{publisherSubId:"22882339845_1486318_300x100",zoneId:1486318}},{bidSizes:["320x50"],bidder:"criteo",params:{publisherSubId:"22882339845_1486319_320x50",zoneId:1486319}},{bidSizes:["320x100"],bidder:"criteo",params:{publisherSubId:"22882339845_1486320_320x100",zoneId:1486320}},{bidSizes:["300x250"],bidder:"criteo",params:{publisherSubId:"22882339845_1486321_300x250",zoneId:1486321}},{bidSizes:["300x600"],bidder:"criteo",params:{publisherSubId:"22882339845_1486322_300x600",zoneId:1486322}},{bidSizes:["336x280"],bidder:"criteo",params:{publisherSubId:"22882339845_1486323_336x280",zoneId:1486323}},{bidSizes:["728x90"],bidder:"criteo",params:{publisherSubId:"22882339845_1486324_728x90",zoneId:1486324}},{bidSizes:["970x90"],bidder:"criteo",params:{publisherSubId:"22882339845_1486325_970x90",zoneId:1486325}},{bidSizes:["970x250"],bidder:"criteo",params:{publisherSubId:"22882339845_1486326_970x250",zoneId:1486326}},{bidSizes:["120x600","160x600","300x100","300x250","300x50","300x600","320x100","320x480","320x50","336x280","468x60","728x90","970x250","970x90"],bidder:"pubmatic",params:{adSlot:"71161633/ASCIIART_asciiart/art_incontent_1",publisherId:"156762"}},{bidSizes:["120x600","160x600","300x100","300x250","300x50","300x600","320x100","320x480","320x50","336x280","468x60","728x90","970x250","970x90"],bidder:"rubicon",params:{accountId:"20884",siteId:"474126",zoneId:"2814362"}},{bidSizes:["120x600","160x600","300x100","300x250","300x50","300x600","320x100","320x480","320x50","336x280","468x60","728x90","970x250","970x90"],bidder:"smartadserver",params:{domain:"https://prg-apac.smartadserver.com",formatId:116284,pageId:1720333,siteId:566977}},{bidSizes:["120x600","160x600","300x100","300x250","300x50","300x600","320x100","320x480","320x50","336x280","468x60","728x90","970x250","970x90"],bidder:"triplelift",params:{inventoryCode:"Asciiart_StandardDisplay_StandardDisplay"}},{bidSizes:["120x600","160x600","300x100","300x250","300x50","300x600","320x100","320x480","320x50","336x280","468x60","728x90","970x250","970x90"],bidder:"vidazoo",params:{cId:"66bcb2841f24a4c72df7aca4",pId:"59ac17c192832d0011283fe3",subDomain:"exchange"}}],gamAdUnitId:"22882339845",id:"art_incontent_1",matchedNetworks:[{matched_schemas:[{bid_type:"serverclient",fields:{contract:{mandatory:{cId:null,pId:null}}},matched_schema:{schema_name:"kueezrtbBidconfig",sizes:["120x600","160x600","300x100","300x250","300x50","300x600","320x100","320x480","320x50","336x280","468x60","728x90","970x250","970x90"]}}],network_code:"kueezrtb"},{matched_schemas:[{bid_type:"serverclient",fields:{account:{mandatory:{publisherId:null}},contract:{mandatory:{supplySourceId:null}}},matched_schema:{schema_name:"ttdBidconfig",sizes:["120x600","160x600","300x100","300x250","300x50","300x600","320x100","320x480","320x50","336x280","468x60","728x90","970x250","970x90"]}}],network_code:"ttd"}],networkZoneParameters:{},sizeMapping:{l:[[300,250],[336,280],[468,60],[728,90],[970,90],[970,250]],m:[[300,250],[336,280],[468,60],[728,90],[970,90],[970,250]],s:[[120,600],[160,600],[300,50],[300,100],[300,250],[300,600],[320,50],[320,100],[320,480],[336,280]],xl:[[300,250],[336,280],[468,60],[728,90],[970,90],[970,250]],xs:[[120,600],[160,600],[300,50],[300,100],[300,250],[300,600],[320,50],[320,100],[320,480],[336,280]]},sizes:[[120,600],[160,600],[300,50],[300,100],[300,250],[300,600],[320,50],[320,100],[320,480],[336,280],[468,60],[728,90],[970,90],[970,250]],slot:"/71161633,22340956133/ASCIIART_asciiart/art_incontent_1"},{activateConditionConfig:{type:"none"},attributes:{adblock:!1,comboZoneEnabled:!0,dynamic:!1,headerbidding:!0,interscroller:!1,interstitial:!1,miniscroller:!1,refresh:!1,scrollToStick:!1,sticky:!1},bids:[{bidSizes:["120x600","160x600","300x100","300x250","300x50","300x600","320x100","320x480","320x50","336x280","468x60","728x90","970x250","970x90"],bidder:"33across",params:{productId:"siab",siteId:"bBsDW-S8Or7yoIrkHcnnVW"}},{bidSizes:["120x600","160x600","300x100","300x250","300x50","300x600","320x100","320x480","320x50","336x280","468x60","728x90","970x250","970x90"],bidder:"appnexus",params:{placementId:"29340295"}},{bidSizes:["160x600"],bidder:"criteo",params:{publisherSubId:"22882339593_1486316_160x600",zoneId:1486316}},{bidSizes:["300x50"],bidder:"criteo",params:{publisherSubId:"22882339593_1486317_300x50",zoneId:1486317}},{bidSizes:["300x100"],bidder:"criteo",params:{publisherSubId:"22882339593_1486318_300x100",zoneId:1486318}},{bidSizes:["320x50"],bidder:"criteo",params:{publisherSubId:"22882339593_1486319_320x50",zoneId:1486319}},{bidSizes:["320x100"],bidder:"criteo",params:{publisherSubId:"22882339593_1486320_320x100",zoneId:1486320}},{bidSizes:["300x250"],bidder:"criteo",params:{publisherSubId:"22882339593_1486321_300x250",zoneId:1486321}},{bidSizes:["300x600"],bidder:"criteo",params:{publisherSubId:"22882339593_1486322_300x600",zoneId:1486322}},{bidSizes:["336x280"],bidder:"criteo",params:{publisherSubId:"22882339593_1486323_336x280",zoneId:1486323}},{bidSizes:["728x90"],bidder:"criteo",params:{publisherSubId:"22882339593_1486324_728x90",zoneId:1486324}},{bidSizes:["970x90"],bidder:"criteo",params:{publisherSubId:"22882339593_1486325_970x90",zoneId:1486325}},{bidSizes:["970x250"],bidder:"criteo",params:{publisherSubId:"22882339593_1486326_970x250",zoneId:1486326}},{bidSizes:["120x600","160x600","300x100","300x250","300x50","300x600","320x100","320x480","320x50","336x280","468x60","728x90","970x250","970x90"],bidder:"pubmatic",params:{adSlot:"71161633/ASCIIART_asciiart/art_incontent_2",publisherId:"156762"}},{bidSizes:["120x600","160x600","300x100","300x250","300x50","300x600","320x100","320x480","320x50","336x280","468x60","728x90","970x250","970x90"],bidder:"rubicon",params:{accountId:"20884",siteId:"474126",zoneId:"2814362"}},{bidSizes:["120x600","160x600","300x100","300x250","300x50","300x600","320x100","320x480","320x50","336x280","468x60","728x90","970x250","970x90"],bidder:"smartadserver",params:{domain:"https://prg-apac.smartadserver.com",formatId:116284,pageId:1720333,siteId:566977}},{bidSizes:["120x600","160x600","300x100","300x250","300x50","300x600","320x100","320x480","320x50","336x280","468x60","728x90","970x250","970x90"],bidder:"triplelift",params:{inventoryCode:"Asciiart_StandardDisplay_StandardDisplay"}},{bidSizes:["120x600","160x600","300x100","300x250","300x50","300x600","320x100","320x480","320x50","336x280","468x60","728x90","970x250","970x90"],bidder:"vidazoo",params:{cId:"66bcb2841f24a4c72df7aca4",pId:"59ac17c192832d0011283fe3",subDomain:"exchange"}}],gamAdUnitId:"22882339593",id:"art_incontent_2",matchedNetworks:[{matched_schemas:[{bid_type:"serverclient",fields:{contract:{mandatory:{cId:null,pId:null}}},matched_schema:{schema_name:"kueezrtbBidconfig",sizes:["120x600","160x600","300x100","300x250","300x50","300x600","320x100","320x480","320x50","336x280","468x60","728x90","970x250","970x90"]}}],network_code:"kueezrtb"},{matched_schemas:[{bid_type:"serverclient",fields:{account:{mandatory:{publisherId:null}},contract:{mandatory:{supplySourceId:null}}},matched_schema:{schema_name:"ttdBidconfig",sizes:["120x600","160x600","300x100","300x250","300x50","300x600","320x100","320x480","320x50","336x280","468x60","728x90","970x250","970x90"]}}],network_code:"ttd"}],networkZoneParameters:{},sizeMapping:{l:[[300,250],[336,280],[468,60],[728,90],[970,90],[970,250]],m:[[300,250],[336,280],[468,60],[728,90],[970,90],[970,250]],s:[[120,600],[160,600],[300,50],[300,100],[300,250],[300,600],[320,50],[320,100],[320,480],[336,280]],xl:[[300,250],[336,280],[468,60],[728,90],[970,90],[970,250]],xs:[[120,600],[160,600],[300,50],[300,100],[300,250],[300,600],[320,50],[320,100],[320,480],[336,280]]},sizes:[[120,600],[160,600],[300,50],[300,100],[300,250],[300,600],[320,50],[320,100],[320,480],[336,280],[468,60],[728,90],[970,90],[970,250]],slot:"/71161633,22340956133/ASCIIART_asciiart/art_incontent_2"},{activateConditionConfig:{type:"none"},attributes:{adblock:!1,comboZoneEnabled:!0,dynamic:!1,headerbidding:!0,interscroller:!1,interstitial:!1,miniscroller:!1,refresh:30,scrollToStick:!1,sticky:!1},bids:[{bidSizes:["120x600","160x600"],bidder:"33across",params:{productId:"siab",siteId:"bBsDW-S8Or7yoIrkHcnnVW"}},{bidSizes:["120x600","160x600"],bidder:"appnexus",params:{placementId:"29340297"}},{bidSizes:["160x600"],bidder:"criteo",params:{publisherSubId:"22882377973_1486316_160x600",zoneId:1486316}},{bidSizes:["120x600","160x600"],bidder:"pubmatic",params:{adSlot:"71161633/ASCIIART_asciiart/art_vrec_1",publisherId:"156762"}},{bidSizes:["120x600","160x600"],bidder:"rubicon",params:{accountId:"20884",siteId:"474126",zoneId:"2814362"}},{bidSizes:["120x600","160x600"],bidder:"smartadserver",params:{domain:"https://prg-apac.smartadserver.com",formatId:116284,pageId:1720333,siteId:566977}},{bidSizes:["120x600","160x600"],bidder:"triplelift",params:{inventoryCode:"Asciiart_StandardDisplay_StandardDisplay"}},{bidSizes:["120x600","160x600"],bidder:"vidazoo",params:{cId:"66bcb2841f24a4c72df7aca4",pId:"59ac17c192832d0011283fe3",subDomain:"exchange"}}],dynamicAttributes:{each:0,incrementEach:0,position:"in",repeatHeight:1e3,skip:0},gamAdUnitId:"22882377973",id:"art_vrec_1",interscrollerAttributes:{showBanner:!1,zIndex:0},matchedNetworks:[{matched_schemas:[{bid_type:"serverclient",fields:{contract:{mandatory:{cId:null,pId:null}}},matched_schema:{schema_name:"kueezrtbBidconfig",sizes:["120x600","160x600"]}}],network_code:"kueezrtb"},{matched_schemas:[{bid_type:"serverclient",fields:{account:{mandatory:{publisherId:null}},contract:{mandatory:{supplySourceId:null}}},matched_schema:{schema_name:"ttdBidconfig",sizes:["120x600","160x600"]}}],network_code:"ttd"}],mediaTypes:[],networkZoneParameters:{},sizeMapping:{l:[[120,600],[160,600]],m:[[120,600],[160,600]],s:[],xl:[[120,600],[160,600]],xs:[]},sizes:[[120,600],[160,600]],slot:"/71161633,22340956133/ASCIIART_asciiart/art_vrec_1",stickyAttributes:{allowClose:!1,allowReopen:!1,bgOpacity:0,compact:!1,isButtonOutside:!1,isHideForever:!1,isTop:!1,scrollCreative:!1}},{activateConditionConfig:{type:"none"},attributes:{adblock:!1,comboZoneEnabled:!0,dynamic:!1,headerbidding:!0,interscroller:!1,interstitial:!1,miniscroller:!1,refresh:!1,scrollToStick:!1,sticky:!1},bids:[{bidSizes:["300x100","300x50","320x100","320x50","468x60","728x90","970x250","970x90"],bidder:"33across",params:{productId:"siab",siteId:"bBsDW-S8Or7yoIrkHcnnVW"}},{bidSizes:["300x100","300x50","320x100","320x50","468x60","728x90","970x250","970x90"],bidder:"appnexus",params:{placementId:"29340291"}},{bidSizes:["300x50"],bidder:"criteo",params:{publisherSubId:"22882339587_1486317_300x50",zoneId:1486317}},{bidSizes:["300x100"],bidder:"criteo",params:{publisherSubId:"22882339587_1486318_300x100",zoneId:1486318}},{bidSizes:["320x50"],bidder:"criteo",params:{publisherSubId:"22882339587_1486319_320x50",zoneId:1486319}},{bidSizes:["320x100"],bidder:"criteo",params:{publisherSubId:"22882339587_1486320_320x100",zoneId:1486320}},{bidSizes:["728x90"],bidder:"criteo",params:{publisherSubId:"22882339587_1486324_728x90",zoneId:1486324}},{bidSizes:["970x90"],bidder:"criteo",params:{publisherSubId:"22882339587_1486325_970x90",zoneId:1486325}},{bidSizes:["970x250"],bidder:"criteo",params:{publisherSubId:"22882339587_1486326_970x250",zoneId:1486326}},{bidSizes:["300x100","300x50","320x100","320x50","468x60","728x90","970x250","970x90"],bidder:"pubmatic",params:{adSlot:"71161633/ASCIIART_asciiart/cats_header",publisherId:"156762"}},{bidSizes:["300x100","300x50","320x100","320x50","468x60","728x90","970x250","970x90"],bidder:"rubicon",params:{accountId:"20884",siteId:"474126",zoneId:"2814362"}},{bidSizes:["300x100","300x50","320x100","320x50","468x60","728x90","970x250","970x90"],bidder:"smartadserver",params:{domain:"https://prg-apac.smartadserver.com",formatId:116284,pageId:1720333,siteId:566977}},{bidSizes:["300x100","300x50","320x100","320x50","468x60","728x90","970x250","970x90"],bidder:"triplelift",params:{inventoryCode:"Asciiart_StandardDisplay_StandardDisplay"}},{bidSizes:["300x100","300x50","320x100","320x50","468x60","728x90","970x250","970x90"],bidder:"vidazoo",params:{cId:"66bcb2841f24a4c72df7aca4",pId:"59ac17c192832d0011283fe3",subDomain:"exchange"}}],gamAdUnitId:"22882339587",id:"cats_header",matchedNetworks:[{matched_schemas:[{bid_type:"serverclient",fields:{contract:{mandatory:{cId:null,pId:null}}},matched_schema:{schema_name:"kueezrtbBidconfig",sizes:["300x100","300x50","320x100","320x50","468x60","728x90","970x250","970x90"]}}],network_code:"kueezrtb"},{matched_schemas:[{bid_type:"serverclient",fields:{account:{mandatory:{publisherId:null}},contract:{mandatory:{supplySourceId:null}}},matched_schema:{schema_name:"ttdBidconfig",sizes:["300x100","300x50","320x100","320x50","468x60","728x90","970x250","970x90"]}}],network_code:"ttd"}],networkZoneParameters:{},sizeMapping:{l:[[468,60],[728,90],[970,90],[970,250]],m:[[468,60],[728,90],[970,90],[970,250]],s:[[300,50],[300,100],[320,50],[320,100],[468,60]],xl:[[468,60],[728,90],[970,90],[970,250]],xs:[[300,50],[300,100],[320,50],[320,100]]},sizes:[[300,50],[300,100],[320,50],[320,100],[468,60],[728,90],[970,90],[970,250]],slot:"/71161633,22340956133/ASCIIART_asciiart/cats_header"},{activateConditionConfig:{type:"none"},attributes:{adblock:!1,comboZoneEnabled:!0,dynamic:!1,headerbidding:!0,interscroller:!1,interstitial:!1,miniscroller:!1,refresh:!1,scrollToStick:!1,sticky:!1},bids:[{bidSizes:["120x600","160x600","300x100","300x250","300x50","300x600","320x100","320x480","320x50","336x280","468x60","728x90","970x250","970x90"],bidder:"33across",params:{productId:"siab",siteId:"bBsDW-S8Or7yoIrkHcnnVW"}},{bidSizes:["120x600","160x600","300x100","300x250","300x50","300x600","320x100","320x480","320x50","336x280","468x60","728x90","970x250","970x90"],bidder:"appnexus",params:{placementId:"29340298"}},{bidSizes:["160x600"],bidder:"criteo",params:{publisherSubId:"22882339596_1486316_160x600",zoneId:1486316}},{bidSizes:["300x50"],bidder:"criteo",params:{publisherSubId:"22882339596_1486317_300x50",zoneId:1486317}},{bidSizes:["300x100"],bidder:"criteo",params:{publisherSubId:"22882339596_1486318_300x100",zoneId:1486318}},{bidSizes:["320x50"],bidder:"criteo",params:{publisherSubId:"22882339596_1486319_320x50",zoneId:1486319}},{bidSizes:["320x100"],bidder:"criteo",params:{publisherSubId:"22882339596_1486320_320x100",zoneId:1486320}},{bidSizes:["300x250"],bidder:"criteo",params:{publisherSubId:"22882339596_1486321_300x250",zoneId:1486321}},{bidSizes:["300x600"],bidder:"criteo",params:{publisherSubId:"22882339596_1486322_300x600",zoneId:1486322}},{bidSizes:["336x280"],bidder:"criteo",params:{publisherSubId:"22882339596_1486323_336x280",zoneId:1486323}},{bidSizes:["728x90"],bidder:"criteo",params:{publisherSubId:"22882339596_1486324_728x90",zoneId:1486324}},{bidSizes:["970x90"],bidder:"criteo",params:{publisherSubId:"22882339596_1486325_970x90",zoneId:1486325}},{bidSizes:["970x250"],bidder:"criteo",params:{publisherSubId:"22882339596_1486326_970x250",zoneId:1486326}},{bidSizes:["120x600","160x600","300x100","300x250","300x50","300x600","320x100","320x480","320x50","336x280","468x60","728x90","970x250","970x90"],bidder:"pubmatic",params:{adSlot:"71161633/ASCIIART_asciiart/cats_incontent_1",publisherId:"156762"}},{bidSizes:["120x600","160x600","300x100","300x250","300x50","300x600","320x100","320x480","320x50","336x280","468x60","728x90","970x250","970x90"],bidder:"rubicon",params:{accountId:"20884",siteId:"474126",zoneId:"2814362"}},{bidSizes:["120x600","160x600","300x100","300x250","300x50","300x600","320x100","320x480","320x50","336x280","468x60","728x90","970x250","970x90"],bidder:"smartadserver",params:{domain:"https://prg-apac.smartadserver.com",formatId:116284,pageId:1720333,siteId:566977}},{bidSizes:["120x600","160x600","300x100","300x250","300x50","300x600","320x100","320x480","320x50","336x280","468x60","728x90","970x250","970x90"],bidder:"triplelift",params:{inventoryCode:"Asciiart_StandardDisplay_StandardDisplay"}},{bidSizes:["120x600","160x600","300x100","300x250","300x50","300x600","320x100","320x480","320x50","336x280","468x60","728x90","970x250","970x90"],bidder:"vidazoo",params:{cId:"66bcb2841f24a4c72df7aca4",pId:"59ac17c192832d0011283fe3",subDomain:"exchange"}}],gamAdUnitId:"22882339596",id:"cats_incontent_1",matchedNetworks:[{matched_schemas:[{bid_type:"serverclient",fields:{contract:{mandatory:{cId:null,pId:null}}},matched_schema:{schema_name:"kueezrtbBidconfig",sizes:["120x600","160x600","300x100","300x250","300x50","300x600","320x100","320x480","320x50","336x280","468x60","728x90","970x250","970x90"]}}],network_code:"kueezrtb"},{matched_schemas:[{bid_type:"serverclient",fields:{account:{mandatory:{publisherId:null}},contract:{mandatory:{supplySourceId:null}}},matched_schema:{schema_name:"ttdBidconfig",sizes:["120x600","160x600","300x100","300x250","300x50","300x600","320x100","320x480","320x50","336x280","468x60","728x90","970x250","970x90"]}}],network_code:"ttd"}],networkZoneParameters:{},sizeMapping:{l:[[300,250],[336,280],[468,60],[728,90],[970,90],[970,250]],m:[[300,250],[336,280],[468,60],[728,90],[970,90],[970,250]],s:[[120,600],[160,600],[300,50],[300,100],[300,250],[300,600],[320,50],[320,100],[320,480],[336,280]],xl:[[300,250],[336,280],[468,60],[728,90],[970,90],[970,250]],xs:[[120,600],[160,600],[300,50],[300,100],[300,250],[300,600],[320,50],[320,100],[320,480],[336,280]]},sizes:[[120,600],[160,600],[300,50],[300,100],[300,250],[300,600],[320,50],[320,100],[320,480],[336,280],[468,60],[728,90],[970,90],[970,250]],slot:"/71161633,22340956133/ASCIIART_asciiart/cats_incontent_1"},{activateConditionConfig:{scrollDistance:{l:1200,m:1200,s:800,xl:1200,xs:800},type:"lazy"},attributes:{adblock:!1,comboZoneEnabled:!0,dynamic:!1,headerbidding:!0,interscroller:!1,interstitial:!1,miniscroller:!1,refresh:!1,scrollToStick:!1,sticky:!1},bids:[{bidSizes:["120x600","160x600","300x100","300x250","300x50","300x600","320x100","320x480","320x50","336x280","468x60","728x90","970x250","970x90"],bidder:"33across",params:{productId:"siab",siteId:"bBsDW-S8Or7yoIrkHcnnVW"}},{bidSizes:["120x600","160x600","300x100","300x250","300x50","300x600","320x100","320x480","320x50","336x280","468x60","728x90","970x250","970x90"],bidder:"appnexus",params:{placementId:"29340292"}},{bidSizes:["160x600"],bidder:"criteo",params:{publisherSubId:"22882339842_1486316_160x600",zoneId:1486316}},{bidSizes:["300x50"],bidder:"criteo",params:{publisherSubId:"22882339842_1486317_300x50",zoneId:1486317}},{bidSizes:["300x100"],bidder:"criteo",params:{publisherSubId:"22882339842_1486318_300x100",zoneId:1486318}},{bidSizes:["320x50"],bidder:"criteo",params:{publisherSubId:"22882339842_1486319_320x50",zoneId:1486319}},{bidSizes:["320x100"],bidder:"criteo",params:{publisherSubId:"22882339842_1486320_320x100",zoneId:1486320}},{bidSizes:["300x250"],bidder:"criteo",params:{publisherSubId:"22882339842_1486321_300x250",zoneId:1486321}},{bidSizes:["300x600"],bidder:"criteo",params:{publisherSubId:"22882339842_1486322_300x600",zoneId:1486322}},{bidSizes:["336x280"],bidder:"criteo",params:{publisherSubId:"22882339842_1486323_336x280",zoneId:1486323}},{bidSizes:["728x90"],bidder:"criteo",params:{publisherSubId:"22882339842_1486324_728x90",zoneId:1486324}},{bidSizes:["970x90"],bidder:"criteo",params:{publisherSubId:"22882339842_1486325_970x90",zoneId:1486325}},{bidSizes:["970x250"],bidder:"criteo",params:{publisherSubId:"22882339842_1486326_970x250",zoneId:1486326}},{bidSizes:["120x600","160x600","300x100","300x250","300x50","300x600","320x100","320x480","320x50","336x280","468x60","728x90","970x250","970x90"],bidder:"pubmatic",params:{adSlot:"71161633/ASCIIART_asciiart/cats_incontent_2",publisherId:"156762"}},{bidSizes:["120x600","160x600","300x100","300x250","300x50","300x600","320x100","320x480","320x50","336x280","468x60","728x90","970x250","970x90"],bidder:"rubicon",params:{accountId:"20884",siteId:"474126",zoneId:"2814362"}},{bidSizes:["120x600","160x600","300x100","300x250","300x50","300x600","320x100","320x480","320x50","336x280","468x60","728x90","970x250","970x90"],bidder:"smartadserver",params:{domain:"https://prg-apac.smartadserver.com",formatId:116284,pageId:1720333,siteId:566977}},{bidSizes:["120x600","160x600","300x100","300x250","300x50","300x600","320x100","320x480","320x50","336x280","468x60","728x90","970x250","970x90"],bidder:"triplelift",params:{inventoryCode:"Asciiart_StandardDisplay_StandardDisplay"}},{bidSizes:["120x600","160x600","300x100","300x250","300x50","300x600","320x100","320x480","320x50","336x280","468x60","728x90","970x250","970x90"],bidder:"vidazoo",params:{cId:"66bcb2841f24a4c72df7aca4",pId:"59ac17c192832d0011283fe3",subDomain:"exchange"}}],dynamicAttributes:{each:0,incrementEach:0,position:"in",repeatHeight:1e3,skip:0},gamAdUnitId:"22882339842",id:"cats_incontent_2",interscrollerAttributes:{showBanner:!1,zIndex:0},matchedNetworks:[{matched_schemas:[{bid_type:"serverclient",fields:{contract:{mandatory:{cId:null,pId:null}}},matched_schema:{schema_name:"kueezrtbBidconfig",sizes:["120x600","160x600","300x100","300x250","300x50","300x600","320x100","320x480","320x50","336x280","468x60","728x90","970x250","970x90"]}}],network_code:"kueezrtb"},{matched_schemas:[{bid_type:"serverclient",fields:{account:{mandatory:{publisherId:null}},contract:{mandatory:{supplySourceId:null}}},matched_schema:{schema_name:"ttdBidconfig",sizes:["120x600","160x600","300x100","300x250","300x50","300x600","320x100","320x480","320x50","336x280","468x60","728x90","970x250","970x90"]}}],network_code:"ttd"}],mediaTypes:[],networkZoneParameters:{},sizeMapping:{l:[[300,250],[336,280],[468,60],[728,90],[970,90],[970,250]],m:[[300,250],[336,280],[468,60],[728,90],[970,90],[970,250]],s:[[120,600],[160,600],[300,50],[300,100],[300,250],[300,600],[320,50],[320,100],[320,480],[336,280]],xl:[[300,250],[336,280],[468,60],[728,90],[970,90],[970,250]],xs:[[120,600],[160,600],[300,50],[300,100],[300,250],[300,600],[320,50],[320,100],[320,480],[336,280]]},sizes:[[120,600],[160,600],[300,50],[300,100],[300,250],[300,600],[320,50],[320,100],[320,480],[336,280],[468,60],[728,90],[970,90],[970,250]],slot:"/71161633,22340956133/ASCIIART_asciiart/cats_incontent_2",stickyAttributes:{allowClose:!1,allowReopen:!1,bgOpacity:0,compact:!1,isButtonOutside:!1,isHideForever:!1,isTop:!1,scrollCreative:!1}},{activateConditionConfig:{type:"none"},attributes:{adblock:!1,comboZoneEnabled:!0,dynamic:!1,headerbidding:!0,interscroller:!1,interstitial:!1,miniscroller:!1,refresh:30,scrollToStick:!1,sticky:!1},bids:[{bidSizes:["300x100","300x50","320x100","320x50","468x60","728x90","970x90"],bidder:"33across",params:{productId:"siab",siteId:"bBsDW-S8Or7yoIrkHcnnVW"}},{bidSizes:["300x100","300x50","320x100","320x50","468x60","728x90","970x90"],bidder:"appnexus",params:{placementId:"29340289"}},{bidSizes:["300x50"],bidder:"criteo",params:{publisherSubId:"22882339584_1486317_300x50",zoneId:1486317}},{bidSizes:["300x100"],bidder:"criteo",params:{publisherSubId:"22882339584_1486318_300x100",zoneId:1486318}},{bidSizes:["320x50"],bidder:"criteo",params:{publisherSubId:"22882339584_1486319_320x50",zoneId:1486319}},{bidSizes:["320x100"],bidder:"criteo",params:{publisherSubId:"22882339584_1486320_320x100",zoneId:1486320}},{bidSizes:["728x90"],bidder:"criteo",params:{publisherSubId:"22882339584_1486324_728x90",zoneId:1486324}},{bidSizes:["970x90"],bidder:"criteo",params:{publisherSubId:"22882339584_1486325_970x90",zoneId:1486325}},{bidSizes:["300x100","300x50","320x100","320x50","468x60","728x90","970x90"],bidder:"pubmatic",params:{adSlot:"71161633/ASCIIART_asciiart/home_header",publisherId:"156762"}},{bidSizes:["300x100","300x50","320x100","320x50","468x60","728x90","970x90"],bidder:"rubicon",params:{accountId:"20884",siteId:"474126",zoneId:"2814362"}},{bidSizes:["300x100","300x50","320x100","320x50","468x60","728x90","970x90"],bidder:"smartadserver",params:{domain:"https://prg-apac.smartadserver.com",formatId:116284,pageId:1720333,siteId:566977}},{bidSizes:["300x100","300x50","320x100","320x50","468x60","728x90","970x90"],bidder:"triplelift",params:{inventoryCode:"Asciiart_StandardDisplay_StandardDisplay"}},{bidSizes:["300x100","300x50","320x100","320x50","468x60","728x90","970x90"],bidder:"vidazoo",params:{cId:"66bcb2841f24a4c72df7aca4",pId:"59ac17c192832d0011283fe3",subDomain:"exchange"}}],dynamicAttributes:{each:0,incrementEach:0,position:"in",repeatHeight:1e3,skip:0},gamAdUnitId:"22882339584",id:"home_header",interscrollerAttributes:{showBanner:!1,zIndex:0},matchedNetworks:[{matched_schemas:[{bid_type:"serverclient",fields:{contract:{mandatory:{cId:null,pId:null}}},matched_schema:{schema_name:"kueezrtbBidconfig",sizes:["300x100","300x50","320x100","320x50","468x60","728x90","970x90"]}}],network_code:"kueezrtb"},{matched_schemas:[{bid_type:"serverclient",fields:{account:{mandatory:{publisherId:null}},contract:{mandatory:{supplySourceId:null}}},matched_schema:{schema_name:"ttdBidconfig",sizes:["300x100","300x50","320x100","320x50","468x60","728x90","970x90"]}}],network_code:"ttd"}],mediaTypes:[],networkZoneParameters:{},sizeMapping:{l:[[468,60],[728,90],[970,90]],m:[[468,60],[728,90],[970,90]],s:[[300,50],[300,100],[320,50],[320,100],[468,60]],xl:[[468,60],[728,90],[970,90]],xs:[[300,50],[300,100],[320,50],[320,100]]},sizes:[[300,50],[300,100],[320,50],[320,100],[468,60],[728,90],[970,90]],slot:"/71161633,22340956133/ASCIIART_asciiart/home_header",stickyAttributes:{allowClose:!1,allowReopen:!1,bgOpacity:0,compact:!1,isButtonOutside:!1,isHideForever:!1,isTop:!1,scrollCreative:!1}},{activateConditionConfig:{type:"none"},attributes:{adblock:!1,comboZoneEnabled:!0,dynamic:!1,headerbidding:!0,interscroller:!1,interstitial:!1,miniscroller:!1,refresh:30,scrollToStick:!1,sticky:!1},bids:[{bidSizes:["120x600","160x600","300x100","300x250","300x50","300x600","320x100","320x480","320x50","336x280","468x60","728x90","970x250","970x90"],bidder:"33across",params:{productId:"siab",siteId:"bBsDW-S8Or7yoIrkHcnnVW"}},{bidSizes:["120x600","160x600","300x100","300x250","300x50","300x600","320x100","320x480","320x50","336x280","468x60","728x90","970x250","970x90"],bidder:"appnexus",params:{placementId:"29340290"}},{bidSizes:["160x600"],bidder:"criteo",params:{publisherSubId:"22882377967_1486316_160x600",zoneId:1486316}},{bidSizes:["300x50"],bidder:"criteo",params:{publisherSubId:"22882377967_1486317_300x50",zoneId:1486317}},{bidSizes:["300x100"],bidder:"criteo",params:{publisherSubId:"22882377967_1486318_300x100",zoneId:1486318}},{bidSizes:["320x50"],bidder:"criteo",params:{publisherSubId:"22882377967_1486319_320x50",zoneId:1486319}},{bidSizes:["320x100"],bidder:"criteo",params:{publisherSubId:"22882377967_1486320_320x100",zoneId:1486320}},{bidSizes:["300x250"],bidder:"criteo",params:{publisherSubId:"22882377967_1486321_300x250",zoneId:1486321}},{bidSizes:["300x600"],bidder:"criteo",params:{publisherSubId:"22882377967_1486322_300x600",zoneId:1486322}},{bidSizes:["336x280"],bidder:"criteo",params:{publisherSubId:"22882377967_1486323_336x280",zoneId:1486323}},{bidSizes:["728x90"],bidder:"criteo",params:{publisherSubId:"22882377967_1486324_728x90",zoneId:1486324}},{bidSizes:["970x90"],bidder:"criteo",params:{publisherSubId:"22882377967_1486325_970x90",zoneId:1486325}},{bidSizes:["970x250"],bidder:"criteo",params:{publisherSubId:"22882377967_1486326_970x250",zoneId:1486326}},{bidSizes:["120x600","160x600","300x100","300x250","300x50","300x600","320x100","320x480","320x50","336x280","468x60","728x90","970x250","970x90"],bidder:"pubmatic",params:{adSlot:"71161633/ASCIIART_asciiart/home_incontent_1",publisherId:"156762"}},{bidSizes:["120x600","160x600","300x100","300x250","300x50","300x600","320x100","320x480","320x50","336x280","468x60","728x90","970x250","970x90"],bidder:"rubicon",params:{accountId:"20884",siteId:"474126",zoneId:"2814362"}},{bidSizes:["120x600","160x600","300x100","300x250","300x50","300x600","320x100","320x480","320x50","336x280","468x60","728x90","970x250","970x90"],bidder:"smartadserver",params:{domain:"https://prg-apac.smartadserver.com",formatId:116284,pageId:1720333,siteId:566977}},{bidSizes:["120x600","160x600","300x100","300x250","300x50","300x600","320x100","320x480","320x50","336x280","468x60","728x90","970x250","970x90"],bidder:"triplelift",params:{inventoryCode:"Asciiart_StandardDisplay_StandardDisplay"}},{bidSizes:["120x600","160x600","300x100","300x250","300x50","300x600","320x100","320x480","320x50","336x280","468x60","728x90","970x250","970x90"],bidder:"vidazoo",params:{cId:"66bcb2841f24a4c72df7aca4",pId:"59ac17c192832d0011283fe3",subDomain:"exchange"}}],dynamicAttributes:{each:0,incrementEach:0,position:"in",repeatHeight:1e3,skip:0},gamAdUnitId:"22882377967",id:"home_incontent_1",interscrollerAttributes:{showBanner:!1,zIndex:0},matchedNetworks:[{matched_schemas:[{bid_type:"serverclient",fields:{contract:{mandatory:{cId:null,pId:null}}},matched_schema:{schema_name:"kueezrtbBidconfig",sizes:["120x600","160x600","300x100","300x250","300x50","300x600","320x100","320x480","320x50","336x280","468x60","728x90","970x250","970x90"]}}],network_code:"kueezrtb"},{matched_schemas:[{bid_type:"serverclient",fields:{account:{mandatory:{publisherId:null}},contract:{mandatory:{supplySourceId:null}}},matched_schema:{schema_name:"ttdBidconfig",sizes:["120x600","160x600","300x100","300x250","300x50","300x600","320x100","320x480","320x50","336x280","468x60","728x90","970x250","970x90"]}}],network_code:"ttd"}],mediaTypes:[],networkZoneParameters:{},sizeMapping:{l:[[300,250],[336,280],[468,60],[728,90],[970,90],[970,250]],m:[[300,250],[336,280],[468,60],[728,90],[970,90],[970,250]],s:[[120,600],[160,600],[300,50],[300,100],[300,250],[300,600],[320,50],[320,100],[320,480],[336,280]],xl:[[300,250],[336,280],[468,60],[728,90],[970,90],[970,250]],xs:[[120,600],[160,600],[300,50],[300,100],[300,250],[300,600],[320,50],[320,100],[320,480],[336,280]]},sizes:[[120,600],[160,600],[300,50],[300,100],[300,250],[300,600],[320,50],[320,100],[320,480],[336,280],[468,60],[728,90],[970,90],[970,250]],slot:"/71161633,22340956133/ASCIIART_asciiart/home_incontent_1",stickyAttributes:{allowClose:!1,allowReopen:!1,bgOpacity:0,compact:!1,isButtonOutside:!1,isHideForever:!1,isTop:!1,scrollCreative:!1}},{activateConditionConfig:{type:"none"},attributes:{adblock:!1,comboZoneEnabled:!1,dynamic:!1,headerbidding:!0,interscroller:!1,interstitial:!1,miniscroller:!1,refresh:30,scrollToStick:!1,sticky:!0},bids:[{bidSizes:["300x50","320x50","468x60","728x90","970x90"],bidder:"33across",params:{productId:"siab",siteId:"bBsDW-S8Or7yoIrkHcnnVW"}},{bidSizes:["300x50","320x50","468x60","728x90","970x90"],bidder:"appnexus",params:{placementId:"29340294"}},{bidSizes:["300x50"],bidder:"criteo",params:{publisherSubId:"22882377970_1486317_300x50",zoneId:1486317}},{bidSizes:["320x50"],bidder:"criteo",params:{publisherSubId:"22882377970_1486319_320x50",zoneId:1486319}},{bidSizes:["728x90"],bidder:"criteo",params:{publisherSubId:"22882377970_1486324_728x90",zoneId:1486324}},{bidSizes:["970x90"],bidder:"criteo",params:{publisherSubId:"22882377970_1486325_970x90",zoneId:1486325}},{bidSizes:["300x50","320x50","468x60","728x90","970x90"],bidder:"pubmatic",params:{adSlot:"71161633/ASCIIART_asciiart/sticky_footer",publisherId:"156762"}},{bidSizes:["300x50","320x50","468x60","728x90","970x90"],bidder:"rubicon",params:{accountId:"20884",siteId:"474126",zoneId:"2814362"}},{bidSizes:["300x50","320x50","468x60","728x90","970x90"],bidder:"smartadserver",params:{domain:"https://prg-apac.smartadserver.com",formatId:116284,pageId:1720333,siteId:566977}},{bidSizes:["300x50","320x50","468x60","728x90","970x90"],bidder:"triplelift",params:{inventoryCode:"Asciiart_StandardDisplay_StandardDisplay"}},{bidSizes:["300x50","320x50","468x60","728x90","970x90"],bidder:"vidazoo",params:{cId:"66bcb2841f24a4c72df7aca4",pId:"59ac17c192832d0011283fe3",subDomain:"exchange"}}],dynamicAttributes:{each:0,incrementEach:0,position:"in",repeatHeight:1e3,skip:0},gamAdUnitId:"22882377970",id:"sticky_footer",interscrollerAttributes:{showBanner:!1,zIndex:0},matchedNetworks:[{matched_schemas:[{bid_type:"serverclient",fields:{contract:{mandatory:{cId:null,pId:null}}},matched_schema:{schema_name:"kueezrtbBidconfig",sizes:["300x50","320x50","468x60","728x90","970x90"]}}],network_code:"kueezrtb"},{matched_schemas:[{bid_type:"serverclient",fields:{account:{mandatory:{publisherId:null}},contract:{mandatory:{supplySourceId:null}}},matched_schema:{schema_name:"ttdBidconfig",sizes:["300x50","320x50","468x60","728x90","970x90"]}}],network_code:"ttd"}],mediaTypes:[],networkZoneParameters:{},sizeMapping:{l:[[728,90],[970,90]],m:[[728,90],[970,90]],s:[[300,50],[320,50],[468,60]],xl:[[728,90],[970,90]],xs:[[300,50],[320,50]]},sizes:[[300,50],[320,50],[468,60],[728,90],[970,90]],slot:"/71161633,22340956133/ASCIIART_asciiart/sticky_footer",stickyAttributes:{allowClose:!1,allowReopen:!1,bgOpacity:0,compact:!1,hideSelector:"body > div.d-flex > div > div.workarea.p-2.px-sm-4.pb-sm-4 > footer > div:nth-child(5)",isButtonOutside:!1,isHideForever:!1,isTop:!1,scrollCreative:!1}},{activateConditionConfig:{type:"none"},attributes:{adblock:!1,comboZoneEnabled:!1,dynamic:!1,headerbidding:!1,interscroller:!1,interstitial:!0,miniscroller:!1,refresh:!1,scrollToStick:!1,sticky:!1},bids:[{bidSizes:["300x250","320x480","336x280"],bidder:"appnexus",params:{placementId:"29340299"}},{bidSizes:["300x250","320x480","336x280"],bidder:"pubmatic",params:{adSlot:"71161633/ASCIIART_asciiart/web_interstitial_",publisherId:"156762"}},{bidSizes:["300x250","320x480","336x280"],bidder:"rubicon",params:{accountId:"20884",siteId:"474126",zoneId:"2814362"}},{bidSizes:["300x250","320x480","336x280"],bidder:"triplelift",params:{inventoryCode:"Asciiart_StandardDisplay_StandardDisplay"}}],dynamicAttributes:{each:0,incrementEach:0,position:"in",repeatHeight:1e3,skip:0},gamAdUnitId:"22882377976",id:"web_interstitial_",interscrollerAttributes:{showBanner:!1,zIndex:0},matchedNetworks:[{matched_schemas:[{bid_type:"serverclient",fields:{contract:{mandatory:{cId:null,pId:null}}},matched_schema:{schema_name:"kueezrtbBidconfig",sizes:["300x250","320x480","336x280"]}}],network_code:"kueezrtb"},{matched_schemas:[{bid_type:"serverclient",fields:{account:{mandatory:{publisherId:null}},contract:{mandatory:{supplySourceId:null}}},matched_schema:{schema_name:"ttdBidconfig",sizes:["300x250","320x480","336x280"]}}],network_code:"ttd"}],mediaTypes:[],networkZoneParameters:{},sizeMapping:{l:[[300,250],[320,480],[336,280]],m:[[300,250],[320,480],[336,280]],s:[[300,250],[320,480],[336,280]],xl:[[300,250],[320,480],[336,280]],xs:[[300,250],[320,480],[336,280]]},sizes:[[300,250],[320,480],[336,280]],slot:"/71161633,22340956133/ASCIIART_asciiart/web_interstitial_",stickyAttributes:{allowClose:!1,allowReopen:!1,bgOpacity:0,compact:!1,isButtonOutside:!1,isHideForever:!1,isTop:!1,scrollCreative:!1}}],fuse_tenant:"publift",sco:{asi:"publift.com",sellerId:"01GSV2RKVVF93YZBNTTHKSEZ7S"},supported_sizes:{l:[[120,600],[160,600],[300,250],[320,480],[336,280],[468,60],[728,90],[970,90],[970,250]],m:[[120,600],[160,600],[300,250],[320,480],[336,280],[468,60],[728,90],[970,90],[970,250]],s:[[120,600],[160,600],[300,50],[300,100],[300,250],[300,600],[320,50],[320,100],[320,480],[336,280],[468,60]],xl:[[120,600],[160,600],[300,250],[320,480],[336,280],[468,60],[728,90],[970,90],[970,250]],xs:[[120,600],[160,600],[300,50],[300,100],[300,250],[300,600],[320,50],[320,100],[320,480],[336,280]]},tenantId:"DGKSPXNV53",fuse_flavour:"cf-default",fuse_uuid:"33b0b3bb-bd80-56ac-8ad2-84818d00fc9e",publication_metadata:{publication_id:13,generation_version:"4.756733.0",generation_time:"2025-06-25T04:54:27.963Z",revision:"v5"},fuse_prebid_hash:"9071b4120673144a696cbb8cdc7dfe7a"},onLoadCallback:(e,t,n,i)=>{if(screen.width>960){const e=()=>{const e=document.querySelectorAll(".content")[0],t=document.querySelectorAll('[data-fuse="22882377973"]')[0],n=document.querySelectorAll("#fuse-slot-22882377973-1")[0];t&&e&&n&&(t.style.height=e.getBoundingClientRect().height-1300+"px",n.style.position="sticky",n.style.top="60px")};let t,n=!1;document.addEventListener("scroll",(()=>{n=!1,t&&window.clearTimeout(t),t=window.setTimeout((()=>{e()}),100)}))}},in2wHook:(e,t,n,i,r,o,s)=>{!function(t,n,i,r,o,s,a){try{if(e.__iwcshook__&&e.__iwcshook__(),n&&0!==n.length&&i&&r&&o&&s&&a&&(t.googletag=t.googletag||{},t.googletag.cmd=t.googletag.cmd||[],t.googletag.cmd.push)&&!t.googletag.__yb_init){t.googletag.__yb_init=1;var c,u=function(){c=Date.now()},d=e.document.hasFocus();d&&u();try{e.addEventListener("focus",(function(){try{d=!0,u()}catch(e){}})),e.addEventListener("focusin",(function(){try{d=!0,u()}catch(e){}})),e.addEventListener("blur",(function(){try{d=e.document.hasFocus()}catch(e){}})),e.addEventListener("focusout",(function(){try{d=e.document.hasFocus()}catch(e){}}));for(var l="mousedown scroll touchstart touchend".split(" "),g=0;g<l.length;g++)e.addEventListener(l[g],u)}catch(s){}var p,f=function(e){return parseInt(100*e+1e-4)},h=function(){for(var e=["0.01~0.0~testbid#1vi8sg0,1v2sw74#e8eqyo,dsyups#1dqyry8,1dbivpc#n41r7k,moluyo#1mmls74,1m75vy8#5crqps,4xbugw#14vbrpc,14fvvgg#rjv9c0,r4fd34#1r2fabk,1qmze2o#9sl8u8,9d5clc#19b59ts,18vpdkw#io8934,i8scu8#1i6sa2o,1hrcdts#wy8lc,hiccg#10fi9kw,1002dc0#y7liio,xs5m9s#1xq5ji8,1xapn9c#ggbi0w,g0vls0#1fyvj0g,1fjfmrk#pbyi9s,owim0w#1ouij9c,1of2n0g#7kohs0,758lj4#1738irk,16nsmio#trs0e8,tcc45c#1tac1ds,1suw54w#c0hzwg,bl23nk#1bj20w0,1b3m4n4#kw505c,1kep14w,1jz94w0,kgp3wg","0.01~0.3~34uznk,2pf3eo#12nf0n4,127z4e8#x3n4zk,wo78qo#1wm75z4,1w6r9q8#fcd4hs,ewx88w#1eux5hc,1efh98g#o804qo,nsk8hs#1nqk5q8,1nb49hc#6gq48w,61a800#15za58g,15ju8zk#sntmv4,s8dqm8#1s6dnuo,1rqxrls#awjmdc,ah3q4g#1af3ncw,19znr40#js6mm8,jcqqdc#1jaqnls,1ivarcw#20wm4g,1lgpvk#11jgn40,1140qv4#zbjw1s,yw3zsw#1yu3x1c,1yeo0sg#hk9vk0,h4tzb4#1h2twjk,1gne0ao#qfwvsw,q0gzk0#1pygwsg,1pj10jk#8omvb4,896z28#1876wao,17rr01s#1ueaeww,uvqdxc,1tyuio0,ugahog#d4gdfk,cp0h6o","0.01~0.59~1cn0ef4,1c7ki68#m03dog,lknhfk#1lineo0,1l37if4#48td6o,3tdgxs#13rde68,13bxhxc#vfpkow,w481z4#1uy9log,1vms2yo#dofk74,ecy1hc#1d6zl6o,1dvi2gw#mk2kg0,n8l1q8#1m2mlfk,1mr52ps#4ssjy8,5hb18g#14bckxs,14zv280#qzw2kg,roejuo#1qig3k0,1r6yku8#98m22o,9x4jcw#18r6328,19fokcg#i492bk,isrjls#1hmt3b4,1ibbklc#cz1ts,11hj40#zvj2tc,10k1k3k#xnmbr4,yc4t1c#1x66cqo,1xuou0w#fwcb9c,gkusjk#1fewc8w,1g3etj4#orzbi8,pghssg#1oajchs,1oz1ts0#70pb0g,7p7sao#16j9c00,177rta8#t7stmo,twbaww#1sqcum8,1tevbwg#bgit4w,c51af4#1az2u4g,1bnlbeo#kc5tds,l0oao0#1jupudc,1kj8bnk#2kvsw0,39ea68#123ftvk,12ryb5s#wjny80,x86fi8#1w27z7k,1wqqghs#esdxq8,fgwf0g#1eaxyps,1ezgg00#no0xz4,ocjf9c#1n6kyyo,1nv3g8w#5wqxhc,6l9erk#15faygw,163tfr4#s3ug3k,sscxds#1rmeh34,1sawydc#ackfls,b12ww0#19v4glc,1ajmxvk#j87fuo,jwpx4w#1iqrgu8,1jf9y4g#1gxfcw,25fwn4#10zhgcg,11nzxmo#yrkpa8,1ya4q9s,zg36kg,1yyn7k0#h0aosg,hot62o#1giups0,1h7d728#pvxp1c,qkg6bk","0.01~1.17~1pehq0w,1q307b4#84nojk,8t65ts#17n7pj4,18bq6tc#ubr75s,v09og0#1tub85c,1uitpfk#ckh6o0,d8zny8#1c317nk,1crjoxs#lg46ww,m4mo74#1kyo7wg,1ln6p6o#3ou6f4,4dcnpc#137e7eo,13vwoow#vpp62o,va99ts#1v89728,1ustatc#dyf5kw,diz9c0#1dgz6kg,1d1jabk#mu25ts,mem9kw#1mcm6tc,1lx6akg#52s5c0,4nc934#14lc6bk,145wa2o#r9vny8,qufrpc#1qsfoxs,1qczsow#9ilngg,935r7k#1915og0,18lps74#ie8npc,hysrgg#1hwsoow,1hhcsg0#myn7k,7iqyo#105io74,zq2ry8#xxlx4w,xi60w0#1xg5y4g,1x0q1vk#g6bwn4,fqw0e8#1fovxmo,1f9g1ds#p1yww0,omj0n4#1okixvk,1o531mo#7aowe8,6v905c#16t8xds,16dt14w#thsf0g,t2cirk#1t0cg00,1skwjr4#bqieio,bb2i9s#1b92fi8,1atmj9c#km5erk,k6piio#1k4pfr4,1jp9ji8#2uve9s,2ffi0w#12dff9c,11xzj0g#wtnjls,we7ncw#1wc7klc,1vwrocg#f2dj40,emxmv4#1ekxk3k,1e5hnuo#ny0jcw,nikn40#1ngkkcg,1n14o3k#66qiv4,5ramm8#15pajuo,159unls#sdu1hc,rye58g#1rwe2gw,1rgy680#amk0zk,a744qo#1a541z4,19po5q8#ji718g,j2r4zk#1j0r280,1ilb5z4#1qx0qo,1bh4hs#119h1q8,10u15hc#z1kao0,ym4ef4#1yk4bnk,1y4ofeo#haaa68,guudxc#1gsub5s,1gdeeww#q5xaf4,pqhe68#1pohbeo,1p91f5s#8en9xc,7z7dog#17x7aww,17hreo0#ulqsjk,u6awao#1u4atj4,1touxa8#cugs1s,cf0vsw#1cd0t1c,1bxkwsg#lq3sao,lanw1s#1l8nta8,1kt7x1c#3ytrsw,3jdvk0#13hdssg,131xwjk#v5pzb4,vu8glc#1uoa0ao,1vcshkw#defytc,e2yg3k#1cwzzsw,1dlih34#ma2z28,mylgcg#1lsn01s,1mh5hc0#4isykg,57bfuo#141czk0,14pvgu8#1q8gi68,qpwh6o,1qwyzgg,reeygw","0.02~2.02~8ymgow,18h6hog,9n4xz4,195oyyo#hu9gxs,1hcthxc,1i1bz7k,iiry80#2zgg0,zljhfk,rhxq8,10a1yps#xdmqdc,1ww6rcw,y257nk","0.01~2.09~1xkp8n4#fmcpvk,gav75s#1f4wqv4,1ftf85c#ohzq4g,p6i7eo#1o0jr40,1op28e8#6qppmo,7f86ww#1699qm8,16xs7wg#sxt88w,tmbpj4#1sgd98g,1t4vqio#b6j7r4,bv1p1c#1ap38qo,1bdlq0w#k26800,kqopa8#1jkq8zk,1k98q9s#2aw7i8,2zeosg#11tg8hs,12hyps0#w9ocu8,wy6u4g#1vs8dts,eieccg,f6wtmo,1wgqv40","0.02~2.27~1e0ydc0,ne1clc,1epgum8,o2jtvk#1mwldkw,5mrc3k,1nl3uv4,6b9tds#155bd34,rtuups,15ttudc,sidc00#1rcevpc,1s0xczk","0.01~2.34~a2ku80,ar3bi8#19l4v7k,1a9nchs#iy7ugw,jmqbr4#1igrvgg,1j5acqo#16xtz4,1vgb9c#10phuyo,11e0c8w#yhl3wg,z63l6o#1y054w0,1yonm68#gqb3eo,hetkow#1g8v4e8,1gxdlog#ply3nk,qagkxs#1p4i4n4,1pt0lxc#7uo35s,8j6kg0#17d845c,181qlfk#u1rls0,uqa328#1tkbmrk,1u8u41s#cahla8,1bt1m9s,1chk3k0,cz02kg","0.02~2.52~1koomio,l64lj4,1ld73sw,lun2tc#3eul1c,12xem0w,43d2bk,13lx3b4#w4ok5c,vf92io","0.01~2.57~1vn8l4w,1uxt3i8#edejnk,dnz20w#1dvykn4,1d6j30g#n91jwg,mjm29s#1mrlkw0,1m2639c#5hrjeo,4sc1s0#150bke8,14aw2rk#rov20w,qzfke8#1r7f30g,1qhzlds#9xl1j4,985jwg#19g52io,18qpkw0#it81s0,i3sk5c#1ibs2rk,1hmcl4w#11y1a8,cijnk#10ki29s,zv2kn4#yclb7k,xn5tkw#1xv5c74,1x5pukg#glbaps,fvvt34#1g3vbpc,1fefu2o#pgyayo,oritc0#1oziby8,1oa2ubk#7poagw,708su8#1788bgg,16istts#twrt34,t7cbgg#1tfbu2o,1spwcg0#c5hslc,bg2ayo#1bo1tkw,1aymby8#l14su8,kbpb7k#1kjotts,1ju9c74#39uscg,2kfaps#12setc0,122zbpc#x8mxog,wj7g1s#1wr6yo0,1w1rh1c#fhcx6o,erxfk0#1ezwy68,1eahgjk#oczxfk,nnkfsw#1nvjyf4,1n64gsg#6lpwxs,5wafb4#1649xxc,15eugao#sstfk0,s3dxxc#1sbdgjk,1rlxyww#b1jf28,ac3xfk#1ak3g1s,19unyf4#jx6fb4,j7qxog","0.05~3.05~1yz3pq8,1y9o83k#8tmo00,8476dc#1cs0740,1c2kphc#vkpdds,vz89a8#1m7me4g,1mm5a0w#9dlurk,9s4qo0#100ivi8,10f1reo#owz474,pbi03k#1svcnb4,1t9vj7k#2pvlkw,34ehhc#1efxreo,1eugnb4#s8u8sg,snd4ow#1ivr9j4,1jaa5fk#h5ahhc,hjtdds#17s7i80,186qe4g#ll3zls,lzmvi8#1vd8zr4,1unti4g#57ry0w,4icge8#1965h4w,18gpzi8#y2lpts,xd6874#1opiqkg,1o038xs","0.06~4.09~bvi77k,b62pkw#12if7y8,11szqbk","0.05~4.2~o30c1s,ndkuf4#1s1dv5s,1rbydj4#1vwtfk,16hbsw","0.06~4.34~1gxu3uo,1g8em80#uqql8g,u1b3ls","0.05~4.45~1ldnlz4,1ko84cg#djfri8,dxyneo#146cs8w,14kvo5c","0.06~4.59~hz99mo,ids5j4#1x16k1s,1xfpfy8","0.05~4.7~6vpibk,7a8e80#1au31fk,1b8lxc0#weo5j4,wt71fk","0.06~4.84~1n1l69s,1ng4268#a7kmww,am3itc","0.05~4.95~10uhnnk,1190jk0#pqxwcg,q5gs8w#1tpbfgg,1u3ubcw","0.06~5.09~3judq8,3yd9mo#1dogvls,1d90zcw","0.05~5.2~rhdczk,r1xgqo#1i4adq8,1houhhc#gdtlog,fydpfk#170qmf4,16laq68#ktn3sw,ke77k0#1wjp9mo,1w49dds#6e87wg,5ysbnk#1aclr0g,19x5urk#z91zpc,ytm3gg#1pvz0g0,1pgj474#d1yh34,cmiku8#13ovhts,139flkw#mhko3k,n635ds#1qfy77k,1r4gohs#ah5hc,yzmrk#1fcefwg,1g0wx6o#t5axa8,tttekg#1js7y0w,1kgqfb4#epw1ds,feeio0#15ct24g,161bjeo#j5pji8,ju80sg#1y7mtxc,1yw5b7k#825s74,8qo9hc#1c0jbb4,1cp1slc#vn79q8,v7rdhc#1ma4agw,1luoe80#9g3r40,90nuv4#1030ruo,znkvls#ozh0jk,ok14ao#1sxujnk,1sieneo#2sdhxc,2cxlog#1eifnr4,1e2zri8#sbc54w,rvw8w0#1iy95vk,1iit9mo#h7sdts,gschkw#17upekg,17f9ibk#lnlvy8,l85zpc#1uls3y8,1vaal8g#4gb280,54tji8#18eolc0,19372m8#xb4u0w,xznbb4#1ny1urk,1omkc1s#b41beo,bsjsow#11qyc5c,12fgtfk#nbjg8w,o01xj4#1r9wzcw,1ryfgn4#14fxmo,1syeww#1g6d81s,1guvpc0#tz9pfk,uns6ps#1km6q68,1lap7gg#eawnb4,dlh5og#14xto1s,148e6f4#iqq5fk,i1answ#1xsnfuo,1x37y80#7n6e4g,6xqwhs#1bljx8g,1aw4fls#x651c0,wgpjpc","0.5~8.5~fyu7ls,gdd3i8#mwk268,m74kjk#8h569s,7rpon4#rwcr28,savmyo#c1qy2o,bmb1ts#i5i0hs,iu0hs0#3q34lc,4ellvk#z2t8u8,yndclc#ejnaio,f85rsw#pi794w,osrri8#4z1atc,5dk6ps#uhzy0w,uwitxc#assruo,a3da80#k8eyv4,kmxurk#vpaf4,g9e68#vegmio,w2z3sw#gz1qm8,hnk7wg#nwrl6o,nhboxs#6pgrgg,7dz8qo#rnm3uo,qy6m80#d877y8,cirqbk#jbyadc,jqh69s#2ym8sg,296r5s#xhdkw0,xvwgsg","1.0~21.0~qgjcw0,q13gn4#tiew3k,t2yzuo#l6r2m8,lv9jwg#wpa800,x3t3wg#mfp8u8,mu84qo#sly7ls,s6ibcw#icd8g0,hwxc74#yfpon4,z485xc#ov3oxs,p9mku8#uov5z4,tzfocg#ky0feo,kikj5s#vrklc0,vc4p34#nfwruo,o4f94w#r6raio,rla6f4#jp296o,izmrk0"],t={},n=0;n<e.length;n++)try{for(var i=e[n].split("~"),r=f(parseFloat(i[0])),o=f(parseFloat(i[1])),s=i[2].split("#"),a=0,c=0;c<s.length;c++)try{for(var u=parseInt(a*r+o),d=[],l=s[c],g=(-1!==l.indexOf(",")?d=l.split(","):d.push(l),u/100),p=0;p<d.length;p++)t[d[p]]=g;a++}catch(e){}}catch(e){}return t}(),v=function(e,t){try{for(var n=0;n<e.length;n++)if("string"==typeof e[n])for(var i=e[n].split(","),r=0;r<t.length;r++)for(var o=0;o<i.length;o++)if(i[o]===t[r])return!0}catch(e){}return!1},b=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].toLowerCase());return t},m=function(e){var t="u";try{var n,s,a=e.getTargeting(i),c=b(a);v(c,r)?t="b":v(c,o)?t="o":(n=googletag.pubads().getTargeting(i),s=b(n),v(s,r)?t="b":v(s,o)&&(t="o"))}catch(e){}return t},S=Math.random(),y=S<.5?"0":S<.75?"1":"2",I=function(e){var t=[{inclusive_min:0,exclusive_max:10,delta:.01},{inclusive_min:10,exclusive_max:20,delta:.05},{inclusive_min:20,exclusive_max:100,delta:.5},{inclusive_min:100,exclusive_max:101,delta:1}];if(e<0)return e;for(var n=f(e),i=0;i<t.length;i++){var r=f((s=t[i]).inclusive_min),o=f(s.exclusive_max),s=f(s.delta);if(r<=n&&n<o)return parseInt((n-r)/s)*s+r}return f(t[t.length-1].inclusive_min)},x=function(e){return parseFloat(e)},k=function(e){var t,n=-1;try{void 0!==e&&2===(t=e.split("x")).length&&(n=parseInt(t[0]*t[1]))}catch(e){}return n},w=function(e){try{var t,n,i,r,o,s,a,c;e.getTargeting&&e.__setTargeting&&(t=[],"o"!==(n=m(e))&&"b"!==n||(i=e.getTargeting("amznbid")[0],void 0!==(r=h[i])&&(o=e.getTargeting("amznsz")[0],t.push({bidder:"amznbid",price:[r],size:void 0!==o?"a"+o:-1,area:k(o)})),void 0!==(s=e.getTargeting("hb_pb")[0])&&(a=e.getTargeting("hb_bidder")[0]||"hb_pb_unknown",c=e.getTargeting("hb_size")[0],t.push({bidder:a,price:[x(s)],size:void 0!==c?"p"+c:-1,area:k(c)})),t.sort((function(e,t){var n,i=t.price[0]-e.price[0];return 0==i?0==(n=t.area-e.area)?t.bidder.localeCompare(e):n:i}))),function(e,t,n){for(var i=0;i<3;i++){var r="",o=(0<i&&(r=i+1),[-1]),s=["nobidder"],a=[-1];i<=t.length-1&&(o[0]=I(t[i].price[0]).toString(),s[0]=t[i].bidder,a[0]=t[i].size),"o"===n&&(o.push("o_"+o[0]),o.push("o_"+o[0]+"_"+y),s.push("o_"+s[0]),a.push("o_"+a[0])),e.__setTargeting("in2w_upa_price"+r,o),e.__setTargeting("in2w_upa_bidder"+r,s),0===i&&e.__setTargeting("in2w_upa_size"+r,a)}}(e,t,n))}catch(e){}},_=-8,E=s,C=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],T={"1_0010":"01","1_0011":"02","1_0020":"03","1_0021":"04","1_0110":"05","1_0111":"06","1_0120":"07","1_0121":"08","1_0310":"09","1_0311":"0a","1_0320":"0b","1_0321":"0c","1_0610":"0d","1_0611":"0e","1_0620":"0f","1_0621":"0g","1_0810":"0h","1_0811":"0i","1_0820":"0j","1_0821":"0k","2_0000":"19","2_0001":"1a","2_0002":"1b","2_000z":"1c","2_0030":"1d","2_0031":"1e","2_0032":"1f","2_003z":"1g","2_0100":"1h","2_0101":"1i","2_0102":"1j","2_010z":"1k","2_0130":"1l","2_0131":"1m","2_0132":"1n","2_013z":"1o","2_0300":"1p","2_0301":"1q","2_0302":"1r","2_030z":"1s","2_0330":"1t","2_0331":"1u","2_0332":"1v","2_033z":"1w","2_0600":"1x","2_0601":"1y","2_0602":"1z","2_060z":"20","2_0630":"21","2_0631":"22","2_0632":"23","2_063z":"24","2_0800":"25","2_0801":"26","2_0802":"27","2_080z":"28","2_0830":"29","2_0831":"2a","2_0832":"2b","2_083z":"2c","1_0z10":"3l","1_0z11":"3m","1_0z20":"3n","1_0z21":"3o","2_0z00":"3x","2_0z01":"3y","2_0z02":"3z","2_0z0z":"40","2_0z30":"41","2_0z31":"42","2_0z32":"43","2_0z3z":"44"},A={gpt:0,amp:1,video:2,mobile:3,gpt_lite:4,adx_tag:5},P={out_of_page:0,anchor:1,app_open:2,banner:3,instream_audio:4,instream_video:5,interstitial:6,native_advance:7,rewarded:8,others:35},R={desktop:0,smartphone:1,tablet:2,connecttv:3,others:35},B={ios:0,android:1,macos:2,windows:3,others:35},O={chrome:0,safari:1,edge:2,others:35},z={},D={childDirectedTreatment:1,underAgeOfConsent:8,nonPersonalizedAds:64,limitedAds:256,restrictDataProcessing:1024},M={},N=function(){var t=e.navigator;return(t=t&&t.userAgent)||""},L=function(){var t=e.navigator;return(t=t&&t.userAgentData)||null},j=function(e){return W(e,"Win")?"windows":W(e,"like Mac")?"ios":W(e,"Mac")?"macos":W(e,"Android")?"android":"others"},F=function(e){return G(e)?"tablet":U(e)?"smartphone":q(e)?"connecttv":"desktop"},U=function(e){return W(e,"iPod")||W(e,"iPhone")||W(e,"Android")||W(e,"IEMobile")},G=function(e){return W(e,"iPad")||W(e,"Tablet")||W(e,"Android")&&!W(e,"Mobile")||W(e,"Silk")},q=function(e){return W(e,"Roku")||W(e,"SMART-TV")||W(e,"SmartTV")||W(e,"NetCast")||W(e,"crkey")},V=function(e,t){return(t=H(t))||(W(e,"OPR/")||W(e,"Opera")?"others":W(e,"Edg")?"edge":W(e,"Firefox")?"others":W(e,"Chrome")?"chrome":W(e,"Safari")||W(e,"iPad")||W(e,"iPhone")||W(e,"iphone")?"safari":"others")},H=function(e){if(e&&e.brands){if(Z(e.brands,"Opera"))return"opera";if(Z(e.brands,"Microsoft Edge"))return"edge";if(Z(e.brands,"Chrome"))return"chrome"}return null},W=function(e,t){return-1!==e.indexOf(t)},Z=function(e,t){return e.some((function(e){return e.brand===t}))},Y=function(e,t){if(e)return["0"];for(var n=Math.floor(1e3*Math.random()+1),i=[],r=0,o=0;o<t.length;++o){for(var s=1,a=t[o],c=0,u=0;u<a.length;u++)if(n<=(c+=a[u])){s=u+1;break}1<s&&0<r&&(s=s+r-1),r+=t[o].length;var d=C[s];for(u=0;u<i.length;++u)if(i[u]===d){u=-1;break}-1!==u&&i.push(d)}for(u=0;u<i.length;++u)"1"===i[u]&&(i[u]=Math.random()<=.38?"x":i[u]);return i},J=null,Q=null,K=function(e){e=(new Date).getTime()+36e5*e;var t=parseInt(e/36e5,10)%24;return[[1,0],[3,24],[6,32]].map((function(e){return C[Math.floor(t/e[0])+e[1]]}))},X=function(){var e,t,n;return p||(n=function(){var e=N(),t=L();return{os:j(e),dc:F(e),browser:V(e,t)}}(),e=void 0!==O[n.browser]?O[n.browser]:O.others,t=void 0!==B[n.os]?B[n.os]:B.others,n=void 0!==R[n.dc]?R[n.dc]:R.others,p={dc:C[n],os:C[t],browser:C[e]}),p},$=function(e,t){if(void 0===(e=A[e]))throw new Error;return t=void 0!==P[t="top_anchor"!==t&&"bottom_anchor"!==t?t:"anchor"]?P[t]:P.others,{rt:C[e],ivf:C[t]}},ee=function(t){var n;return z[t]||(n=function(){var t=e.navigator;return(t=t&&t.language)||""}(),z[t]=re(n,t)),z[t]},te=function(e){try{if(!e.length)return"0";for(var t=305419896,n=0;n<e.length;++n)t^=(t<<5)+(t>>2)+e.charCodeAt(n)&4294967295;return(t<0?4294967296+t:t)+""}catch(e){return"-1"}},ne=function(e,t){try{var n=t?(e+"").toLowerCase():e+"";return n.length+"_"+te(n)}catch(e){return"-1"}},ie=function(e){var t;try{t=""===e||null==e?"-2":ne(e,!0)}catch(e){t="-1"}return t},re=function(e,t){var n,i,r,o,s,a=[];try{""===e||null==e?a=["-2"]:(i=(n=e.split("-"))[0],r=ne(i,!0),a.push(r),1<n.length&&(o=n[0]+"-"+n[1],s=ne(o,!0),a.push(s)))}catch(e){a=["-1"]}if(!t)for(var c=a.length,u=0;u<c;++u)a.push("o_"+a[u]);return a},oe=function(t,n){var i=["u"];try{if(""===t||null==t)throw i=["u1"],new Error("u1");var r=e.document.getElementById(t);if(null==r)throw i=["u2"],new Error("u2");var o=e.innerHeight;if(void 0===o||o<=0)throw i=["u3"],new Error("u3");var s,a,c=r.getBoundingClientRect(),u=void 0!==c.y?c.y:c.top;if(void 0===u)throw i=["u4"],new Error("u4");i=u<0?["a","a"+(s=(s=parseInt(u/o,10)-1)<-2?-2:s)]:u<o?["i","i"+(parseInt(u/(o/3),10)+1)]:["b","b"+(a=9<(a=parseInt((u-o)/o,10)+1)?9:a),"bg"+Math.ceil(a/3)]}catch(t){}if(!n)for(var d=i.length,l=0;l<d;++l)i.push("o_"+i[l]);return i},se=function(e){var t=[];try{var n,i=0;for(n in D)!!(2751&D[n])&&t.push(D[n].toString(36)),i+=D[n];t.push(i.toString(36))}catch(e){t=["-1"]}if(!e)for(var r=t.length,o=0;o<r;++o)t.push("o_"+t[o]);return t},ae=function(e){try{return M[e]||(M[e]=se(e)),M[e]}catch(e){return["-1"]}},ce=function(e,t){return(t-=(e+="").length)<=0?e:function(e,t){for(var n="",i=0;i<t;i++)n+=e;return n}("0",t)+e},ue=function(e){try{var t=1+parseInt(20*Math.random(),10),n=[ce(t,2)];if(!e)for(var i=n.length,r=0;r<i;++r)n.push("o_"+n[r]);return n}catch(e){return["-1"]}},de=function(e,t){var n=[];try{var i=(new Date).getTime()+36e5*e,r=parseInt(i/36e5,10)%24,o=Math.floor(r);n.push(ce(o,2))}catch(e){n=["-1"]}if(!t)for(var s=n.length,a=0;a<s;++a)n.push("o_"+n[a]);return n},le=function(t){var n=[];try{var i,r=d?"1":"0",o=(i=null==c?"0":(Date.now()-c)/1e3<=3?"1":"2","visible"===e.document.visibilityState?"1":"0");n.push(r+i+o)}catch(t){n=["-1"]}if(!t)for(var s=n.length,a=0;a<s;++a)n.push("o_"+n[a]);return n},ge=function(e,t,n,i,r,o,s,a){try{if("u"===n)return[{key:"in2w_key16",values:[]},{key:"in2w_key20",values:[]},{key:"in2w_key21",values:null},{key:"in2w_key23",values:null},{key:"in2w_key26",values:[]},{key:"in2w_key27",values:[]},{key:"in2w_key28",values:[]},{key:"in2w_key30",values:[]},{key:"in2w_key31",values:[]},{key:"in2w_key33",values:[]},{key:"in2w_key34",values:null},{key:"in2w_key35",values:null},{key:"in2w_upa_bidder",values:[]},{key:"in2w_upa_price",values:[]},{key:"in2w_upa_size",values:[]},{key:"in2w_upa_bidder2",values:[]},{key:"in2w_upa_price2",values:[]},{key:"in2w_upa_bidder3",values:[]},{key:"in2w_upa_price3",values:[]}];for(var c=$(i,r),u=X(),d=c.rt,l=c.ivf,g=u.dc,p=u.os,f=u.browser,h="b"===n,v=Y(h,t),b=function(e,t){return e?["0"]:((null===J||null===Q||36e5<Date.now()-Q)&&(J=Y(!1,t),Q=Date.now()),J)}(h,t),m=function(e,t,n,i,r,o,s,a){for(var c=[],u=("0"===n||"3"===n?(r=T["2_"+e+t+n+r])&&c.push(r):(r=T["1_"+e+t+n+i])&&c.push(r),[]),d=[],l=0;l<c.length;l++){var g=c[l];for(u.push("-"+g),l=0;l<o.length;++l){var p=g+o[l];u.push(p);for(var f=0;f<a.length;f++){var h=a[f];d.push(p+h)}}for(l=0;l<s.length;++l)for(p="_"+g+s[l],u.push(p),f=0;f<a.length;f++)h=a[f],d.push(p+h)}return{short:u,full:d}}(d,l,g,p,f,v,b,K(e)),S=(h&&(m.short=[]),[]),y=(o&&o.length&&S.push(function(e){for(var t,n,i=e,r=(("fluid"===e||"number"==typeof i[0]&&"number"==typeof i[1])&&(i=[e]),[]),o=1e5,s=1,a=1e5,c=1,u=0;u<i.length;u++)"fluid"===i[u]?r.push(i[u]):((t=i[u][0])<o&&(o=t),s<t&&(s=t),(n=i[u][1])<a&&(a=n),c<n&&(c=n),r.push(t+"x"+n));return r.sort((function(e,t){return e<t?-1:1})),e=r.length,r.push(o),r.push(s),r.push(a),r.push(c),r.push(e),te(r.join(","))}(o)),[{key:"in2w_key16",values:m.short},{key:"in2w_key20",values:m.full},{key:"in2w_key21",values:S}]),I=["in2w_key23","in2w_key26","in2w_key27","in2w_key28","in2w_key30","in2w_key31","in2w_key33","in2w_key34","in2w_key35"],x=0;x<I.length;x++)try{switch(I[x]){case"in2w_key23":y.push({key:I[x],values:ie(s)});break;case"in2w_key26":y.push({key:I[x],values:ee(h)});break;case"in2w_key27":y.push({key:I[x],values:oe(a,h)});break;case"in2w_key28":y.push({key:I[x],values:ae(h)});break;case"in2w_key30":y.push({key:I[x],values:ue(h)});break;case"in2w_key31":y.push({key:I[x],values:de(e,h)});break;case"in2w_key33":y.push({key:I[x],values:le(h)});break;case"in2w_key34":y.push({key:I[x],values:"w38"});break;case"in2w_key35":y.push({key:I[x],values:"y2eh"})}}catch(e){}return y}catch(e){return[{key:"in2w_key20",values:["4p10","4p1o","4p1w"]}]}},pe=function(t){try{if(t.__should_skip_labeling)t.__should_skip_labeling=!1;else{var n,i=m(t),r="banner";if(t.__is_oop)r=googletag.enums.OutOfPageFormat[t.__oop_format]?googletag.enums.OutOfPageFormat[t.__oop_format].toLowerCase():"out_of_page";else try{if(t.__sz_mapping)for(var o=Math.round(e.innerWidth),s=Math.round(e.innerHeight),a=0;a<t.__sz_mapping.length;a++){var c=t.__sz_mapping[a][0];if(c[0]<=o&&c[1]<=s){n=t.__sz_mapping[a][1];break}}else t.__def_sizes&&(n=t.__def_sizes)}catch(t){}var u=ge(_,E,i,"gpt",r,n,t.getAdUnitPath(),t.getSlotElementId());for(a=0;a<u.length;a++)t.__setTargeting(u[a].key,u[a].values)}}catch(t){}},fe=function(){try{var e=new Date,i=new Date(e.toLocaleString("en-US",{timeZone:"UTC"})),r=new Date(e.toLocaleString("en-US",{timeZone:a}));_=(r.getTime()-i.getTime())/36e5}catch(e){_=-8}var o=["slotRequested","slotResponseReceived","slotRenderEnded","slotOnload","impressionViewable","slotVisibilityChanged"],s=o.slice(1),c=t.googletag.pubads(),u=(c.__product_version=3,c.__pkgv="38",c.__build_id="y2eh",c.__hook_version=8,t.googletag.__display=t.googletag.display,t.googletag.display=function(e){for(var n=[],i=0;i<arguments.length;i++)n.push(arguments[i]);try{var r=this.pubads().getSlots();for(i=0;i<r.length;i++){var o=r[i];w(o)}}catch(e){}return t.googletag.__display.apply(c,n)}.bind(t.googletag),c.__refresh=c.refresh,c.refresh=function(e){for(var t=[],n=0;n<arguments.length;n++)t.push(arguments[n]);try{for(e=e||this.getSlots(),n=0;n<e.length;n++){var i,r=e[n],o=(w(r),i=s=d=u=a=void 0,r);try{var s,a=null,u=null,d=m(o);"o"!==d&&"b"!==d||(0<(s=o.__refreshCount||0)&&(u="1"),a=d+((i=s)<11?i:i<26?"10-":i<51?"25-":i<101?"50-":"100-")),o.setTargeting("in2w_key15",a),o.__setTargeting("in2w_key22",u)}catch(e){}}}catch(e){}c.__refresh.apply(c,t)}.bind(c),c.__setPrivacySettings=c.setPrivacySettings,c.setPrivacySettings=function(e){for(var t=[],n=0;n<arguments.length;n++)t.push(arguments[n]);try{void 0!==e.childDirectedTreatment&&(null===e.childDirectedTreatment?D.childDirectedTreatment=1:e.childDirectedTreatment?D.childDirectedTreatment=4:D.childDirectedTreatment=2),void 0!==e.underAgeOfConsent&&(null===e.underAgeOfConsent?D.underAgeOfConsent=8:e.underAgeOfConsent?D.underAgeOfConsent=32:D.underAgeOfConsent=16),void 0!==e.nonPersonalizedAds&&(e.nonPersonalizedAds?D.nonPersonalizedAds=128:D.nonPersonalizedAds=64),void 0!==e.limitedAds&&(e.limitedAds?D.limitedAds=512:D.limitedAds=256),void 0!==e.restrictDataProcessing&&(e.restrictDataProcessing?D.restrictDataProcessing=2048:D.restrictDataProcessing=1024),M[!0]=se(!0),M[!1]=se(!1)}catch(e){}return c.__setPrivacySettings.apply(c,t)}.bind(c),c.__setTargeting=c.setTargeting,c.__clearTargeting=c.clearTargeting,t.googletag.__defineOutOfPageSlot=t.googletag.defineOutOfPageSlot,t.googletag.__defineSlot=t.googletag.defineSlot,c.setTargeting=function(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);var n=c.__setTargeting.apply(c,e);try{var i=this.getSlots();for(t=0;t<i.length;t++){var r=i[t];pe(r)}}catch(e){}return n}.bind(c),c.clearTargeting=function(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);var n=c.__clearTargeting.apply(c,e);try{var i=this.getSlots();for(t=0;t<i.length;t++){var r=i[t];pe(r)}}catch(e){}return n}.bind(c),function(e){e.__setTargeting=e.setTargeting,e.setTargeting=function(){for(var t=[],n=0;n<arguments.length;n++)t.push(arguments[n]);var i=e.__setTargeting.apply(e,t);return pe(e),i}.bind(e)}),d=function(e){e.__clearTargeting=e.clearTargeting,e.clearTargeting=function(){for(var t=[],n=0;n<arguments.length;n++)t.push(arguments[n]);var i=e.__clearTargeting.apply(e,t);return pe(e),i}.bind(e)},l=function(e){e.__updateTargetingFromMap=e.updateTargetingFromMap,e.updateTargetingFromMap=function(){try{for(var t=[],n=0;n<arguments.length;n++)t.push(arguments[n]);e.__updateTargetingFromMap.apply(e,t),w(e)}catch(t){}return e}.bind(e)};t.googletag.defineOutOfPageSlot=function(){for(var e=[],n=0;n<arguments.length;n++)e.push(arguments[n]);var i=t.googletag.__defineOutOfPageSlot.apply(t.googletag,e);return i&&(i.__is_oop=!0,i.__oop_format=e[1],u(i),d(i),l(i),pe(i)),i}.bind(t.googletag),t.googletag.defineSlot=function(){for(var e=[],n=0;n<arguments.length;n++)e.push(arguments[n]);var i=t.googletag.__defineSlot.apply(t.googletag,e);return i&&(i.__is_oop=!1,i.__def_sizes=arguments[1],u(i),d(i),l(i),i.__defineSizeMapping=i.defineSizeMapping,i.defineSizeMapping=function(e){for(var t=[],n=0;n<arguments.length;n++)t.push(arguments[n]);var r=i.__defineSizeMapping.apply(i,t);return i.__sz_mapping=e,pe(i),r}.bind(i),pe(i)),i}.bind(t.googletag);try{for(var g=c.getSlots(),p=0;p<g.length;p++)try{var f=g[p];void 0!==f.__setTargeting||f.getOutOfPage()||(f.__is_oop=!1,u(f),d(f),pe(f))}catch(e){}}catch(e){}c.__reportEvents=function(e,t){if(c.__eventProxy&&c.__eventProxy[e])for(var n=0;n<c.__eventProxy[e].length;n++)try{c.__eventProxy[e][n](t)}catch(e){}},c.__addEventListener=c.addEventListener,c.addEventListener=function(e,t){if(-1!==o.indexOf(e))try{return this.__eventProxy=this.__eventProxy||{},this.__eventProxy[e]?(-1===this.__eventProxy[e].indexOf(t)&&this.__eventProxy[e].push(t),c):(this.__eventProxy[e]=[t],c.__addEventListener(e,(function(t){var i=t.slot;if(i.__skipEvent&&i.__skipEvent[e]&&(new Date).getTime()-i.__skipEvent[e]<3e3)delete i.__skipEvent[e];else if(-1===s.indexOf(e)||!function(e){return(e=e.__getResponseInformation?e.__getResponseInformation():e.getResponseInformation())&&e.advertiserId&&-1!==n.indexOf(e.advertiserId)}(i))for(var r=0;r<c.__eventProxy[e].length;r++)try{c.__eventProxy[e][r](t)}catch(t){}})))}catch(t){}return c.__addEventListener(e,t)}.bind(c),c.__removeEventListener=c.removeEventListener,c.removeEventListener=function(e,t){try{var n=this.__eventProxy;if(n&&n[e])return-1!==n[e].indexOf(t)&&(n[e].splice(n[e].indexOf(t),1),!0)}catch(e){}return c.__removeEventListener(e,t)}.bind(c),c.addEventListener("slotRequested",(function(e){delete(e=e.slot).__responseInfo,e.__refreshCount=e.__refreshCount||0,++e.__refreshCount}))};t.googletag.cmd.unshift?(t.googletag.cmd.unshift(fe),t.googletag.cmd.unshift=function(e){t.googletag.cmd.splice(1,0,e)}):t.googletag.cmd.push(fe)}}catch(s){}}(e,t,n,i,r,o,s)},admiralScript:()=>{!function(e,t){e[t]=e[t]||function e(){(e.q=e.q||[]).push(arguments)},e[t].v=e[t].v||2,e[t].s="3",function(e,t,n,i){function r(n,i){try{r=e.localStorage,(n=JSON.parse(r.getItem("_aQS02NjdFQ0NBREE5N0Q1OTM1NkJCRDgyRDYtMjQ0")).lgk||[])&&(i=e[t].pubads())&&n.forEach((function(e){e&&e[0]&&i.setTargeting(e[0],e[1]||"")}))}catch(e){}var r}try{(i=e[t]=e[t]||{}).cmd=i.cmd||[],typeof i.pubads===n?r():typeof i.cmd.unshift===n?i.cmd.unshift(r):i.cmd.push(r)}catch(e){}}(window,"googletag","function")}(window,decodeURI(decodeURI("%2561%25%36%34mi%72%61%6c"))),function(e,t,n){n=e.createElement(t),e=e.getElementsByTagName(t)[0],n.async=1,n.src="https://spellknight.com/build/829830077ee8f666007f0fc2e5c90c5c4f468fb55ce5caeb.bundle.js",0&&0(n),e.parentNode.insertBefore(n,e)}(document,"script")},geo:{country:"DE",state:"BY",code:"EU-GDPR"}};function t(e,t){e&&t()}function n(e,t,n,i){e&&e>0?(n.info("[DELAY]: Delaying by ".concat(e,"ms to ").concat(t)),setTimeout(i,e)):i()}Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,t){if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),i=n.length>>>0;if(0===i)return!1;for(var r,o,s=0|t,a=Math.max(0<=s?s:i-Math.abs(s),0);a<i;){if((r=n[a])===(o=e)||"number"==typeof r&&"number"==typeof o&&isNaN(r)&&isNaN(o))return!0;a++}return!1}}),"undefined"!=typeof window&&window.NodeList&&!window.NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),Array.prototype.flat||Object.defineProperty(Array.prototype,"flat",{configurable:!0,value:function e(){var t=isNaN(arguments[0])?1:Number(arguments[0]);return t?Array.prototype.reduce.call(this,(function(n,i){return Array.isArray(i)?n.push.apply(n,e.call(i,t-1)):n.push(i),n}),[]):Array.prototype.slice.call(this)},writable:!0}),Array.prototype.flatMap||Object.defineProperty(Array.prototype,"flatMap",{configurable:!0,value:function(e){return Array.prototype.map.apply(this,arguments).flat()},writable:!0});var i=function(e,t,n){var i;e.logger.debug("[INIT]: Downloading library ".concat(t.name));var r=e.window.document.createElement("script");if(r.async=!0,r.type="text/javascript",t.id&&(r.id=t.id),t.attributes&&Object.keys(t.attributes).forEach((function(e){r.setAttribute(e,t.attributes[e])})),"function"==typeof n&&(r.readyState?r.onreadystatechange=function(){"loaded"!==r.readyState&&"complete"!==r.readyState||(r.onreadystatechange=null,n())}:r.onload=function(){n()}),r.src="https:".concat(t.url).concat(t.file),t.query&&(r.src="".concat(r.src,"?").concat(t.query)),t.insertSelector){var o=e.window.document.querySelector(t.insertSelector);o?o.appendChild(r):e.logger.warn("[INIT]: Injection library ".concat(t.name,". Element with selector ").concat(t.insertSelector," not found"))}else{var s=e.window.document.getElementsByTagName("script")[0];null===(i=s.parentNode)||void 0===i||i.insertBefore(r,s)}};function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function o(e,t,n){return t=l(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,p()?Reflect.construct(t,n||[],l(e).constructor):t.apply(e,n))}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,b(i.key),i)}}function c(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e,t,n){return(t=b(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(){return d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var i=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}},d.apply(null,arguments)}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}function p(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(p=function(){return!!e})()}function f(e,t){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},f(e,t)}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,o,s,a=[],c=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t);else for(;!(c=(i=o.call(n)).done)&&(a.push(i.value),a.length!==t);c=!0);}catch(e){u=!0,r=e}finally{try{if(!c&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw r}}return a}}(e,t)||S(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||S(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function S(e,t){if(e){if("string"==typeof e)return r(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function y(e){return"number"==typeof e&&e==e}function I(e){return null==e}function x(e){return void 0===e}function k(e){return!I(e)}function w(e){return Array.isArray(e)&&e.length>0}function _(e){throw new Error("exhaustiveCheck(".concat(e,") should not have been called"))}function E(e){if(e>=1e4)return"over_9999";var t=e<4e3?500:1e3,n=Math.floor(e/t)*t;return"".concat(n,"-").concat(n+t-1)}var C=function(e){return e<50?e.toString():e<76?"50-75":e<101?"76-100":e<151?"101-150":e<201?"151-200":e<301?"201-300":e<401?"301-400":e<501?"401-500":"over_500"};function T(e){return{_tag:"loading",loadStart:e,deferredLoad:arguments.length>1&&void 0!==arguments[1]&&arguments[1]}}function A(e,t,n){return{_tag:"ready",loadStart:e.loadStart,loadFinish:t,loadElapsed:t-e.loadStart,deferredLoad:e.deferredLoad,output:n}}var P=["yandex","gpt","prebid","cmp","uam","docReadyScan","pubstack","pubxai"];function R(e){return"disabled"==e._tag||"ready"===e._tag&&e.output.allowPersonalisation}function B(e){return"ready"==e._tag?e.output.jurisdiction:"unknown"}function O(e){switch(e._tag){case"ready":return E(e.loadFinish);case"deferred":case"disabled":return"disabled";case"cancelled":return"cancelled";case"pending":case"loading":return"not_ready";default:_(e)}}var z,D="39173a60-ed1c-4b18-bff0-7e139e6b7d26",M=function(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5?arguments[5]:void 0;n.setStateStatus("pubxai_load_start");var a=T(n.getElapsedTime());if(r.updateState("pubxai",a),o){t.fusePbjs=t.fusePbjs||{};var c=t.fusePbjs;c.que=c.que||[];var u="https://floor.pbxai.com/?pubxId=".concat(D,"&page=").concat(t.location.href);if(!c.version){var d=t.document.createElement("link");d.rel="preload",d.href=u,d.as="fetch",d.crossOrigin="",document.head.appendChild(d)}var l=null;try{var g=t.localStorage.getItem("pubx:defaults");l=g?JSON.parse(g).data:null}catch(t){e.log("[PUBXAI]: Pubx: Error parsing defaults ".concat(JSON.stringify(t))),l=null}c.que.push((function(){c.setConfig({floors:{enforcement:{floorDeals:!0},auctionDelay:100,endpoint:{url:u},data:l}})}))}i({logger:e,window:t},function(e,t){return{name:"Pubxai",url:"//cdn.pbxai.com/",file:"".concat(t,".js?pbxd=").concat(encodeURIComponent(e.location.origin))}}(t,o?D:"e81e688b-e119-4bf8-af5e-9c6af50622c1"),(function(){e.log("[PUBXAI]: Script loaded"),n.setStateStatus("pubxai_load_finish"),r.updateState("pubxai",A(a,n.getElapsedTime(),{})),s&&s()}))};var N,L={enable:function(e){var t=e.getId5PartnerId();!z&&e.isId5Enabled()&&t&&(z=function(e){return{configPrebid:function(t){var n=t.userSync;return Object.assign(Object.assign({},t),{userSync:Object.assign(Object.assign({},n),{userIds:[].concat(v(n.userIds||[]),[{name:"id5Id",params:{partner:e,externalModuleUrl:"https://cdn.id5-sync.com/api/1.0/id5PrebidModule.js"},storage:{type:"html5",name:"id5id",expires:90,refreshInSeconds:7200}}])})})}}}(t))},getId5Module:function(){return z}};var j,F,U,G={enable:function(e,t){N||(N=function(e,t){return{setup:function(){var n,i=document.createElement("script");i.async=!0,i.defer=!0,i.src="https://launchpad-wrapper.privacymanager.io/".concat(t.userIdentityGlobal||"47eddec1-62a9-4081-b655-0c9fa5eb8a0d","/launchpad-liveramp.js");var r=e.document.getElementsByTagName("script")[0];null===(n=null==r?void 0:r.parentNode)||void 0===n||n.insertBefore(i,r)},configPrebid:function(e){var n=e.userSync;return Object.assign(Object.assign({},e),{userSync:Object.assign(Object.assign({},n),{userIds:[].concat(v(n.userIds||[]),[{name:"identityLink",params:{pid:t.placementId},storage:{type:"cookie",name:"idl_env",expires:7,refreshInSeconds:1800,notUse3P:!1}}]),syncDelay:3e3})})}}}(e,t.getFuseSettings().identity),N.setup())},getIdentityModule:function(){return N}};!function(e){e.Desktop="desktop",e.Tablet="tablet",e.Mobile="mobile"}(j||(j={})),function(e){e.Chrome="chrome",e.Safari="safari",e.Opera="opera",e.Edge="edge",e.IE11="ie11",e.Firefox="firefox",e.Other="other"}(F||(F={})),function(e){e.IOS="ios",e.MacOS="mac",e.Android="android",e.Windows="windows",e.Linux="linux",e.ChromeOs="chromeos",e.Other="other"}(U||(U={}));var q=[{regex:/\sedg\//i,browser:F.Edge},{regex:/edg([ea]|ios)/i,browser:F.Edge},{regex:/opera/i,browser:F.Opera},{regex:/opr\/|opios/i,browser:F.Opera},{regex:/chrome|crios|crmo/i,browser:F.Chrome},{regex:/firefox|iceweasel|fxios/i,browser:F.Firefox},{regex:/safari|applewebkit/i,browser:F.Safari}],V=[{regex:/huawei/i,device:j.Mobile},{regex:/nexus\s*(?:7|8|9|10).*/i,device:j.Tablet},{regex:/ipad/i,device:j.Tablet},{regex:/tablet(?! pc)/i,device:j.Tablet},{regex:/(ipod|iphone)/i,device:j.Mobile},{regex:/nexus\s*[0-6].*/i,device:j.Mobile},{regex:/[^-]mobi/i,device:j.Mobile}],H=[{os:U.MacOS,regex:/macintosh/i},{os:U.IOS,regex:/(ipod|iphone|ipad)/i},{os:U.Android,regex:/android/i},{os:U.Windows,regex:/windows /i},{os:U.Linux,regex:/linux/i},{os:U.ChromeOs,regex:/CrOS/}];function W(e){var t=e.navigator.userAgent,n=function(e,t){var n,i=V.filter((function(t){return t.regex.test(e)}));return i.length>0?i[0].device:(null===(n=t.navigator.userAgentData)||void 0===n?void 0:n.mobile)?j.Mobile:j.Desktop}(t,e),i=function(e){var t=q.filter((function(t){return t.regex.test(e)}));return t.length>0?t[0].browser:F.Other}(t),r=function(e){var t=H.filter((function(t){return t.regex.test(e)}));return t.length>0?t[0].os:U.Other}(t);return{getDevice:function(){return n},getBrowser:function(){return i},getOperatingSystem:function(){return r}}}var Z=function(e,t,n,i){e.debug("".concat(i,"[EVENT][").concat(n.slot.getSlotElementId(),"]: ").concat(t," event details: ").concat(JSON.stringify(n)))},Y=[5068036699,5101751880,5104488413,5144578315,5189144814,5221077018,5266853499,5360458305,5427000173,5478360641,5478568069,5553332325,5564006844,5602131285,5640602832,5640602859,5649638833,5699612790,5737855598,5748438433,5125288044,5809074645],J=function(e){var t=e.slot.getResponseInformation();return Boolean((null==t?void 0:t.advertiserId)&&Y.includes(t.advertiserId))},Q={name:"Google Publisher Tag",url:"//securepubads.g.doubleclick.net/tag/js/",file:"gpt.js"};function K(e){return"function"==typeof e.getVersion?"v".concat(e.getVersion()):"unknown version"}function X(e,t){return e.googletag?e.googletag.cmd||(t.info("[GPT]: Initialised window.googletag.cmd as it was missing"),e.googletag.cmd=[]):e.googletag={cmd:[]},e.googletag}function $(e,t,n,i,r,o,s,a,c,u){var d=!1,l=!1;function g(){return u.unsafeGoogletag()}function p(e){return u.pushToGPTQue((function(t,n){return e(w,t,n)}))}function f(e){return i.debug("[GPT]: googletag.display(".concat(e,")")),g().display(e)}function v(e,t){return i.debug("[GPT]: Setting page targeting for [key: ".concat(e,", value: ").concat(t,"]")),g().pubads().clearTargeting(e).setTargeting(e,t)}function b(e,t){p((function(){return x(e,t)}))}function m(){var a;i.debug("[GPT]: Applying page targeting"),v("fuse_site",(a=o.host).substring(a.length-40,a.length)),v("fuse_path",function(e){var t=e.pathname;return t.substring(t.length-40,t.length)}(o)),v("fuse_query",function(e){var t=e.search;return t.substring(t.length-40,t.length)}(o)),v("fuse_category",function(e){for(var t=[],n=e.pathname.split("/"),i=0;i<n.length;i+=1)n[i].length&&-1===n[i].indexOf(".")&&t.push(n[i]);return t}(o));var c=s.getFuseIndustry();c&&v(s.isFuseIndustryEnabled()?"fuse_industry_2":"fuse_industry",c),v("testmode","".concat(s.isTestCreatives()));var u=s.getInskinWidth();v("inskin_yes","".concat(k(u)&&r.screen.width>=u)),v("fuse_uuid",s.getFuseUUID()),v("fuse_publication_id",s.getPublicationId().toString()),v("fuse_flavour",s.getFlavour()),v("fuse_cdn",s.getFuseCDNPlatform()),v("fuse_revision",s.getTagRevision());var l=s.getFuseGeo();l&&(v("fuse_geo_country",l.country),v("fuse_geo_state",l.state),v("fuse_geo_code",l.code));var g=function(e,t){v(e,d?"refresh":t)},p=function(e,t){t&&g(e,E(t))};g("GPT_READY_MS",O(t.state.gpt)),g("PREBID_READY_MS",O(t.state.prebid)),g("UAM_READY_MS",O(t.state.uam)),g("CMP_DETERMINED_MS",O(t.state.cmp)),g("CMP_GDPR_CACHED",String(e.cmpGdprCached)),g("CMP_USP_CACHED",String(e.cmpUspCached)),p("FUSE_LOADED_MS",e.tagLoadedMs),e.firstGptRequestMs&&p("GPT_AUCTION_START_MS",e.firstGptRequestMs),e.cmpLoadFinishMs&&p("CMP_LOAD_FINISH_MS",e.cmpLoadFinishMs),e.cmpGdprElapsedMs&&p("CMP_GDPR_ELAPSED_MS",e.cmpGdprElapsedMs),e.firstZoneMs&&p("FIRST_ZONE_MS",e.firstZoneMs),e.hbAuctionStartMs&&p("HB_AUCTION_START_MS",e.hbAuctionStartMs),v("CMP_JURISDICTION",B(t.state.cmp)),v("CMP_ALLOW_PERSONAL","".concat(R(t.state.cmp)));var f=function(e){if("ready"==e._tag&&e.output.noCmpTestResult)return"gdpr"===e.output.noCmpTestResult||"ccpa"===e.output.noCmpTestResult?e.output.noCmpTestResult:"false"}(t.state.cmp);f&&v("nocmp_mismatch",f);var h=s.getYieldExperimentsTargeting();Object.keys(h).forEach((function(e){v(e,h[e])}));var b=s.getAdditionalYieldExperimentsTargeting();if(Object.keys(b).forEach((function(e){v(e,b[e])})),n.getBrowser()===F.Chrome){var m=r.navigator.cookieDeprecationLabel;m?m.getValue().then((function(e){v("chrome_label",e)})).catch((function(e){i.error("[GPT]: Error getting chrome label: ".concat(e))})):v("chrome_label","standard")}}function S(e){return i.debug("[GPT]: googletag.pubads().setForceSafeFrame(".concat(e,")")),g().pubads().setForceSafeFrame(e)}function y(e){return e.addService(g().pubads())}function I(e,t){return i.debug("[GPT]: Calling googletag.pubads().refresh(".concat(e.map((function(e){return e.getSlotElementId()})),")")),g().pubads().refresh(e,t)}function x(e,t){var n={nonPersonalizedAds:"gdpr"===t&&!e,restrictDataProcessing:("usp"===t||"ccpa"===t)&&!e};i.info("[GPT]: googletag.pubads().setPrivacySettings(".concat(JSON.stringify(n),")")),g().pubads().setPrivacySettings(n)}var w={defineRegisteredSlot:function(t,n){var r=t.zoneTemplate.slot,o=g().defineSlot(r,t.sizes,t.slotDivId);return o?(e.addAdEvent("register_gpt_slot_".concat(t.slotDivId),{gpid:t.gpid}),y(o),n.forEach((function(e){o.setTargeting(e.key,e.value)}))):i.warn("[GPT]: googletag.defineSlot(".concat(r,", ").concat(JSON.stringify(t.sizes),", ").concat(t.slotDivId,") returned null")),o},displaySlot:f,setPageTargeting:v,pushToGPTQue:p,onGoogletagInitialised:function(e){!function(e){var t=function(e,t,n){return function(i,r){return function(o){var s=t(o);if(Z(e,i,o,s?"[".concat(n,"]"):""),!t(o))return r(o)}}}(i,J,"IN2W");s.isCmpRequired()?a.onPrivacySettingsSet.subscribe((function(e){var t=e.jurisdiction;b(e.allowPersonalisation,t)})):x(!0,"none");e.pubads().disableInitialLoad(),e.pubads().collapseEmptyDivs(!0),e.pubads().setCentering(!0),e.pubads().enableSingleRequest(),e.enableServices(),s.isForceSafeFrames()&&(i.debug("[GPT]: Setting forceSafeFrames to true"),S(!0));e.pubads().addEventListener("slotRequested",t("requested",(function(e){i.debug("[GPT]: emitting slotRequested event: ".concat(JSON.stringify(e))),a.onSlotRequested.emit(e)}))),e.pubads().addEventListener("slotResponseReceived",t("response",(function(e){i.debug("[GPT]: emitting slotResponseReceived event: ".concat(JSON.stringify(e))),a.onSlotResponse.emit(e)}))),e.pubads().addEventListener("slotOnload",t("load",(function(e){i.debug("[GPT]: emitting slotOnload event: ".concat(JSON.stringify(e))),a.onSlotLoaded.emit(e)}))),e.pubads().addEventListener("slotRenderEnded",t("render",(function(e){i.debug("[GPT]: emitting slotRenderEnded event: ".concat(JSON.stringify(e))),a.onSlotRender.emit(e)}))),e.pubads().addEventListener("impressionViewable",t("viewable",(function(e){i.debug("[GPT]: emitting impressionViewable event: ".concat(JSON.stringify(e))),a.onImpressionViewable.emit(e)}))),m()}(e)},refreshUnitsAsync:function(t,n){p((function(){i.debug("[AUCTION][".concat(t,"]: Requested to start GPT auction for (").concat(n.map((function(e){return e.slotDivId})),")"));var o=[];n.forEach((function(e){var n=function(e,t){if(!e)return i.error("Called getGPTSlot() without a fuseSlotCode"),[];var n=g().pubads().getSlots(),r=n.filter((function(t){return e.indexOf(t.getSlotElementId())>=0}));if(r.length!==e.length){var o=n.map((function(e){return e.getSlotElementId()})),s=e.filter((function(e){return-1===o.indexOf(e)}));i.warn("[AUCTION][".concat(t,"]: Could not find a GPT slot for all fuse slots.\n          Missing Slots=").concat(JSON.stringify(s),",\n          All GPT Slots: ").concat(JSON.stringify(o)))}return r}([e.slotDivId],t)[0];n?o.push([e,n]):i.warn("[AUCTION][".concat(t,"]: Could not find GPT Slot corresponding to ").concat(e.slotDivId))}));var s=o.map((function(e){var t=h(e,2);return t[0],t[1]}));if(s&&0!==s.length){var a,u=function(){!function(e){e.forEach((function(e){var t=e[1],n=t.getSlotElementId(),i=e[0].zoneTemplateId,r=c.getSlotRefreshCount(n),o=c.getTemplateUsageCount(i);t.setTargeting("is_refresh",(r>0).toString()),t.setTargeting("slot_prev_count",C(r)),t.setTargeting("adunit_prev_count",C(o))}))}(o);var n=JSON.stringify(s.map((function(e){return e.getSlotElementId()})));e.addAdEvent("gpt_pubads_refresh_".concat(n),{requestId:t}),d||(e.reportFirstGptRequest(),e.setStateStatus("first_gpt_request")),m(),d=!0,I(s,{changeCorrelator:l}),l=!1,function(e){e.forEach((function(e){var t=e[1].getSlotElementId(),n=e[0].zoneTemplateId;c.incrementTemplateUsageCount(n),c.incrementSlotRefreshCount(t)}))}(o)};!0===function(e){return/Edge/.test(e.navigator.userAgent)}(r)?(i.debug("[GC] will trigger GC for iFrames in Edge browser"),(a=r.document.querySelectorAll("div[data-fuse] iframe"),new Promise((function(e){setTimeout((function(){try{e()}catch(e){}}),5),a.forEach((function(e){e.addEventListener("load",(function(){try{for(;this.contentWindow.lastChild;)this.contentWindow.removeChild(this.contentWindow.lastChild)}catch(e){}}),{once:!0})})),a.forEach((function(e){e.setAttribute("src","about:blank")})),e()}))).then((function(){try{CollectGarbage()}catch(e){i.error("[GC]: error in CollectGarbage => ".concat(JSON.stringify(e)))}u()})).catch((function(e){i.error("[GC]: error in purgeIframes => ".concat(JSON.stringify(e)))}))):u()}else i.info("[AUCTION][".concat(t,"]: Cancelled adserver request because no matching GPT slots found"))}))},applyPageTargetingAsync:function(){p((function(){m()}))},setForceSafeFramesAsync:function(){p((function(){S(s.isForceSafeFrames())}))},setInterstitialSlotAsync:function(e){p((function(){var t=g().defineOutOfPageSlot(e.slot,g().enums.OutOfPageFormat.INTERSTITIAL);t?(y(t),f(t),i.debug("[GPT]: Requesting interstitial refresh for ".concat(t.getSlotElementId())),I([t],{changeCorrelator:!1})):i.warn("setInterstitialSlot(): googletag.defineOutOfPageSlot returned undefined")}))},clearInterstitialSlotAsync:function(e){p((function(){var t=g().pubads().getSlots().filter((function(t){return t.getOutOfPage()&&e===t.getAdUnitPath()}));g().destroySlots(t)}))},destroySlotsAsync:function(e){p((function(){!function(e){i.debug("[GPT]: Destroying slots ".concat(e.map((function(e){return e.getSlotElementId()})))),g().destroySlots(e)}(e)}))},setPageTargetingAsync:function(e,t){p((function(){return v(e,t)}))},clearGPTTargetingAsync:function(e){p((function(){e.forEach((function(e){var t;t=e.key,i.debug("[GPT]: Clearing page targeting for key: ".concat(t)),g().pubads().clearTargeting(t)}))}))},resetCorrelator:function(){l=!0},setAllowPersonalisedAdsAsync:b};return w}function ee(e,t,r,o,s,a){e.pushToGPTQue((function(e){t.debug("[GPT]: Queued events beginning to execute"),r.setStateStatus("gpt_queue_start"),a(e)})),n(s,"simulate gpt init delay",t,(function(){r.setStateStatus("gpt_load_start"),function(e,t,n){var r=X(t,e);(null==r?void 0:r._loadStarted_)?e.debug("[INIT]: GPT ".concat(K(r)," is already on the page, skip loading another copy")):i({logger:e,window:t},Q,(function(){var i;e.debug("[INIT]: GPT ".concat((null===(i=t.googletag)||void 0===i?void 0:i._loadStarted_)?"".concat(K(r)," is loaded"):"not loaded")),n()}))}(t,o,(function(){r.setStateStatus("gpt_load_finish")}))}))}var te={name:"Blockthrough",url:"//btloader.com/",file:"tag?o=5708166709903360&upapi=true"};function ne(e,t,n){return{load:function(r){switch(n.setStateStatus("cmp_load_quantcast_start"),r.partner){case"quantcast":return function(){e.log("[CMP]: Loading Quantcast CMP provider");var n=t.document.location.hostname,i=t.document.createElement("script"),r=t.document.getElementsByTagName("script")[0],o=t.document.getElementsByTagName("head")[0]||t.document.documentElement,s="https://cmp.inmobi.com".concat("/choice/","PRrmquD1Ggcb1","/",n,"/choice.js?tag_version=V3"),a=new XMLHttpRequest;a.onreadystatechange=function(){4===this.readyState&&(i.async=!0,i.type="text/javascript",200===this.status?i.src=s:e.error("GET call to CMP script with ".concat(n," responded with the status code - ").concat(this.status)),(null==r?void 0:r.parentNode)?r.parentNode.insertBefore(i,r):(e.debug("First script element not fully initialised, falling back to head-based insertion"),o.insertBefore(i,o.firstChild)),e.log("[CMP]: Added Quantcast script to document"))},e.log("[CMP]: Opening Quantcast URL"),a.open("GET",s,!0),a.send()}();case"cookiebot":return o=r.domainGroupId,e.log("[CMP]: Loading Cookie Bot - ".concat(o)),void i({logger:e,window:t},{name:"CookieBot",url:"//consent.cookiebot.com/",file:"uc.js",insertSelector:"head",attributes:{"data-cbid":o,"data-blockingmode":"auto","data-framework":"IAB"}},(function(){e.log("[CMP]: Cookie Bot script loaded")}));case"fundingchoices":return void e.log("[CMP]: Funding Choices CMP provider selected no external script required")}var o}}}var ie=function(e,t){var n,i,r;return(null===(i=null===(n=t.purpose)||void 0===n?void 0:n.consents)||void 0===i?void 0:i[e])||(null===(r=t.purposeConsents)||void 0===r?void 0:r[e])},re=function(e,t){var n,i;return Boolean(ie(e,t)||(null===(i=null===(n=t.purpose)||void 0===n?void 0:n.legitimateInterests)||void 0===i?void 0:i[e]))},oe=function(){return c((function e(t,n,i){s(this,e),this.logger=t,this.consentUIPrompt=i,this.callCount=-1,this.uspTries=0,this.uspTriesLimit=3,this.browserWindow=n,this.createUspStub()}),[{key:"cmpLoaded",value:function(e){var t=!1;setTimeout((function(){if(!t)return e(!1)}),1e3),this.browserWindow.__tcfapi("ping",2,(function(n){return t=!0,(null==n?void 0:n.cmpLoaded)?e(!0):e(!1)}))}},{key:"setGDPRConsentPrompt",value:function(){var e=this;this.consentUIPrompt.setup("Privacy Settings",(function(){e.browserWindow.__tcfapi("displayConsentUi",2,(function(){return e.logger.log("[CMP-V2]: GDPR Consent UI displayed")}))}))}},{key:"setCCPAConsentPrompt",value:function(){var e=this;this.consentUIPrompt.setup("Do Not Sell My Data",(function(){e.browserWindow.__uspapi("displayUspUi")}))}},{key:"checkForCCPA",value:function(e){var t=this;if(this.browserWindow.googlefc||this.browserWindow.Cookiebot)return this.logger.log("[CMP-v2]: Checking CCPA with cookiebot/funding choices"),this.handleNonInmobiCCPA(e);this.browserWindow.__uspapi("uspPing",1,(function(n,i){i&&n.mode.includes("USP")&&n.jurisdiction.includes(n.location.toUpperCase())?(t.logger.log("[CMP-V2]: CCPA Region"),t.browserWindow.__uspapi("setUspDftData",1,(function(n,i){t.logger.log("[CMP-V2]: Setting up data for USP API",JSON.stringify(n),i),t.browserWindow.__uspapi("getUSPData",1,(function(n,i){if(!i)return t.logger.log("[CMP-V2]: Failed retrieving USP data use default instead"),e({applies:!0,privacyString:"1---"});e({applies:!0,privacyString:n.uspString})}))}))):e({applies:!1})}))}},{key:"handleNonInmobiCCPA",value:function(e){var t,n,i=this;Boolean((null===(t=this.browserWindow.googlefc)||void 0===t?void 0:t.ccpa)||(null===(n=this.browserWindow.Cookiebot)||void 0===n?void 0:n.regulations.ccpaApplies))?this.browserWindow.__uspapi("getUSPData",1,(function(t,n){if(!n)return i.logger.log("[CMP-V2]: Failed retrieving USP data use default instead"),e({applies:!0,privacyString:"1---"});e({applies:!0,privacyString:t.uspString})})):e({applies:!1})}},{key:"handleGdprApplies",value:function(e,t){var n=e.eventStatus.toLowerCase();if("useractioncomplete"===n||"tcloaded"===n){var i=ie(1,e),r=ie(3,e),o=ie(4,e),s=re(2,e),a=re(7,e),c=re(9,e),u=re(10,e),d=!I(i),l=!I(r),g=!I(r),p=d&&l&&g,f=p&&i&&r&&o&&s&&a&&c&&u;return this.logger.debug("[CMP-V2]: Consents available: ".concat(p,", Consent: ").concat(f," Data: ").concat(JSON.stringify(e))),t({dataAvailable:!0,gdprChoiceReceived:!0,personalisedAdsConsent:f,gdprApplies:!0,cmpStatus:null==e?void 0:e.cmpStatus,eventStatus:null==e?void 0:e.eventStatus,tcData:e})}return"cmpuishown"===n||this.callCount%8==0&&this.logger.warn("[CMP-V2]: Unexpected eventStatus. Data: ".concat(JSON.stringify(e))),t({dataAvailable:!0,gdprChoiceReceived:!1,gdprApplies:!0,cmpStatus:null==e?void 0:e.cmpStatus,eventStatus:null==e?void 0:e.eventStatus})}},{key:"createUspStub",value:function(){var e=this,t=this.logger,n=this.browserWindow,i=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];t.warn("[CMP-V2] USP is still in stub mode. Calling to ".concat(n[0]," API will be unsuccessful")),"function"==typeof n[2]&&n[2](void 0,!1)};if(void 0===n.__uspapi){n.__uspapi=i;var r=setInterval((function(){e.uspTries++,n.__uspapi!==i?(t.debug("[CMP-V2]: USP stub function has been replaced"),clearInterval(r)):e.uspTries<e.uspTriesLimit?t.debug("[CMP-V2]: USP stub function has NOT been replaced, will retry"):(t.warn("[CMP-V2]: USP stub function has NOT been replaced, but the timeout has been reached"),clearInterval(r))}),300)}}}])}(),se=function(e){function t(e,n,i){var r;return s(this,t),(r=o(this,t,[e,n,i])).logger=e,r.consentUIPrompt=i,r}return g(t,e),c(t,[{key:"getConsentData",value:function(e){var t=this;this.browserWindow.__tcfapi("getTCData",2,(function(n,i){var r;return t.callCount++,i&&n?I(n.gdprApplies)||"loading"===(null===(r=null==n?void 0:n.cmpStatus)||void 0===r?void 0:r.toLowerCase())||n.gdprApplies&&I(null==n?void 0:n.eventStatus)?(t.logger.log("[CMP-V2]: GDPR not yet determined"),e({dataAvailable:!0,gdprApplies:void 0,cmpStatus:null==n?void 0:n.cmpStatus,eventStatus:null==n?void 0:n.eventStatus})):!1===n.gdprApplies?e({dataAvailable:!0,gdprApplies:!1,cmpStatus:null==n?void 0:n.cmpStatus,eventStatus:null==n?void 0:n.eventStatus}):!0===n.gdprApplies?t.handleGdprApplies(n,e):void t.logger.warn("[CMP-V2]: Unexpected gdprApplies status. Data: ".concat(JSON.stringify(n))):(t.logger.warn("[CMP-V2]: Failed to get TCData"),e({dataAvailable:!1,cmpStatus:null==n?void 0:n.cmpStatus,eventStatus:null==n?void 0:n.eventStatus}))}))}}])}(oe),ae=function(e){function t(e,n,i){var r;return s(this,t),(r=o(this,t,[e,n,i])).logger=e,r.consentUIPrompt=i,r.tcData=null,r.browserWindow.__tcfapi("addEventListener",2,r.handleTCEvent.bind(r)),r}return g(t,e),c(t,[{key:"getConsentData",value:function(e){var t,n,i,r,o,s,a;return this.callCount++,this.tcData?I(this.tcData.gdprApplies)||"loading"===(null===(n=null===(t=this.tcData)||void 0===t?void 0:t.cmpStatus)||void 0===n?void 0:n.toLowerCase())||this.tcData.gdprApplies&&I(null===(i=this.tcData)||void 0===i?void 0:i.eventStatus)?(this.logger.log("[CMP-V2.2]: GDPR not yet determined"),e({dataAvailable:!0,gdprApplies:void 0,cmpStatus:null===(r=this.tcData)||void 0===r?void 0:r.cmpStatus,eventStatus:null===(o=this.tcData)||void 0===o?void 0:o.eventStatus})):!1===this.tcData.gdprApplies?e({dataAvailable:!0,gdprApplies:!1,cmpStatus:null===(s=this.tcData)||void 0===s?void 0:s.cmpStatus,eventStatus:null===(a=this.tcData)||void 0===a?void 0:a.eventStatus}):!0===this.tcData.gdprApplies?this.handleGdprApplies(this.tcData,e):void this.logger.warn("[CMP-V2.2]: Unexpected gdprApplies status. Data: ".concat(JSON.stringify(this.tcData))):(this.logger.log("[CMP-V2.2]: TCData not yet set"),e({dataAvailable:!1,cmpStatus:void 0,eventStatus:void 0}))}},{key:"handleTCEvent",value:function(e,t){t&&e?(this.logger.log("[CMP-V2.2]: TCFv2 event listener triggered"),this.tcData=Object.assign({},e)):this.logger.log("[CMP-V2.2]: TCFv2 event listener failed - success ".concat(t," - tcData ").concat(JSON.stringify(e)))}}])}(oe);function ce(e,t,n,i,r,o,s){var a=void 0,c=e,u=0,d=!1;function l(e){var i=e.found,o=e.versionNumber;k(a)?t.warn("[CMP]: Version already loaded: ".concat(o)):i?2===o?(n.setStateStatus("cmp_load_wait_finish"),n.reportCmpLoadFinish(),t.debug("[CMP]: Loaded version ".concat(o)),s.getUseTcfV2()?(t.log("[CMP]: Using deprecated TCFv2.0"),a=new se(t,c,r)):(t.log("[CMP]: Using TCFv2.2"),a=new ae(t,c,r)),function(){t.info("[CMP]: Checking if the GDPR applies"),n.setStateStatus("cmp_gdpr_applies_check_start");var e=function(e,i){n.setStateStatus("cmp_gdpr_applies_check_finish"),!1===e?function(){t.info("[CMP]: GDPR does not apply");var e=!1,i=!1;setTimeout((function(){i||(i=!0,n.setStateStatus("cmp_check_for_ccpa_timeout"),t.warn("[CMP]: USP API is not responding, continue as if not in CCPA region"),f("none",!0,!0))}),2e3),n.setStateStatus("cmp_check_for_ccpa_start"),o=function(o){var s=o.applies,c=o.privacyString;i?t.warn("[CMP]: Got CCPA response, but timeout already reached"):(i=!0,n.setStateStatus("cmp_check_for_ccpa_finish"),s?(null==a||a.setCCPAConsentPrompt(),e="Y"===(null==c?void 0:c[2].toUpperCase()),t.info("[CMP]: CCPA applies. disablePersonalisation: ".concat(e)),f("ccpa",!e,!1)):(t.info("[CMP]: Not in CCPA region, continue with personalisation"),r.setup("You are outside the CCPA jurisdiction."),f("none",!0,!1)))},null==a||a.checkForCCPA(o);var o}():s.isRequestGdprPersonalisation()?function(){t.log("[CMP]: GDPR applies, checking if personalisation is allowed"),n.setStateStatus("cmp_gdpr_choice_wait_start"),null==a||a.setGDPRConsentPrompt();var e=!1;p((function(i){var r=i.gdprChoiceReceived,o=i.personalisedAdsConsent,s=i.tcData;if(r&&(e=!0,n.setStateStatus("cmp_gdpr_choice_wait_finish"),t.info("[CMP]: GDPR decision received via short-circuit. Allow personalisation: ".concat(o)),f("gdpr",Boolean(o),!1,s)),!e){d=!0,n.setStateStatus("cmp_prompt_shown");var a=0,c=setInterval((function(){p((function(i){var r=i.gdprChoiceReceived,o=i.personalisedAdsConsent,s=i.cmpStatus,u=i.eventStatus,d=i.tcData;r?(e=!0,n.setStateStatus("cmp_gdpr_choice_wait_finish"),t.info("[CMP]: GDPR decision received. Allow personalisation: ".concat(o)),clearInterval(c),f("gdpr",Boolean(o),!1,d)):++a%10==0&&t.info("[CMP]: Waiting for GDPR personalisation choice. cmpStatus: ".concat(s,", eventStatus: ").concat(u))}))}),100)}}))}():(n.setStateStatus("cmp_gdpr_choice_wait_finish"),t.info("[CMP]: The GDPR applies, but we will assume they do not allow personalisation (show limited ads)"),f("gdpr",!1,!1,i))};p((function(n){var i=n.gdprApplies,r=n.tcData;if(I(i)){var o=250,s=0;t.debug("[CMP]: Setting a check interval of ".concat(o,"ms"));var a=!1,c=setInterval((function(){p((function(n){var i=n.gdprApplies,r=n.tcData;I(i)?s++%4==0&&t.info("[CMP]: Waiting for GDPR determination"):(clearInterval(c),a||(a=!0,e(i,r)))}))}),o)}else t.debug("[CMP]: GDPR status already available, processing immediately"),e(i,r)}))}()):(t.error("[CMP]: Version ".concat(o," is not supported, disabling personalisation")),f("none",!0,!0)):(++u%10==0&&t.debug("[CMP] Waiting for load"),setTimeout((function(){return g()}),50))}function g(){if(s.getCmpSkipStub()&&!c.__tcfapi)return t.log("[CMP]: Stub function not setup yet"),l({found:!1,versionNumber:2});c.__tcfapi("ping",null,(function(e,n){var i=e.cmpLoaded;i&&c.Cookiebot&&!c.Cookiebot.userCountry&&(t.log("[CMP]: CookieBot ping response when no user country: ".concat(n," - ").concat(JSON.stringify(e))),i=!1),l({found:i,versionNumber:2})}))}function p(e){null==a||a.getConsentData(e)}function f(e,i,r,a){var c=o.state.cmp._tag;if("gdpr"===e&&n.reportCmpGdprDetermined(),"loading"==c){var u={jurisdiction:e,timeout:r,allowPersonalisation:i,dialogShown:d,noCmpTestResult:s.isNoCmpTestMode()?e:void 0,tcData:a};t.info("[CMP]: Determination: ".concat(JSON.stringify(u)));var l=n.getElapsedTime();o.updateState("cmp",A(o.state.cmp,l,u))}else t.error("[CMP]: CMP in unexpected state: ".concat(c))}return{enable:function(){o.updateState("cmp",T(n.getElapsedTime())),s.getCmpSkipStub()?t.log("[CMP]: Skipping stubs"):i.generate(!s.getDisableGppStub()),n.setStateStatus("cmp_load_wait_start"),t.info("[CMP]: Wait for CMP to load"),g()}}}function ue(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"div[data-fuse-privacy-tool]",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"fuse-privacy-tool";return{setup:function(i,r){var o=e.document.querySelector(t);if(o)if(r){var s=document.createElement("a");s.href="javascript:void(0)",s.id=n,s.innerHTML=i,s.addEventListener("click",r),o.appendChild(s)}else o.textContent=i}}}function de(e,t){var n=t,i=t.document.referrer?new URL(t.document.referrer).origin:"",r={cmpStatus:"loaded",eventStatus:"tcloaded",tcfPolicyVersion:2,cmpVersion:44,cmpId:10},o=1,s={};return{load:function(){n.__tcfapi=function(t,n,i,a){switch(t){case"ping":return function(e){var t={cmpLoaded:!0,cmpStatus:r.cmpStatus,cmpVersion:r.cmpVersion,displayStatus:"disabled",apiVersion:"2",cmpId:r.cmpId,gdprApplies:r.gdprApplies};e(t)}(i);case"getTCData":return function(e){e(Object.assign({},r),!0)}(i);case"addEventListener":return function(t){e.log("[CMP]: Adding Event Listener. Listener ID: ".concat(o)),s["".concat(o)]=t;var n=Object.assign(Object.assign({},r),{listenerId:o});return o++,t(n,!0)}(i);case"removeEventListener":return"number"==typeof a&&(e.log("[CMP]: Removing Event Listener ID: ".concat(a)),delete s["".concat(a)]),i(Object.assign({},r),!0);default:return e.log("[CMP]: Unsupported command: ".concat(t)),i({},!1)}},n.addEventListener("message",(function(t){var n;if(i&&t.origin!==i)e.log("[CMP]: Ignoring message from origin ".concat(t.origin));else{if("set-tc-data"===t.data.type){r=Object.assign({},t.data.data);var o=["tcloaded","useractioncomplete"].includes(r.eventStatus)?"tcloaded":r.eventStatus;return e.log("[CMP]: Calling event listeners with event status ".concat(o)),void Object.entries(s).forEach((function(e){var t=h(e,2),n=t[0];(0,t[1])(Object.assign(Object.assign({},r),{listenerId:parseInt(n,10),eventStatus:o}),!0)}))}e.log("[CMP]: unknown iframe message: ".concat(null===(n=t.data)||void 0===n?void 0:n.type))}}))}}}var le={tcfeuv2:2,usnat:7,usca:8,usva:9,usco:10,usct:11,usut:12,usfl:13},ge={NAT:["PersonalDataConsents","SharingOptOut","SaleOptOut","TargetedAdvertisingOptOut"],CA:["PersonalDataConsents","SharingOptOut","SaleOptOut"],CO_CT_VA:["PersonalDataConsents","SaleOptOut","TargetedAdvertisingOptOut"],FL:["PersonalDataConsents","SaleOptOut","TargetedAdvertisingOptOut"]};function pe(e,t){var n;return null===(n=t.PurposeConsents)||void 0===n?void 0:n[e]}function fe(e,t){var n;return Boolean(pe(e,t)||(null===(n=t.PurposeLegitimateInterests)||void 0===n?void 0:n[e]))}function he(e){return e.applicableSections.some((function(e){return e===le.tcfeuv2}))}function ve(e){return[le.usnat,le.usca,le.usva,le.usco,le.usct,le.usut,le.usfl].includes(e.applicableSections[0])}function be(e){var t=e.applicableSections,n=e.supportedAPIs,i=e.parsedSections;return-1===t[0]||t.every((function(e){var t=function(e,t){var n,i=e.reduce((function(e,t){return t.includes(",")?e.push.apply(e,v(t.split(",").map((function(e){return e.trim()})))):e.push(t),e}),[]);return null===(n=i.map((function(e){return e.split(":")})).find((function(e){return parseInt(e[0])===t})))||void 0===n?void 0:n[1]}(n,e);return!t||t in i}))}function me(e,t){var n=Array.isArray(e)?e[0]:e;return!t.some((function(e){return 1===n[e]}))}function Se(e,t,n,i,r){function o(t){var i=t.cmpStatus,r=t.cmpDisplayStatus,o=t.signalStatus,a=t.applicableSections,c=ve(t),u=he(t);if("loaded"===i){if("disabled"===r)return e.info("[CMP-GPP]: cmpDisplayStatus disabled. Processed/disabled GPP"),s(t);if("ready"===o){if(-1===a[0])return e.log("[CMP-GPP]: Sections not applicable"),n({dataAvailable:!0,uspApplies:!1,gdprApplies:!1,cmpStatus:i,cmpDisplayStatus:r,signalStatus:o});if("visible"===r)return e.log("[CMP-GPP]: CMP now displays the consent layer"),n({dataAvailable:!1,uspApplies:c,gdprApplies:u,cmpStatus:i,cmpDisplayStatus:r,signalStatus:o});if("hidden"===r||"disabled"===r)return ve(t)||be(t)?(e.log("[CMP-GPP]: GPP determined"),s(t)):(e.log("[CMP-GPP]: CMP not yet to displays the consent layer"),n({dataAvailable:!0,uspApplies:c,gdprApplies:u,cmpStatus:i,cmpDisplayStatus:r,signalStatus:o}))}if("not ready"===o)return void e.log("[CMP-GPP]: Not ready status. Data: ".concat(JSON.stringify(t)))}e.warn("[CMP-GPP]: Unexpected uspApplies status. Data: ".concat(JSON.stringify(t)))}function s(t){var i=!0,o=!0,s=ve(t),a=he(t);if(s){var c=function(e){var t=!0,n=e.parsedSections,i=n.usnat,o=n.usca,s=n.usco,a=n.usct,c=n.usva,u=n.usfl;return i&&e.applicableSections.includes(le.usnat)&&(t=me(i,"FL"===(null==r?void 0:r.state)?ge.FL:ge.NAT)),o&&e.applicableSections.includes(le.usca)&&(t=me(o,ge.CA)),s&&e.applicableSections.includes(le.usco)&&(t=me(s,ge.CO_CT_VA)),a&&e.applicableSections.includes(le.usct)&&(t=me(a,ge.CO_CT_VA)),c&&e.applicableSections.includes(le.usva)&&(t=me(c,ge.CO_CT_VA)),u&&e.applicableSections.includes(le.usfl)&&(t=me(u,ge.FL)),{allowPersonalisation:t,consentsAvailable:!0}}(t);i=c.allowPersonalisation,o=c.consentsAvailable}else if(a){var u=function(e){var t,n=e.parsedSections.tcfeuv2,i=Array.isArray(n)?n[0]:n,r=pe(1,i),o=pe(3,i),s=pe(4,i),a=fe(2,i),c=fe(7,i),u=fe(9,i),d=fe(10,i),l=!I(r),g=!I(o),p=!I(o);return{personalisedAdsConsent:(t=l&&g&&p)&&r&&o&&s&&a&&c&&u&&d,consentsAvailable:t}}(t);i=u.personalisedAdsConsent,o=u.consentsAvailable}return e.debug("[CMP-GPP]: Consents available: ".concat(o,", PersonalisedAds: ").concat(i,", Data: ").concat(JSON.stringify(t))),n({dataAvailable:!0,uspChoiceReceived:s,gdprChoiceReceived:a,personalisedAdsConsent:i,uspApplies:s,gdprApplies:a,cmpStatus:t.cmpStatus,cmpDisplayStatus:t.cmpDisplayStatus,signalStatus:t.signalStatus,gppString:t.gppString})}return e.debug("[CMP-GPP]: Loading version"),t.__gpp("addEventListener",(function(t,n){if("eventName"in t){if("not ready"===t.pingData.signalStatus)return;switch(t.eventName){case"listenerRegistered":n?o(t.pingData):e.log("[CMP-GPP]: GPP event listener failed - success ".concat(n," - evt ").concat(JSON.stringify(t)));break;case"cmpDisplayStatus":i&&i(t.data),o(t.pingData);break;case"sectionChange":case"signalStatus":o(t.pingData);break;default:e.log("[CMP-GPP]: GPP not processed event ".concat(t.eventName," ").concat(JSON.stringify(t)))}}else o(t)})),{type:"GPP"}}var ye=function(e,t){var n,i,r;return(null===(i=null===(n=t.purpose)||void 0===n?void 0:n.consents)||void 0===i?void 0:i[e])||(null===(r=t.purposeConsents)||void 0===r?void 0:r[e])},Ie=function(e,t){var n,i;return Boolean(ye(e,t)||(null===(i=null===(n=t.purpose)||void 0===n?void 0:n.legitimateInterests)||void 0===i?void 0:i[e]))},xe="V2.2";function ke(e,t,n,i,r){return e.log("[CMP-".concat(xe,"]: Loading")),t.__tcfapi("addEventListener",2,(function(o,s){e.log("[CMP-V2.2]: TCF event triggered success: ".concat(s," ").concat(JSON.stringify(o))),s&&o?(e.log("[CMP-V2.2]: TCFv2 event listener triggered ".concat(JSON.stringify(o))),function(o){var s,a=null===(s=o.eventStatus)||void 0===s?void 0:s.toLowerCase();if(o.gdprApplies){if("disabled"===o.cmpDisplayStatus)return void e.info("[CMP-V2.2]: cmpDisplayStatus disabled. Not processing TCF");if("useractioncomplete"===a||"tcloaded"===a){var c=function(e){var t=ye(1,e),n=ye(3,e),i=ye(4,e),r=Ie(2,e),o=Ie(7,e),s=Ie(9,e),a=Ie(10,e),c=!I(t),u=!I(n),d=!I(n),l=c&&u&&d,g=l&&t&&n&&i&&r&&o&&s&&a;return{consentsAvailable:l,personalisedAdsConsent:g}}(o),u=c.consentsAvailable,d=c.personalisedAdsConsent;return e.debug("[CMP-V2.2]: Consents available: ".concat(u,", Consent: ").concat(d," Data: ").concat(JSON.stringify(o))),n({dataAvailable:!0,gdprChoiceReceived:!0,personalisedAdsConsent:d,gdprApplies:!0,cmpStatus:null==o?void 0:o.cmpStatus,eventStatus:null==o?void 0:o.eventStatus,tcData:o})}if("cmpuishown"===a)i("visible"),n({dataAvailable:!0,gdprChoiceReceived:!1,gdprApplies:!0,cmpStatus:null==o?void 0:o.cmpStatus,eventStatus:null==o?void 0:o.eventStatus})}else{var l="US"===(null==r?void 0:r.country)&&"CA"===(null==r?void 0:r.state);if(e.info("[CMP-V2.2]: GDPR not applies. CCPA geo:",l),!l)return n({dataAvailable:!0,gdprChoiceReceived:!1,gdprApplies:!1,cmpStatus:null==o?void 0:o.cmpStatus,eventStatus:null==o?void 0:o.eventStatus});!function(n){t.__uspapi("getUSPData",1,(function(t,i){return i?(e.info("[CMP-V2.2] USP String:",t.uspString),n(t.uspString)):(e.warn("[CMP-V2.2] Could not retrieve USP data"),n("1---"))}))}((function(e){var t="1---"!==e,i=t&&"Y"===(null==e?void 0:e[2].toUpperCase());return n({dataAvailable:!0,gdprChoiceReceived:!1,gdprApplies:!1,uspApplies:t,uspChoiceReceived:t,personalisedAdsConsent:!i,cmpStatus:null==o?void 0:o.cmpStatus,eventStatus:null==o?void 0:o.eventStatus})}))}}(o)):e.log("[CMP-V2.2]: TCFv2 event listener failed - success ".concat(s," - tcData ").concat(JSON.stringify(o)))})),{type:xe}}function we(e,t,n,i,r,o,s,a){var c,u=e,d=0,l=!1,g=!1,p=s.getFuseGeo(),f=null===(c=s.getCmpProvider())||void 0===c?void 0:c.partner,h="US-GPP"===(null==p?void 0:p.code)||"US-NON-GPP"===(null==p?void 0:p.code),v=s.isGppEnabled()&&("fundingchoices"===f&&h||"fundingchoices"!==f);function b(){var e,i;n.setStateStatus("cmp_load_wait_start"),e=function(e){e?Se(t,u,S,m,p):ke(t,u,S,m,p)},i=setInterval((function(){if(++d%10==0&&t.debug("[CMP] Waiting for load ".concat(d)),v&&u.__gpp){t.info("[CMP]: GPP detected");var n=setInterval((function(){u.__gpp("ping",(function(t){var i=t;"loaded"===i.cmpStatus&&"ready"===i.signalStatus&&(clearInterval(n),e(!0))}))}),50);clearInterval(i)}else if(u.__tcfapi){t.info("[CMP]: TCF detected");var r=setInterval((function(){u.__tcfapi("ping",2,(function(t){t.cmpLoaded&&(clearInterval(r),e(!1))}))}),50);clearInterval(i)}}),50)}function m(e){"visible"===e&&(l=!0,t.info("[CMP]: Consent dialog is visible"),n.setStateStatus("cmp_prompt_shown")),"hidden"===e&&(t.info("[CMP]: Consent dialog is hidden"),n.setStateStatus("cmp_prompt_hidden"))}function S(e){t.debug("[CMP]: Consent data received ".concat(JSON.stringify(e)));var i=e.uspApplies,o=e.gdprApplies,s=e.uspChoiceReceived,a=e.gdprChoiceReceived,c=e.personalisedAdsConsent,d=e.gppString,l=e.tcData;if(!i&&!o)return t.info("[CMP]: Neither GDPR nor USP applies"),void y("none",!0,!1);o&&(g||(g=!0,t.info("[CMP]: Setting up GDPR consent prompt"),r.setup("Privacy Settings",(function(){u.__tcfapi("displayConsentUi",2,(function(){return t.log("[CMP-V2]: GDPR Consent UI displayed")}))})))),i&&(g||(g=!0,r.setup("Do Not Sell My Data",(function(){u.__uspapi("displayUspUi")})))),a&&(n.setStateStatus("cmp_gdpr_choice_wait_finish"),t.info("[CMP]: GDPR decision received. Allow personalisation: ".concat(c)),y("gdpr",Boolean(c),!1,d,l)),s&&(n.setStateStatus("cmp_usp_choice_wait_finish"),t.info("[CMP]: USP decision received. Allow personalisation: ".concat(c)),y("usp",Boolean(c),!1,d,l))}function y(e,i,r,c,u){var d=o.state.cmp._tag;if("gdpr"===e&&n.reportCmpGdprDetermined(),"usp"===e&&n.reportCmpUspDetermined(),"loading"==d||"ready"==d){var g={jurisdiction:e,allowPersonalisation:i,timeout:r,dialogShown:l,noCmpTestResult:s.isNoCmpTestMode()?e:void 0,gppString:c,tcData:u};if(t.info("[CMP]: Determination: ".concat(JSON.stringify(g))),"loading"==d){var p=n.getElapsedTime();o.updateState("cmp",A(o.state.cmp,p,g))}a.onPrivacySettingsSet.emit({allowPersonalisation:i,jurisdiction:e})}else t.error("[CMP]: CMP in unexpected state: ".concat(d))}return t.info("[CMP]: ".concat(f," - GPP: ").concat(v,", geo: ").concat(null==p?void 0:p.code)),{enable:function(){o.updateState("cmp",T(n.getElapsedTime())),s.getCmpSkipStub()?t.log("[CMP]: Skipping stubs"):(i.createStubFunctionV2(),i.createGppStub(),i.createUspStub()),b()}}}var _e=function(){return c((function e(t){s(this,e),this.opts=t}),[{key:"getStubFunctionsGenerator",value:function(){return this.stubFunctionsGenerator||(this.stubFunctionsGenerator=function(e,t){var n=t;function i(){!function(){e.debug("[CMP]: Generating V2 stub");for(var t="__tcfapiLocator",i=[],r=n,o=void 0,s=function(){var n=r.document,i=!!r.frames[t];if(i)e.debug("[CMP] Found existing version 2 stub");else if(e.debug("[CMP] Version 2 stub not found - generating"),n.body){var o=n.createElement("iframe");o.style.cssText="display:none",o.name=t,n.body.appendChild(o)}else setTimeout(s,5);return!i},a=r;a;){try{if(a.frames[t]){o=a,e.debug("[CMP] Found locator frame");break}}catch(t){"{}"!==JSON.stringify(t)&&e.log("[CMP]:",JSON.stringify(t))}if(a===n.top)break;a=a.parent}o||(e.debug("[CMP] Locator frame not found"),s(),r.__tcfapi=function(){var e=arguments,t=void 0;if(!e.length)return i;if("setGdprApplies"===e[0])e.length>3&&2===e[2]&&"boolean"==typeof e[3]&&(t=e[3],"function"==typeof e[2]&&e[2]("set",!0));else if("ping"===e[0]){var n={gdprApplies:t,cmpLoaded:!1,cmpStatus:"stub"};"function"==typeof e[2]&&e[2](n)}else{var r="init"===e[0]&&"object"===m(e[3])?[e[0],e[1],e[2],Object.assign(e[3],{tag_version:"V2"})].concat(Array.from(e).slice(4)):e;i.push(r)}},r.addEventListener("message",(function(t){var i="string"==typeof t.data,r=void 0;try{r=i?JSON.parse(t.data):t.data}catch(t){"{}"!==JSON.stringify(t)&&e.error("[CMP]:",JSON.stringify(t))}var o=null==r?void 0:r.__tcfapiCall;if(o){var s=t.source;n.__tcfapi(o.command,o.version,(function(e,t){var n={__tcfapiReturn:{returnValue:e,success:t,callId:o.callId}};(null==s?void 0:s.postMessage)&&s.postMessage(i?JSON.stringify(n):n,"*")}),o.parameter),s=null}}),!1))}()}function r(){e.log("[CMP]: Generating GPP stub");var t=n;n.__gpp_addFrame=function(e){if(!t.frames[e])if(t.document.body){var n=document.createElement("iframe");n.style.cssText="display:none",n.name=e,t.document.body.appendChild(n)}else t.setTimeout((function(){return t.__gpp_addFrame(e)}),10)},n.__gpp_stub=function(){var e=arguments;if(t.__gpp.queue=t.__gpp.queue||[],!e.length)return t.__gpp.queue;var n=e[0],i=e.length>1?e[1]:null,r=e.length>2?e[2]:null;if("ping"===n){var o={gppVersion:"1.1",cmpStatus:"stub",cmpDisplayStatus:"hidden",supportedAPIs:["2:tcfeuv2","5:tcfcav1","6:uspv1"],cmpId:31,sectionList:[],applicableSections:[-1],gppString:""};return i(o,!0),o}if("addEventListener"===n){t.__gpp.events=t.__gpp.events||[],"lastId"in t.__gpp||(t.__gpp.lastId=0),t.__gpp.lastId++;var s=t.__gpp.lastId;t.__gpp.events.push({id:s,callback:i,parameter:r});var a={eventName:"listenerRegistered",listenerId:s,data:!0,pingData:{gppVersion:"1.1",cmpStatus:"stub",cmpDisplayStatus:"hidden",supportedAPIs:["2:tcfeuv2","5:tcfcav1","9:usva","7:usnat"],cmpId:31,sectionList:[],applicableSections:[-1],gppString:""}};return i(a,!0),a}if("removeEventListener"===n){var c=!1;t.__gpp.events=t.__gpp.events||[];for(var u=0;u<t.__gpp.events.length;u++)if(t.__gpp.events[u].id==r){t.__gpp.events.splice(u,1),c=!0;break}var d={eventName:"listenerRemoved",listenerId:r,data:c,pingData:{gppVersion:"1.1",cmpStatus:"stub",cmpDisplayStatus:"hidden",supportedAPIs:["2:tcfeuv2","5:tcfcav1","9:usva","7:usnat"],cmpId:31,sectionList:[],applicableSections:[-1],gppString:""}};return i(d,!0),d}if("hasSection"===n||"getSection"===n||"getField"===n)return null;t.__gpp.queue.push([].slice.apply(e))},n.__gpp_msghandler=function(e){var n,i="string"==typeof e.data;try{n=i?JSON.parse(e.data):e.data}catch(e){n=null}if("object"===m(n)&&null!==n&&"__gppCall"in n){var r=n.__gppCall;t.__gpp(r.command,(function(t,n){var o={__gppReturn:{returnValue:t,success:n,callId:r.callId}};e.source.postMessage(i?JSON.stringify(o):o,"*")}),"parameter"in r?r.parameter:null,"version"in r?r.version:"1.1")}},"__gpp"in n&&"function"==typeof n.__gpp?e.log("[CMP]: GPP already set, not setting __gpp"):(e.log("[CMP]: GPP not yet set, setting to stub"),n.__gpp=n.__gpp_stub,n.addEventListener("message",n.__gpp_msghandler,!1),n.__gpp_addFrame("__gppLocator"))}return{generate:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];i(),e&&r()},createStubFunctionV2:i,createGppStub:r,createUspStub:function(){"__uspapi"in n&&"function"==typeof n.__uspapi||(n.__uspapi=function(t,n,i){"getUSPData"===t?i({uspString:"1---"},!0):(e.warn("__uspapi command not supported: ".concat(t)),i({uspString:"1---"},!1))})}}}(this.opts.environmentBootstrapper.getLogger(),this.opts.environmentBootstrapper.getBrowserWindowObject())),this.stubFunctionsGenerator}},{key:"getConsentManager",value:function(){return this.consentManager||(this.consentManager=this.opts.settingsBootstrapper.getSettings().isCmpV2Enabled()?we(this.opts.environmentBootstrapper.getBrowserWindowObject(),this.opts.environmentBootstrapper.getLogger(),this.opts.monitoringBootstrapper.getReporter(),this.getStubFunctionsGenerator(),ue(this.opts.environmentBootstrapper.getBrowserWindowObject()),this.opts.monitoringBootstrapper.getComponentStatusStore(),this.opts.settingsBootstrapper.getSettings(),{onPrivacySettingsSet:this.opts.evtBootstrapper.eventHub.onPrivacySettingsSet}):ce(this.opts.environmentBootstrapper.getBrowserWindowObject(),this.opts.environmentBootstrapper.getLogger(),this.opts.monitoringBootstrapper.getReporter(),this.getStubFunctionsGenerator(),ue(this.opts.environmentBootstrapper.getBrowserWindowObject()),this.opts.monitoringBootstrapper.getComponentStatusStore(),this.opts.settingsBootstrapper.getSettings())),this.consentManager}},{key:"getCmpProviderLoader",value:function(){return this.cmpProviderLoader||(this.cmpProviderLoader=ne(this.opts.environmentBootstrapper.getLogger(),this.opts.environmentBootstrapper.getBrowserWindowObject(),this.opts.monitoringBootstrapper.getReporter())),this.cmpProviderLoader}},{key:"getIframeCmpManager",value:function(){return this.iframeCmpManager||(this.iframeCmpManager=de(this.opts.environmentBootstrapper.getLogger(),this.opts.environmentBootstrapper.getBrowserWindowObject())),this.iframeCmpManager}}])}();function Ee(e,t,n){var i=function(t){n(t)&&e.onTriggeredCB()};return t.subscribe(i),{destroy:function(){return t.unsubscribe(i)}}}function Ce(e){return Ee(e,e.api.events.onWindowResized,(function(e){return!e.crossedBp}))}function Te(e){return function(e){return e instanceof Error}(e)?e:new Error(String(e))}var Ae=function(){function e(t,n,i,r,o){s(this,e),this.id=t,this.condition=n,this.api=i,this.activatorCallback=r,this.logger=o,this.triggers=null,this.satisfied=!1}return c(e,[{key:"checkCondition",value:function(){return this.checkConditionAndNotify(!1)}},{key:"checkConditionAndNotify",value:function(e){if(!this.satisfied){try{this.satisfied=this.condition.check(this.id,this.api)}catch(e){var t=Te(e);return this.logger.warn("[CONDITION][".concat(this.condition.name,"][").concat(this.id,"]: Caught exception while checking condition"),t.message,t.stack),!1}this.satisfied&&e&&this.activatorCallback()}return this.satisfied}},{key:"destroyTriggers",value:function(){return e.visitConditions(this,(function(e){e.triggers&&e.triggers.forEach((function(e){e.destroy()}))}))}},{key:"enableTriggers",value:function(t){var n=this;return e.visitConditions(this,(function(e){var i=e.condition,r={id:n.id,api:t,logger:n.logger,onTriggeredCB:function(){return e.checkConditionAndNotify(!0)}};e.triggers=[].concat(v(i.buildTriggers(r)),[Ce(r)])}))}}],[{key:"visitConditions",value:function(t,n){var i=t.condition;if("AndCondition"===i.name||"OrCondition"===i.name)i.conditions.forEach((function(t){return e.visitConditions(t,n)}));else try{n(t)}catch(e){var r=Te(e);t.logger.warn("[CONDITION][".concat(i.name,"][").concat(t.id,"]: Caught exception while visiting condition:"),r.message,r.stack)}}}])}();function Pe(e,t){var n={AlwaysTrue:function(){return{name:"AlwaysTrue",check:function(){return!0},buildTriggers:function(e){return[]}}},AlwaysFalse:function(){return{name:"AlwaysFalse",check:function(){return!1},buildTriggers:function(e){return[]}}}},i={};function r(t,r,a,c){var u=r.type;switch(u){case"and":return s(t,r,a,c,(function(e){return function(e){return{name:"AndCondition",conditions:e,buildTriggers:function(e){return[]},check:function(){return e.reduce((function(e,t){return e&&t.checkCondition()}),!0)}}}(e)}));case"or":return s(t,r,a,c,(function(e){return function(e){return{name:"OrCondition",conditions:e,buildTriggers:function(e){return[]},check:function(){return e.reduce((function(e,t){return e||t.checkCondition()}),!1)}}}(e)}));case"condition":case"custom-condition":return function(t,r,s,a){var c,u=n[r.name];if(u)return new Ae(t,u(),s,a,e);var d=i[r.name];if(!d)return e.error("[CONDITION-FACTORY]: Could not find condition ".concat(r.name,", it will be deemed false")),o(t,s,a);var l=d(null!==(c=r.params)&&void 0!==c?c:{},e);return new Ae(t,l,s,a,e)}(t,r,a,c);default:_(u)}}function o(t,n,i){return new Ae(t,{name:"AlwaysFalse",check:function(){return!1},buildTriggers:function(e){return[]}},n,i,e)}function s(t,n,i,s,a){var c=n.subConditions;if(!c||0===c.length)return e.error("[CONDITION-FACTORY]: Boolean condition with no sub-conditions"),o(t,i,s);var u=a(c.map((function(e){return r(t,e,i,s)})));return new Ae(t,u,i,s,e)}return Object.entries(t).forEach((function(e){var t=h(e,2);!function(e,t){if(i[e])throw Error("Condition with ".concat(e," already registered"));i[e]=t}(t[0],t[1])})),{buildActivator:function(t,n,i,o){var s,a=r(n,t,i,(function(){return s.checkAndFire()}));return s=function(e,t,n,i,r){var o=!1;return{enableTriggers:function(){n.enableTriggers(i)},destroy:function(){n.destroyTriggers()},checkCondition:function(){return n.checkCondition()},checkAndFire:function(){o||n.checkCondition()&&(e.info("[ACTIVATOR][".concat(t,"]: Conditions are satisfied. Destroying triggers and invoking callback")),n.destroyTriggers(),o=!0,r(t))}}}(e,n,a,i,o),s}}}function Re(e){var t={capture:!0,passive:!0},n=e.api.viewportInfo.browserWindow,i=e.onTriggeredCB;return n.addEventListener("scroll",i,t),{destroy:function(){n.removeEventListener("scroll",i,t)}}}var Be="AbsoluteScrollDistance";function Oe(e){return{name:Be,buildTriggers:function(e){return[Re(e)]},check:function(t,n){return n.getWindow().scrollY>=((null==e?void 0:e.pixelsDistance)||0)}}}var ze="BreakpointMatch",De={xs:1,s:2,m:3,l:4,xl:5};function Me(e,t,n){var i=De[e],r=De[t];return"gte"===n?r>=i:r<=i}function Ne(e){return{name:ze,buildTriggers:function(e){return[]},check:function(t,n){var i=n.viewportInfo.getCurrentBreakpoint().name,r=!("gte"in e)||Me(e.gte,i,"gte"),o=!("lte"in e)||Me(e.lte,i,"lte");return r&&o}}}function Le(e){var t=e.api.viewportInfo.browserWindow,n=e.onTriggeredCB;return document.addEventListener("readystatechange",n),{destroy:function(){t.removeEventListener("readystatechange",n)}}}var je="DocumentStatus";function Fe(e,t){var n=setInterval(e.onTriggeredCB,t);return{destroy:function(){clearInterval(n)}}}var Ue=function(e,t,n){if(!n)return t.warn("[WIDGETS] safeQuerySelector selector should be defined"),null;try{return e.querySelector(n)}catch(e){t.error("[WIDGETS] safeQuerySelector error: ".concat(n))}return null},Ge="DomElementExists";function qe(e,t){return{name:Ge,buildTriggers:function(e){return[Fe(e,250)]},check:function(n,i){return null!==Ue(document,t,e.selector)}}}var Ve="InView";function He(e){var t=e.api.slotRegistry.getSlot(e.id).zoneInstanceId;return Ee(e,e.api.events.onZoneActivateApi,(function(e){return e.instanceId===t}))}var We="ManualActivate";var Ze="PageCount";function Ye(e){return"fuse-page-views-".concat(e)}function Je(e,t){return Number(t.sessionStorage.getItem(Ye(e))||0)}function Qe(e){var t=!1,n=!1;return{name:Ze,buildTriggers:function(e){return[]},check:function(i,r){if(!t){!function(e,t){t.sessionStorage.setItem(Ye(e),"".concat(Je(e,t)+1))}(i,r.getWindow()),t=!0;var o=Je(i,r.getWindow());(n=o>=((null==e?void 0:e.pageCount)||1))&&function(e,t){t.sessionStorage.setItem(Ye(e),"0")}(i,r.getWindow())}return n}}}var Ke="UrlRegex";function Xe(e){return{name:Ke,buildTriggers:function(e){return[]},check:function(t,n){var i=n.getWindow().location.toString().match(e.regex);return k(i)&&i.length>0}}}var $e="WindowHeightDistance";function et(e){return{name:$e,buildTriggers:function(e){return[Re(e)]},check:function(t,n){var i=n.getWindow();return i.scrollY>=i.innerHeight*((null==e?void 0:e.windowHeightDistance)||0)}}}var tt="WindowValue";function nt(e){return{name:tt,buildTriggers:function(){return[]},check:function(t,n){return n.viewportInfo.browserWindow[e.name]===e.value}}}var it="LocalStorageValue";function rt(e){return{name:it,buildTriggers:function(){return[]},check:function(t,n){var i=n.viewportInfo.browserWindow.localStorage.getItem(e.name);return void 0===e.value?null==i:n.viewportInfo.browserWindow.localStorage.getItem(e.name)===e.value}}}var ot,st="MetaTagProperty";function at(e){var t=e.metaTagKey,n=e.metaTagValues;return{name:st,buildTriggers:function(){return[]},check:function(e,i){var r=i.viewportInfo.browserWindow.document.querySelector('meta[name="'.concat(t,'"]'));return!I(r)&&n.includes(r.getAttribute("content"))}}}var ct=(u(u(u(u(u(u(u(u(u(u(ot={},Be,Oe),ze,Ne),Ge,qe),Ve,(function(e){return{name:Ve,buildTriggers:function(e){return[Re(e)]},check:function(t,n){var i=n.slotRegistry.getSlot(t);if(i){var r=n.viewportInfo.getCurrentBreakpoint().name,o=e[r];return!(!I(o)&&!1!==o)||i.isInView(o)}return!1}}})),We,(function(){return{name:We,buildTriggers:function(e){return[He(e)]},check:function(e,t){var n,i=null===(n=t.slotRegistry.getSlot(e))||void 0===n?void 0:n.zoneInstanceId;return k(i)&&t.zoneRegistry.isManuallyActivated(i)}}})),Ze,Qe),Ke,Xe),$e,et),tt,nt),it,rt),u(ot,st,at)),ut=u(u(u(u(u(u(u(u(u(u({},je,(function(e){return{name:je,buildTriggers:function(e){return[Le(e)]},check:function(t,n){return-1!==e.state.indexOf(document.readyState)}}})),Be,Oe),ze,Ne),$e,et),Ke,Xe),Ge,qe),Ze,Qe),tt,nt),it,rt),st,at),dt=function(){return c((function e(t){s(this,e),this.opts=t,this.slotConditionFactory=null,this.insertConditionFactory=null}),[{key:"getSlotConditionFactory",value:function(){return this.slotConditionFactory||(this.slotConditionFactory=Pe(this.opts.environmentBootstrapper.getLogger(),ct)),this.slotConditionFactory}},{key:"getInsertConditionFactory",value:function(){return this.insertConditionFactory||(this.insertConditionFactory=Pe(this.opts.environmentBootstrapper.getLogger(),ut)),this.insertConditionFactory}}])}();var lt="fuseConfigOverride",gt=function(){return c((function e(t,n){s(this,e),this.bootstrappers=t,this.overriddenInjectedConfig=n,this._computed={}}),[{key:"isDevelopmentMode",value:function(){return!k(this.rollupInjectedConfig)||0==this.rollupInjectedConfig.settings.publication_metadata.publication_id}},{key:"getAccountSettings",value:function(){return this.injectedConfig.settings}},{key:"zoneCustomiser",get:function(){return this.injectedConfig.zoneCustomiser}},{key:"onLoadCallback",get:function(){return this.injectedConfig.onLoadCallback}},{key:"in2wHook",get:function(){return this.injectedConfig.in2wHook}},{key:"admiralScript",get:function(){return this.injectedConfig.admiralScript}},{key:"geo",get:function(){return"object"===m(e=this.injectedConfig.geo)&&null!==e?this.injectedConfig.geo:void 0;var e}},{key:"injectedConfig",get:function(){var e=this;return pt("injectedConfig",this._computed,(function(){var t,n=e.bootstrappers.environmentBootstrapper.getBrowserWindowObject();if(e.isDevelopmentMode()&&n[lt])return n[lt];var i=null!==(t=e.overriddenInjectedConfig)&&void 0!==t?t:e.rollupInjectedConfig;if(!i)throw new Error("No injected config found");return i}))}},{key:"getBreakpoints",value:function(){return e=this.getAccountSettings(),t={},e.fuse_breakpoints.xl&&(t.xl=e.fuse_breakpoints.xl),e.fuse_breakpoints.l&&(t.l=e.fuse_breakpoints.l),t.m=e.fuse_breakpoints.m,t.s=e.fuse_breakpoints.s,t.xs=e.fuse_breakpoints.xs,t;var e,t}},{key:"isUseBrowserOuterwidth",value:function(){var e,t;return null!==(t=null!==(e=this.qpr.isUseBrowserOuterwidth())&&void 0!==e?e:this.getAccountSettings().fuse_settings.isUseBrowserOuterwidth)&&void 0!==t&&t}},{key:"qpr",get:function(){var e=this;return pt("qpr",this._computed,(function(){return function(e,t){var n=function(n){var i=t(n)[1];if(i){var r=parseInt(i);if(Number.isInteger(r))return r;e.info("[SETTINGS]: Could not parse ".concat(n," with value ").concat(i," as a number"))}return null},i=function(n){var i=t(n)[1];if(I(i))return null;var r=/^(false|true|1|0)$/i.test(i)?Boolean(/^(true|1)$/i.test(i)):null;return I(r)&&e.info("[SETTINGS] Could not parse ".concat(n," with value: ").concat(i," as a boolean")),r},r=function(e){return t(e)[1]||""},o=function(e){var t=r(e);return t?t.split(","):null};return{getDelayInit:function(){return n("fuseDelayInit")},getDelayQuantcastInit:function(){return n("fuseDelayQuantcastInit")},getDelayGptInit:function(){return n("fuseDelayGptInit")},getDelayPrebidInit:function(){return n("fuseDelayPrebidInit")},getDelayUamInit:function(){return n("fuseDelayUamInit")},isMcmOff:function(){return i("fuseMcmOff")},isEnablePrebidServer:function(){return i("fuseEnablePrebidServer")},isTestCreativesQuery:function(){return i("fuseTestCreatives")},isUseBrowserOuterwidth:function(){return i("fuseUseBrowserOuterwidth")},disableCollapseEmptyDivs:function(){return i("fuseDisableCollapseEmptyDivs")},disableYandexSticky:function(){return i("fuseDisableYandexSticky")},allowedBiddersInNewBids:function(){return o("fuseAllowedBiddersInNewBids")},isUseBackwardCompatibleNaming:function(){return i("fuseUseBackwardCompatibleNaming")},queryParamAsNumber:n,queryParamAsBoolean:i,queryParamAsString:r,queryParamAsStringList:o,queryParamAsExperimentSetting:function(t){var n=r(t);if(!I(n)&&""!==n){if("true"===n||"false"===n)return"true"===n;var i=parseInt(n,10);if(Number.isInteger(i))return i;e.info("[SETTINGS] Could not parse ".concat(t," with value: ").concat(n," as a number"))}},delayCall:function(t,n,i){t&&t>0?(e.info("[DELAY]: Delaying by ".concat(t,"ms to ").concat(n)),setTimeout(i,t)):i()},getUnitsAttributesFromParams:function(e,t){var n=new RegExp("^fuse_(\\d+)_".concat(e,"(\\.\\w+|)$"),"i"),i=t.search.split(/[?&]/).filter((function(e){return""!==e})).map((function(e){return e.split("=")})).filter((function(e){return n.test(e[0])})),r={};return i.forEach((function(e){var t=n.exec(e[0]);if(null==t?void 0:t[1]){var i=decodeURIComponent(e[1]);"true"===e[1]?i=!0:"false"===e[1]&&(i=!1);var o=t[1];if(void 0===r[o]&&(r[o]={}),t[2]){var s=t[2].substring(1);r[o][s]=i}}})),r}}}(e.bootstrappers.environmentBootstrapper.logger,(function(t){return e.bootstrappers.environmentBootstrapper.getQueryParam(t)}))}))}},{key:"rollupInjectedConfig",get:function(){return pt("rollupInjectedConfig",this._computed,(function(){return e}))}}])}();function pt(e,t,n){return t[e]||(t[e]=n()),t[e]}
/**
     * @preserve FastClick: polyfill to remove click delays on browsers with touch UIs.
     *
     * @codingstandard ftlabs-jsv2
     * @copyright The Financial Times Limited [All Rights Reserved]
     * @license MIT License (see LICENSE.txt)
     */var ft=function(){return c((function e(t,n){var i=this;if(s(this,e),this.layer=t,this.logger=n,this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.lastClickTime=0,this.cancelNextClick=!1,this.touchBoundary=10,this.tapDelay=200,this.tapTimeout=700,t.addEventListener("click",(function(e){return i.onClick(e)}),!0),t.addEventListener("touchstart",(function(e){return i.onTouchStart(e)}),!1),t.addEventListener("touchmove",(function(e){return i.onTouchMove(e)}),!1),t.addEventListener("touchend",(function(e){return i.onTouchEnd(e)}),!1),t.addEventListener("touchcancel",(function(){return i.onTouchCancel()}),!1),"function"==typeof t.onclick){this.logger.debug("[FASTCLICK] re-using existing onclick");var r=t.onclick;t.addEventListener("click",(function(e){r.call(i,e)}),!1),t.onclick=null}this.logger.debug("[FASTCLICK] FastClick enabled")}),[{key:"needsClick",value:function(e){switch(e.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(e.disabled)return!0;break;case"input":if("file"===e.type||e.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(e.className)}},{key:"needsFocus",value:function(e){switch(e.nodeName.toLowerCase()){case"textarea":case"select":return!0;case"input":switch(e.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!e.disabled&&!e.readOnly;default:return/\bneedsfocus\b/.test(e.className)}}},{key:"sendClick",value:function(e,t){document.activeElement&&document.activeElement!==e&&document.activeElement.blur();var n=t.changedTouches[0],i=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window,screenX:n.screenX,screenY:n.screenY,clientX:n.clientX,clientY:n.clientY,ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1,button:0,relatedTarget:null});i.forwardedTouchEvent=!0,e.dispatchEvent(i),this.logger.debug("[FASTCLICK] Sent click event to element ".concat(e.tagName))}},{key:"focus",value:function(e){if(e.setSelectionRange&&0!==e.type.indexOf("date")&&"time"!==e.type&&"month"!==e.type&&"email"!==e.type){var t=e.value.length;e.setSelectionRange(t,t)}else e.focus()}},{key:"updateScrollParent",value:function(e){var t=e.fastClickScrollParent;if(!t||!t.contains(e)){var n=e;do{if(n.scrollHeight>n.offsetHeight){t=n,e.fastClickScrollParent=n;break}n=n.parentElement}while(n)}t&&(t.fastClickLastScrollTop=t.scrollTop)}},{key:"getTargetElementFromEventTarget",value:function(e){return e.nodeType===Node.TEXT_NODE?e.parentNode:e}},{key:"onTouchStart",value:function(e){if(e.targetTouches.length>1)return!0;var t=this.getTargetElementFromEventTarget(e.target),n=e.targetTouches[0],i=window.getSelection();return!(!i.rangeCount||i.isCollapsed)||(n.identifier&&n.identifier===this.lastTouchIdentifier?(e.preventDefault(),!1):(this.lastTouchIdentifier=n.identifier,this.updateScrollParent(t),this.trackingClick=!0,this.trackingClickStart=e.timeStamp,this.targetElement=t,this.touchStartX=n.pageX,this.touchStartY=n.pageY,e.timeStamp-this.lastClickTime<this.tapDelay&&e.preventDefault(),!0))}},{key:"touchHasMoved",value:function(e){var t=e.changedTouches[0],n=this.touchBoundary;return Math.abs(t.pageX-this.touchStartX)>n||Math.abs(t.pageY-this.touchStartY)>n}},{key:"onTouchMove",value:function(e){this.trackingClick&&(this.targetElement!==this.getTargetElementFromEventTarget(e.target)||this.touchHasMoved(e))&&(this.trackingClick=!1,this.targetElement=null)}},{key:"findControl",value:function(e){return void 0!==e.control?e.control:e.htmlFor?document.getElementById(e.htmlFor):e.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")}},{key:"onTouchEnd",value:function(e){var t=this.targetElement;if(!this.trackingClick)return!0;if(e.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(e.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;this.cancelNextClick=!1,this.lastClickTime=e.timeStamp;var n=this.trackingClickStart;this.trackingClick=!1,this.trackingClickStart=0;var i=t.tagName.toLowerCase();if("label"===i){var r=this.findControl(t);r&&(this.focus(t),t=r)}else if(this.needsFocus(t))return e.timeStamp-n>100||window.top!==window&&"input"===i?(this.targetElement=null,!1):(this.focus(t),this.sendClick(t,e),"select"!==i&&(this.targetElement=null,e.preventDefault()),!1);var o=t.fastClickScrollParent;return!(!o||o.fastClickLastScrollTop===o.scrollTop)||(this.needsClick(t)||(e.preventDefault(),this.sendClick(t,e)),!1)}},{key:"onTouchCancel",value:function(){this.trackingClick=!1,this.targetElement=null}},{key:"onMouse",value:function(e){return!this.targetElement||(!!e.forwardedTouchEvent||(!e.cancelable||(!(!this.needsClick(this.targetElement)||this.cancelNextClick)||(e.stopImmediatePropagation?e.stopImmediatePropagation():e.propagationStopped=!0,e.stopPropagation(),e.preventDefault(),!1))))}},{key:"onClick",value:function(e){if(this.trackingClick)return this.targetElement=null,this.trackingClick=!1,!0;if("submit"===e.target.type&&0===e.detail)return!0;var t=this.onMouse(e);return t||(this.targetElement=null),t}},{key:"destroy",value:function(){this.layer.removeEventListener("click",this.onClick,!0),this.layer.removeEventListener("touchstart",this.onTouchStart,!1),this.layer.removeEventListener("touchmove",this.onTouchMove,!1),this.layer.removeEventListener("touchend",this.onTouchEnd,!1),this.layer.removeEventListener("touchcancel",this.onTouchCancel,!1)}}])}(),ht=function(){return c((function e(t,n){s(this,e),this.browserWindow=t,this.logger=n,this.isTouching=!1,this.isMonitoring=!1,this.monitorTouchDetect()}),[{key:"monitorTouchDetect",value:function(){var e=this;this.isMonitoring||(this.browserWindow.addEventListener("touchstart",(function(){e.isTouching=!0})),this.browserWindow.addEventListener("touchend",(function(){e.isTouching=!1})),this.browserWindow.addEventListener("touchcancel",(function(){e.isTouching=!1})),this.isMonitoring=!0,this.logger.debug("[TOUCH]: Monitoring touch events"))}},{key:"getIsTouching",value:function(){return this.isTouching}},{key:"waitForTouchEnd",value:function(e){var t=this;if(!this.isTouching)return e();var n=setInterval((function(){if(t.logger.debug("[TOUCH]: Checking if user is touching"),!t.isTouching)return clearInterval(n),e()}),100)}}])}();function vt(e){return null===e?void 0:e}var bt=function(){return c((function e(t,n,i,r,o){s(this,e),this.logger=t,this.browserWindow=n,this.breakpoints=i,this.events=r,this.isUseOuterwidth=o,this.initBpWatch(),this.logger.debug("[VIEWPORT]: Initialised at breakpoint ".concat(this.getCurrentBreakpoint().name))}),[{key:"getCurrentBreakpoint",value:function(){return e=this.breakpoints,t=this.getViewportStatus().width,n=null,Object.entries(e).forEach((function(e){var i=h(e,2),r=i[0],o=i[1];t>=o&&(!n||o>n.size)&&(n={size:o,name:r})})),n;var e,t,n}},{key:"breakpointSupplier",value:function(){return this.getCurrentBreakpoint.bind(this)}},{key:"isNotXsBreakpoint",value:function(){return"xs"!==this.getCurrentBreakpoint().name}},{key:"getViewportStatus",value:function(){var e=this.browserWindow;return{width:this.isUseOuterwidth.field?e.outerWidth:e.innerWidth,innerHeight:e.innerHeight,outerHeight:e.outerHeight,hidden:e.document.hidden,offset:{x:e.scrollX,y:e.scrollY}}}},{key:"initBpWatch",value:function(){var e,t,n,i,r,o,s,a,c=this,u=this.getCurrentBreakpoint().size;this.browserWindow.addEventListener("resize",(e=500,t=function(){var e=c.getCurrentBreakpoint(),t=e.size,n=e.name,i=u!==t;return i?c.logger.debug("[VIEWPORT]: Window was resized, new dimensions: ".concat(JSON.stringify(c.getViewportStatus()),". The breakpoint was changed to ").concat(n)):c.logger.debug("[VIEWPORT]: Window was resized to ".concat(JSON.stringify(c.getViewportStatus()),". The breakpoint was unchanged at ").concat(n)),u=t,c.events.onWindowResized.emit({crossedBp:i,name:n,currentFrom:t})},a=function(){var c=Date.now()-o;c<e&&c>=0?n=setTimeout(a,e-c):(n=null,s=t.apply(r,i),n||(r=i=null))},function(){return r=this,i=arguments,o=Date.now(),n||(n=setTimeout(a,e)),s}))}}])}();var mt=function(){return c((function e(t){s(this,e),this.initialiser=t,this._field=null}),[{key:"field",get:function(){var e;return null!==(e=this._field)&&void 0!==e?e:this._field=this.initialiser()}}])}();function St(e){var t={};function n(t){var n=e.document.createElement("div");return n.innerHTML=t,n.firstElementChild}return{createDivElement:function(e,i){return n('<div id="'.concat(function(e){t[e]||(t[e]=0);return"fuse-injected-".concat(e,"-").concat(++t[e])}(e),'" data-fuse="').concat(e,'" data-fuse-injected-at="').concat((new Date).getTime(),'" class="').concat(i,'"></div>'))},toHTML:n,insertStyles:function(t,n){var i=e.document.createElement("div");i.innerHTML='<style id="'.concat(t,'">').concat(n,"</style>"),e.document.querySelector("body").insertAdjacentElement("beforeend",i.firstElementChild)}}}var yt=function(){return c((function e(t){s(this,e),this.opts=t}),[{key:"getFuseDivElementFactory",value:function(){return this.fuseDivElementFactory||(this.fuseDivElementFactory=St(this.opts.environmentBootstrapper.getBrowserWindowObject())),this.fuseDivElementFactory}},{key:"getTouchObserver",value:function(){return this.touchObserver||(this.touchObserver=new ht(this.opts.environmentBootstrapper.getBrowserWindowObject(),this.opts.environmentBootstrapper.getLogger())),this.touchObserver}},{key:"enableFastClick",value:function(){this.fastClick||(this.fastClick=new ft(this.opts.environmentBootstrapper.getBrowserWindowObject().document.body,this.opts.environmentBootstrapper.getLogger()))}},{key:"lazyIsUseBrowserOuterwidth",value:function(){var e=this;return new mt((function(){return e.opts.configBootstrapper.isUseBrowserOuterwidth()}))}},{key:"getViewportInfo",value:function(){return this.viewportInfo||(this.viewportInfo=new bt(this.opts.environmentBootstrapper.getLogger(),this.opts.environmentBootstrapper.getBrowserWindowObject(),this.opts.configBootstrapper.getBreakpoints(),this.opts.evtBootstrapper.eventHub,this.lazyIsUseBrowserOuterwidth())),this.viewportInfo}}])}(),It=["verbose","debug","info","warn","error","off"];var xt=function(){return c((function e(t){s(this,e),this.sessionId=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20,t="",n=0;n<e;++n)t+=Math.floor(16*Math.random()).toString(16);return t}(),this._logger=null==t?void 0:t.logger,this.browserWindow=null==t?void 0:t.browserWindow}),[{key:"isInDebugMode",value:function(){return"true"===this.getQueryParam("fuse_debug")[1]}},{key:"getWindowLocation",value:function(){if(!this.location)try{this.location=this.getBrowserWindowObject().self.location}catch(e){this.location=this.getBrowserWindowObject().location}return this.location}},{key:"getFuseDob",value:function(){var e,t=this.getBrowserWindowObject().performance;return(null===(e=null==t?void 0:t.timing)||void 0===e?void 0:e.navigationStart)||t.timeOrigin}},{key:"getPackageMajorVersion",value:function(){return 2}},{key:"getBrowserWindowObject",value:function(){return k(this.browserWindow)||(this.browserWindow=window.self),this.browserWindow}},{key:"getQueryParam",value:function(e){var t=this.getWindowLocation().search.split(/[?&]/).filter((function(e){return""!==e})).map((function(e){return e.split("=")})).filter((function(t){return t[0]===e}));return t[0]||[]}},{key:"getMainLogPrefix",value:function(){return"FUSE"}},{key:"getLogLevel",value:function(){var e;if(this.isInDebugMode()||k(this.fuseDebugger))return"debug";if(null===(e=this.getQueryParam("fuse_log_level"))||void 0===e?void 0:e[1]){var t=this.getQueryParam("fuse_log_level")[1];return-1!==It.indexOf(t)?t:"off"}return"off"}},{key:"getLogger",value:function(){return this._logger||(this._logger=function(e,t,n){var i=[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"off",o=n;function s(){return o?" [".concat(Date.now()-o,"]"):""}function a(n){if("off"!==n){for(var o=arguments.length,a=new Array(o>1?o-1:0),c=1;c<o;c++)a[c-1]=arguments[c];var u=["[".concat(t,"]-").concat(a[0]).concat(s())].concat(v(a.slice(1)));"warn"!==n&&"error"!==n||(i.length>=1e3&&(i=[]),i.push({level:n,params:u})),"error"!==n&&It.indexOf(n)<It.indexOf(r)||e["verbose"!=n?n:"debug"].apply(null,u)}}return{setFuseDob:function(e){o=e},getTimestamp:s,callLogMethod:a,error:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];a.apply(void 0,["error"].concat(t))},warn:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];a.apply(void 0,["warn"].concat(t))},log:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];a.apply(void 0,["info"].concat(t))},info:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];a.apply(void 0,["info"].concat(t))},debug:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];a.apply(void 0,["debug"].concat(t))},setLogLevel:function(e){r=e},getLogLevel:function(){return r},getLogs:function(){return i}}}(this.getBrowserWindowObject().console,this.getMainLogPrefix(),this.getFuseDob(),this.getLogLevel())),this._logger}},{key:"logger",get:function(){return this.getLogger()}},{key:"getFuseDebugger",value:function(){if(x(this.fuseDebugger)){var e=this.getBrowserWindowObject().fuseDebugger;this.fuseDebugger=null!=e?e:null,this.fuseDebugger&&(this.fuseDebugger.connect(),this.getLogger().debug("[MONITORING]: Debugger attached"))}return this.fuseDebugger}},{key:"getSessionId",value:function(){return this.sessionId}}])}();function kt(e,t){var n={},i={},r=function(n){var i=n.map((function(e){return e.getSlotElementId()}));e.debug("[GPT-REGISTRY]: Calling googletag.destroySlots(".concat(JSON.stringify(i),")")),t.destroySlotsAsync(n)};function o(e){return e.toLowerCase()}function s(e){return e&&"string"==typeof e&&Array.isArray(i[o(e)])?i[o(e)]:[]}function a(e,t,i){var r=o(e);n[r]||(n[r]={}),n[r][t]=i}return{add:function(t,r){var s=o(t);Array.isArray(i[s])||(i[s]=[]),e.debug("[GPT-REGISTRY]: Added ".concat(s)),i[s].push(r);var a=n[s];a?(Object.keys(a).forEach((function(t){r.setTargeting(t,a[t]),e.debug("[GPT-REGISTRY]: Set targeting. zoneTemplateId: ".concat(s,", gpt slot id: ").concat(r.getSlotElementId(),", key: ").concat(t,", value: ").concat(a[t]))})),e.debug("[GPT-REGISTRY]: Applied targeting for ".concat(s," on newly added gpt slot - id: ").concat(r.getSlotElementId()))):e.debug("[GPT-REGISTRY]: No template targeting set for zoneTemplateId: ".concat(s))},purgeAll:function(){Object.keys(i).forEach((function(t){return function(t){var s=o(t);e.debug("[GPT REGISTRY]: Purging ".concat(s));var a=i[s];a&&(r(a),delete i[s],delete n[s])}(t)}))},purgeByElement:function(t,n){var a=s(t)||[],c=a.find((function(e){return e.getSlotElementId()===n}));c?(r([c]),i[o(t)]=a.filter((function(e){return e.getSlotElementId()!==n}))):e.debug("[GPT-REGISTRY]: Could could not destroy slot ".concat(n," because it has not been registered with GPT"))},getSlotsLength:function(){return Object.keys(i).length},getSlots:s,addTemplateTargetings:a,getTemplateTargetings:function(e){var t=o(e);return n[t]||null},setSlotTargetingById:function(t,n,i){a(t,n,i),e.debug("[GPT-REGISTRY]: Template targeting set. zoneTemplateId: ".concat(t,", key: ").concat(n,", value: ").concat(JSON.stringify(i))),s(t).forEach((function(r){try{r.setTargeting(n,i),e.debug("[GPT-REGISTRY]: Applied template targetings. slot id: ".concat(r.getSlotElementId(),", key: ").concat(n,", value: ").concat(JSON.stringify(i)))}catch(n){n instanceof Error?e.error("[GPT-REGISTRY]: Error occurred while individually setTargeting for slot ".concat(t,"."),n.message,n.stack):e.error("[GPT-REGISTRY]: Error of unexpected type occurred while individually setTargeting for slot ".concat(t,"."))}}))}}}function wt(){var e={},t={};function n(t){return e[t]||0}function i(e){return t[e]||0}return{getSlotRefreshCount:n,getTemplateUsageCount:i,incrementSlotRefreshCount:function(t){e[t]=n(t)+1},incrementTemplateUsageCount:function(e){t[e]=i(e)+1},resetCounts:function(){e={},t={}}}}var _t=function(){return c((function e(t,n){s(this,e),this.bootstrappers=t,this.overrides=n}),[{key:"getGptSlotRegistry",value:function(){return this.gptSlotRegistry||(this.gptSlotRegistry=kt(this.bootstrappers.environmentBootstrapper.getLogger(),this.gptManagerInitSafe)),this.gptSlotRegistry}},{key:"getGptManager",value:function(){return this.gptManager||(this.gptManager=$(this.bootstrappers.monitoringBootstrapper.getReporter(),this.bootstrappers.monitoringBootstrapper.getComponentStatusStore(),this.bootstrappers.monitoringBootstrapper.getDeviceInfo(),this.bootstrappers.environmentBootstrapper.logger,this.bootstrappers.environmentBootstrapper.getBrowserWindowObject(),this.bootstrappers.environmentBootstrapper.getWindowLocation(),this.bootstrappers.settingsBootstrapper.getSettings(),this.bootstrappers.evtBootstrapper.eventHub,this.getGptCountManager(),this.gptInitialiser)),this.gptManager}},{key:"gptManagerInitSafe",get:function(){return this.getGptManager()}},{key:"getGptCountManager",value:function(){return this.gptCountManager||(this.gptCountManager=wt()),this.gptCountManager}},{key:"gptInitialiser",get:function(){var e;return this._gptInitialiser||(k(null===(e=this.overrides)||void 0===e?void 0:e.gptInitialiser)?this._gptInitialiser=this.overrides.gptInitialiser:this._gptInitialiser=function(e,t){function n(){return e.googletag}return{unsafeGoogletag:n,pushToGPTQue:function(i){return t.debug("[GPT]: Queuing function for GPT"),X(e,t).cmd.push((function(){return i(n(),t)}))}}}(this.bootstrappers.environmentBootstrapper.getBrowserWindowObject(),this.bootstrappers.environmentBootstrapper.getLogger())),this._gptInitialiser}}])}(),Et=function(){return c((function e(t,n,i,r){var o=this;s(this,e),this.logger=t,this.reporter=n,this.events=i,this.componentState=r,this.state={tag_initialised:!1,on_low_dwell_page:!1},this.bidLibrariesCutoffMs=1e3,this.bidLibrariesCutoff=!1,i.onComponentInitEvent.subscribe((function(e){"gpt"!==e.component||"ready"!==e.state._tag||o.bidLibrariesCutoff||setTimeout((function(){o.isAnyBidLibraryReady()||(o.bidLibrariesCutoff=!0,o.logger.info("[FUSE][INIT] Bid libraries cutoff by timeout ".concat(o.bidLibrariesCutoffMs,"ms")),o.checkAndTrigger())}),o.bidLibrariesCutoffMs),o.checkAndTrigger()}))}),[{key:"getInitStatus",value:function(){var e=this.getComponentState("cmp"),t=this.getComponentState("docReadyScan");return{cmpOk:"ready"===e||"disabled"===e,docReady:"ready"==t||"disabled"===t,anyBidLibraryReady:this.isAnyBidLibraryReady()}}},{key:"isReadyForInit",value:function(){var e=this.getInitStatus();return 0===Object.values(e).filter((function(e){return!e})).length}},{key:"checkAndTrigger",value:function(){I(this.firedInitReady)&&this.isReadyForInit()&&(this.reporter.setStateStatus("initmanager_fired_auction_ready"),this.firedInitReady=this.reporter.getElapsedTime(),this.events.onInitManagerReady.emit({eventType:"onInitManagerReady"}))}},{key:"getComponentState",value:function(e){return this.componentState.state[e]._tag}},{key:"isComponentReady",value:function(e){return"ready"===this.getComponentState(e)}},{key:"isAnyBidLibraryReady",value:function(){if("disabled"!==this.getComponentState("yandex"))return this.isComponentReady("yandex");var e=this.getComponentState("prebid"),t=this.getComponentState("uam"),n=["ready","disabled"];return this.bidLibrariesCutoff||n.includes(e)&&n.includes(t)}},{key:"setTagInitialised",value:function(){this.state.tag_initialised=!0}},{key:"isTagInitialised",value:function(){return this.state.tag_initialised}},{key:"setIsLowDwellPage",value:function(e){this.state.on_low_dwell_page=e}},{key:"isLowDwellPage",value:function(){return this.state.on_low_dwell_page}}])}();function Ct(e,t){var n=!1;function i(){return t.fusetag.que}return{getQueue:i,clear:function(){var t=i().length;e.debug("[QUEUE]: Cleared fuse queue with ".concat(t," remaining items")),i().splice(0,t)},addItem:function(e){return i().push(e)},processBacklog:function(){if(n)e.error("[INIT] processBacklog() called, but it already ran");else{for(n=!0,e.log("[INIT]: Processing fuse queue with ".concat(i().length," pending items"));i().length>0;){var t=i().shift();if("function"==typeof t)try{e.debug("[INIT]: Calling queued function"),t.call(),t.called=!0}catch(t){e.error("[INIT]: Error calling queued function:",t.message,t.stack)}else e.error("[INIT]: Commands written into fusetag.que.push must be wrapped in a function")}i().push=function(t){if("function"==typeof t)try{t.call()}catch(t){e.error("Error processing command :",t.message,t.stack)}else e.error("Commands written into fusetag.que.push must be wrapped in a function");return 0}}}}}var Tt=function(){return c((function e(t){s(this,e),this.bootstrappers=t}),[{key:"getInitManager",value:function(){return this.initManager||(this.initManager=new Et(this.bootstrappers.environmentBootstrapper.getLogger(),this.bootstrappers.monitoringBootstrapper.getReporter(),this.bootstrappers.evtBootstrapper.eventHub,this.bootstrappers.monitoringBootstrapper.getComponentStatusStore())),this.initManager}},{key:"getFuseQueueManager",value:function(){return this.fuseQueueManager||(this.fuseQueueManager=Ct(this.bootstrappers.environmentBootstrapper.getLogger(),this.bootstrappers.environmentBootstrapper.getBrowserWindowObject())),this.fuseQueueManager}}])}();var At,Pt=function(e){return e[0]+"x"+e[1]},Rt=function(e){return e.split("x").map(Number)},Bt=function(e){var t=[1,1];return e.forEach((function(e){e[0]>t[0]&&(t[0]=e[0]),e[1]>t[1]&&(t[1]=e[1])})),t},Ot=function(e,t){return parseInt((100*(e/t-1)).toFixed())},zt=-1,Dt=function(e){addEventListener("pageshow",(function(t){t.persisted&&(zt=t.timeStamp,e(t))}),!0)},Mt=function(){var e=self.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0];if(e&&e.responseStart>0&&e.responseStart<performance.now())return e},Nt=function(){var e=Mt();return e&&e.activationStart||0},Lt=function(e,t){var n=Mt(),i="navigate";return zt>=0?i="back-forward-cache":n&&(document.prerendering||Nt()>0?i="prerender":document.wasDiscarded?i="restore":n.type&&(i=n.type.replace(/_/g,"-"))),{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:"v4-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:i}},jt=function(e,t,n){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var i=new PerformanceObserver((function(e){Promise.resolve().then((function(){t(e.getEntries())}))}));return i.observe(Object.assign({type:e,buffered:!0},n||{})),i}}catch(e){}},Ft=function(e,t,n,i){var r,o;return function(s){t.value>=0&&(s||i)&&((o=t.value-(r||0))||void 0===r)&&(r=t.value,t.delta=o,t.rating=function(e,t){return e>t[1]?"poor":e>t[0]?"needs-improvement":"good"}(t.value,n),e(t))}},Ut=function(e){requestAnimationFrame((function(){return requestAnimationFrame((function(){return e()}))}))},Gt=function(e){document.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState&&e()}))},qt=function(e){var t=!1;return function(){t||(e(),t=!0)}},Vt=-1,Ht=function(){return"hidden"!==document.visibilityState||document.prerendering?1/0:0},Wt=function(e){"hidden"===document.visibilityState&&Vt>-1&&(Vt="visibilitychange"===e.type?e.timeStamp:0,Yt())},Zt=function(){addEventListener("visibilitychange",Wt,!0),addEventListener("prerenderingchange",Wt,!0)},Yt=function(){removeEventListener("visibilitychange",Wt,!0),removeEventListener("prerenderingchange",Wt,!0)},Jt=function(){return Vt<0&&(Vt=Ht(),Zt(),Dt((function(){setTimeout((function(){Vt=Ht(),Zt()}),0)}))),{get firstHiddenTime(){return Vt}}},Qt=function(e){document.prerendering?addEventListener("prerenderingchange",(function(){return e()}),!0):e()},Kt=[1800,3e3],Xt=function(e,t){t=t||{},Qt((function(){var n,i=Jt(),r=Lt("FCP"),o=jt("paint",(function(e){e.forEach((function(e){"first-contentful-paint"===e.name&&(o.disconnect(),e.startTime<i.firstHiddenTime&&(r.value=Math.max(e.startTime-Nt(),0),r.entries.push(e),n(!0)))}))}));o&&(n=Ft(e,r,Kt,t.reportAllChanges),Dt((function(i){r=Lt("FCP"),n=Ft(e,r,Kt,t.reportAllChanges),Ut((function(){r.value=performance.now()-i.timeStamp,n(!0)}))})))}))},$t=[.1,.25],en=0,tn=1/0,nn=0,rn=function(e){e.forEach((function(e){e.interactionId&&(tn=Math.min(tn,e.interactionId),nn=Math.max(nn,e.interactionId),en=nn?(nn-tn)/7+1:0)}))},on=function(){return At?en:performance.interactionCount||0},sn=function(){"interactionCount"in performance||At||(At=jt("event",rn,{type:"event",buffered:!0,durationThreshold:0}))},an=[],cn=new Map,un=0,dn=[],ln=function(e){if(dn.forEach((function(t){return t(e)})),e.interactionId||"first-input"===e.entryType){var t=an[an.length-1],n=cn.get(e.interactionId);if(n||an.length<10||e.duration>t.latency){if(n)e.duration>n.latency?(n.entries=[e],n.latency=e.duration):e.duration===n.latency&&e.startTime===n.entries[0].startTime&&n.entries.push(e);else{var i={id:e.interactionId,latency:e.duration,entries:[e]};cn.set(i.id,i),an.push(i)}an.sort((function(e,t){return t.latency-e.latency})),an.length>10&&an.splice(10).forEach((function(e){return cn.delete(e.id)}))}}},gn=function(e){var t=self.requestIdleCallback||self.setTimeout,n=-1;return e=qt(e),"hidden"===document.visibilityState?e():(n=t(e),Gt(e)),n},pn=[200,500],fn=function(e,t){"PerformanceEventTiming"in self&&"interactionId"in PerformanceEventTiming.prototype&&(t=t||{},Qt((function(){var n;sn();var i,r=Lt("INP"),o=function(e){gn((function(){e.forEach(ln);var t=function(){var e=Math.min(an.length-1,Math.floor((on()-un)/50));return an[e]}();t&&t.latency!==r.value&&(r.value=t.latency,r.entries=t.entries,i())}))},s=jt("event",o,{durationThreshold:null!==(n=t.durationThreshold)&&void 0!==n?n:40});i=Ft(e,r,pn,t.reportAllChanges),s&&(s.observe({type:"first-input",buffered:!0}),Gt((function(){o(s.takeRecords()),i(!0)})),Dt((function(){un=on(),an.length=0,cn.clear(),r=Lt("INP"),i=Ft(e,r,pn,t.reportAllChanges)})))})))},hn=[2500,4e3],vn={},bn=[800,1800],mn=function e(t){document.prerendering?Qt((function(){return e(t)})):"complete"!==document.readyState?addEventListener("load",(function(){return e(t)}),!0):setTimeout(t,0)},Sn=function(e,t){t=t||{};var n=Lt("TTFB"),i=Ft(e,n,bn,t.reportAllChanges);mn((function(){var r=Mt();r&&(n.value=Math.max(r.responseStart-Nt(),0),n.entries=[r],i(!0),Dt((function(){n=Lt("TTFB",0),(i=Ft(e,n,bn,t.reportAllChanges))(!0)})))}))},yn=this&&this.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n},In=function(e){var t,n,i;if("LCP"===e.name)i=null===(t=e.entries[0])||void 0===t?void 0:t.element;else if("CLS"===e.name){var r=e.entries.reduce((function(e,t){return!e||t.value>e.value?t:e}),void 0);i=null===(n=null==r?void 0:r.sources[r.sources.length-1])||void 0===n?void 0:n.node}else if("INP"===e.name){var o=e.entries.reduce((function(e,t){return!e||t.duration>e.duration?t:e}),void 0);i=null==o?void 0:o.target}return i?function(e){var t,n;if(!(null==e?void 0:e.tagName)||!(null==e?void 0:e.classList))return"";var i=e.tagName.toLowerCase(),r=e.id?" #".concat(e.id):"",o=e.classList.length>0?" .".concat(e.classList.value):"",s=null!==(n=null===(t=e.style)||void 0===t?void 0:t.cssText)&&void 0!==n?n:"",a=e.getAttribute("data-fuse"),c=a?' [data-fuse="'.concat(a,'"]'):"";return"".concat(i).concat(r).concat(o).concat(c," ").concat(s).trim()}(i):void 0};function xn(e,t,n,i,r,o,s,a,c,u,d,l){var g=u.getFuseCDN(),p=u.getFuseCDNPlatform(),f=u.getFuseUUID(),b=u.getFuseId(),y=u.getPublicationId(),I=u.isYandexEnabled()?"yandex":"gpt",x=u.getTenantCode(),k=u.getAccountCode(),w=u.isBidCacheEnabled(),_=u.getPrebidTelemetrySampleRate(),E=u.getSlotRequestTelemetrySampleRate(),T=u.getPrebidAdRenderSucceededTelemetrySampleRate(),A=Object.assign(Object.assign({},u.getYieldExperimentsTargeting()),u.getAdditionalYieldExperimentsTargeting()),P=void 0,z=new Set;function D(e){G("slot-request",{auid:e,srate:E},q()),function(e,i){n.debug("[STATS]: Record ".concat(i," event for fuse ").concat(b,", ad ").concat(e," on device ").concat(t.getDevice()," and browser ").concat(t.getBrowser()))}(e,"slot-request")}function M(e){G("page-transition",Object.assign({sdi:e},Y()))}function N(e,t){if(e.TCData){n.log("[TELEMETRY]: TCData found, sending cmp-determined with compressed TCData");var i=e.TCData;i.vendor,i.customVendorConsents,i.googleVendorConsents,Z(yn(i,["vendor","customVendorConsents","googleVendorConsents"]),"cmp-determined",1e4).then((function(n){var i=n.compressedData,r=n.errMsg;G("cmp-determined",Object.assign(Object.assign({},e),{TCData:i,errMsg:r,srate:t}),q())})).catch((function(e){n.error("[TELEMETRY]: Error sending cmp-determined event telemetry with compressed TCData: ".concat(e))}))}else n.log("[TELEMETRY]: TCData not found, sending cmp-determined without compression"),G("cmp-determined",Object.assign(Object.assign({},e),{srate:t}))}function L(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];n.info("".concat(t.map((function(e){return JSON.stringify(e)}))))}function j(){var e;if(!(z.size<=0)){L("Flushing request queue");var t,n,i=[],r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=S(e))||t){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}(z);try{for(r.s();!(n=r.n()).done;){var o=n.value;"web-vitals"===o.eventType&&(null===(e=o.record)||void 0===e?void 0:e.cwvRep)?(i.push.apply(i,v(o.record.cwvRep)),o.cmpData&&(t=o.cmpData)):G(o.eventType,o.record,o.cmpData)}}catch(e){r.e(e)}finally{r.f()}for(;i.length>=1;)G("web-vitals",{cwvRep:i.splice(0,10)},t);z.clear()}}function U(e,n,o){var c,d=(c=Object.assign(Object.assign(Object.assign({},n),{cmpj:null==o?void 0:o.jurisdiction,cmpdialog:null==o?void 0:o.dialogShown}),function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,o=[i.location.href,H()],c=o[0],d=o[1],l=u.getFuseGeo();return Object.assign({v:"1",ttm:Date.now(),cookie:i.navigator.cookieEnabled,res:"".concat(screen.width,"x").concat(screen.height),device:t.getDevice(),browser:t.getBrowser(),fuuid:f,fid:b,pubid:y,url:W(c),refr:W(d),sid:r,srate:n,adserver:I,etm:s.getElapsedTime(),e:e,tenant:x,sd:i.scrollY,fusecdn:p,tlt:s.tagLoadedMs,account:k,experiments:Object.keys(A).length?A:void 0,sf:u.isForceSafeFrames(),cz:a.getComboZoneState()},l?{geo_country:l.country,geo_state:l.state,geo_code:l.code}:{})}(e,null==n?void 0:n.srate)),Object.entries(c).reduce((function(e,t){var n=h(t,2),i=n[0],r=n[1];return r?("object"===m(r)&&(r=JSON.stringify(r)),"".concat(e?e+"&":"?").concat(encodeURIComponent(i),"=").concat(encodeURIComponent(r))):e}),"")),l="https://".concat(g);return"https://".concat(function(e){var t=/^(?:(?:https?|ftp):)\/*(?:[^@]+@)?([^:/#]+)/,n=t.exec(e);return n?n[1]:e}(l),"/telemetry/noconsent").concat(d)}function G(e,t,n){var i;u.getUseTelemetry()&&100*Math.random()<=(null!==(i=null==t?void 0:t.srate)&&void 0!==i?i:100)&&c(U(e,t,n))}function q(){var t=e.state.cmp;return{jurisdiction:B(t),personalisation:R(t),dialogShown:s.getIsCmpPromptShown()}}function V(e,t){var n=new RegExp("^[^#]*[?&]"+e+"=([^&#]*)").exec(t);return n?decodeURIComponent(n[1].replace(/\+/g," ")):null}function H(e){var t=V("referrer",i.location.href)||V("referer",i.location.href);if(t)return t;try{if(i.top)return i.top.document.referrer;if(i.parent)return i.parent.document.referrer}catch(e){}return i.document.referrer}function W(e){return e.replace(/#.*/,"").replace(/[{}]/g,"")}function Z(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:11e3;return i.CompressionStream?l(e).then((function(e){return e.length>r?(n.warn("[AUCTION]: Compressed payload too long: ".concat(e.length," bytes. It will not be sent.")),{errMsg:"Compressed payload too long"}):{compressedData:e}})).catch((function(e){return n.error("[AUCTION]: Error compressing event - ".concat(t," - telemetry: ").concat(e)),{errMsg:"Error compressing payload: ".concat(e.message)}})):Promise.resolve({errMsg:"CompressionStream API unavailable"})}function Y(){var t=e.state;return{prebid_ready_ms:O(t.prebid),uam_ready_ms:O(t.uam),gpt_ready_ms:O(t.gpt),cmp_load_finish_ms:s.cmpLoadFinishMs,cmp_determined_ms:O(t.cmp),cmp_gdpr_cached:s.cmpGdprCached}}return u.getUseTelemetry()&&(d.onSlotRequested.subscribe((function(e){var t=e.slot.getAdUnitPath(),n=u.getFuseSlots().filter((function(e){return e.slot===t}))[0];n&&D(n.id)})),d.onPageInit.subscribe((function(e){e.isPageTransition&&M(i.scrollY)})),d.onComponentInitEvent.subscribe((function(t){if("cmp"===t.component&&["ready","disabled"].includes(t.state._tag)){var n="ready"===t.state._tag?t.state:void 0,i=e.state;N({gdpr:"gdpr"===B(i.cmp)||!1,TCData:null==n?void 0:n.output.tcData,prebid_nry:"ready"!==i.prebid._tag||!1,uam_nry:"ready"!==i.uam._tag||!1,adserver_nry:"ready"!==i.gpt._tag&&"ready"!==i.yandex._tag||!1,docscan_nry:"ready"!==i.docReadyScan._tag||!1,no_cmp:"disabled"===t.state._tag,usp:"usp"===B(i.cmp)||!1,gppString:null==n?void 0:n.output.gppString},u.getCmpDeterminedSampleRate())}}))),{recordSlotRequest:D,recordPrebidAdRenderFailed:function(e){var t,r,o,s={bid:e.bid,size:null===(t=e.bid)||void 0===t?void 0:t.size,mediaType:null===(r=e.bid)||void 0===r?void 0:r.mediaType,bidder:null===(o=e.bid)||void 0===o?void 0:o.bidder,message:e.message,reason:e.reason,adId:e.adId};try{!s.bidder&&i.fusePbjs&&e.adId&&Object.values(i.fusePbjs.getBidResponses()).forEach((function(t){var n=t.bids.find((function(t){return t.adId===e.adId}));n&&(s.bidder=n.bidder,s.size=n.size,s.mediaType=n.mediaType)}))}catch(t){n.error("[TELEMETRY]: Error getting bid response for adId ".concat(e.adId,": ").concat(JSON.stringify(t)))}return Z(s,"prebid-ad-render-failed",3e3).then((function(e){return G("prebid-ad-render-failed",{pbAdRenderFailedGzipped:e.compressedData,errMsg:e.errMsg})}))},recordPrebidAdRenderSucceeded:function(e){var t,n,i;return Z({size:null===(t=e.bid)||void 0===t?void 0:t.size,mediaType:null===(n=e.bid)||void 0===n?void 0:n.mediaType,bidder:null===(i=e.bid)||void 0===i?void 0:i.bidder,adId:e.adId},"prebid-ad-render-succeeded",3e3).then((function(e){var t=e.compressedData,n=e.errMsg;return G("prebid-ad-render-succeeded",{pbAdRenderSucceededGzipped:t,srate:T,errMsg:n})}))},recordPrebidAuctionEnd:function(e,t,n){var i=Array.from(new Set(e.adUnits.map((function(e){return e.code}))));return Z({pbVer:t,aucId:e.auctionId,aucTimeout:e.timeout,aucStart:e.timestamp,aucEnd:e.auctionEnd,bidCacheEnabled:w,zones:i.map((function(t){var i=n.getSlot(t),r=o.getSlotRefreshCount(t),s=o.getTemplateUsageCount(null==i?void 0:i.zoneTemplateId);return{id:t,isRefresh:r>0,slotPrevReq:C(r),templatePrevReq:C(s),bidders:e.bidderRequests.filter((function(e){return e.bids.find((function(e){return e.adUnitCode===t}))})).map((function(e){return e.bidderCode})),bidsReceived:e.bidsReceived.filter((function(e){return e.adUnitCode===t})).map((function(e){return{bidder:e.bidder,connectType:e.source,mediaType:e.mediaType,size:e.size,timeToRespond:e.timeToRespond,cpm:e.cpm,currency:e.currency,dealId:e.dealId}})),bids:e.adUnits.filter((function(e){return e.code===t})).reduce((function(e,t){return e.concat(t.bids.map((function(e){return{mediaTypes:t.mediaTypes,bidder:e.bidder,params:e.params,bidSizes:e.bidSizes}})))}),[])}}))},"prebid-auction-end").then((function(e){var t=e.compressedData,n=e.errMsg;G("prebid-auction-end",Object.assign({pbAuctionGzipped:t,errMsg:n,srate:_},Y()))}))},recordFuseLoad:function(e){G("fuse-load",{sdi:e})},recordPageTransition:M,recordCmpDetermined:N,recordRogueBidderResponse:function(e,t,n){G("rogue-bidder-response",{slotId:e,bidder:t.bidder,pbTrId:t.transactionId,pbReqId:t.requestId,pbAdId:t.adId,pbCrId:t.creativeId,pbSize:t.size,size:Pt(n),wDiff:Ot(t.width,n[0]),hDiff:Ot(t.height,n[1])},q())},recordRogueAdxResponse:function(e,t,n){var i,r,o=t.size;G("rogue-bidder-response",{slotId:e,bidder:"adx",pbAdId:null===(i=t.sourceAgnosticLineItemId)||void 0===i?void 0:i.toString(),pbCrId:null===(r=t.sourceAgnosticCreativeId)||void 0===r?void 0:r.toString(),pbSize:Pt(o),size:Pt(n),wDiff:Ot(o[0],n[0]),hDiff:Ot(o[1],n[1])},q())},prepareRecordingWebVitals:function(){if(t.getBrowser()===F.Chrome){var e=function(e){var t,n,i,r=function(e){return{name:e.name,value:"".concat(e.value),rating:e.rating,id:e.id,delta:"".concat(e.delta),element:In(e)}}(e);L("[WEB-VITALS]: ".concat(JSON.stringify(r))),t="web-vitals",n={cwvRep:[r]},i=q(),z.add({eventType:t,record:n,cmpData:i}),clearTimeout(P),P=setTimeout((function(){j()}),5e3)};L("[WEB-VITALS]: Set up web vitals callbacks"),function(e,t){t=t||{},Xt(qt((function(){var n,i=Lt("CLS",0),r=0,o=[],s=function(e){e.forEach((function(e){if(!e.hadRecentInput){var t=o[0],n=o[o.length-1];r&&e.startTime-n.startTime<1e3&&e.startTime-t.startTime<5e3?(r+=e.value,o.push(e)):(r=e.value,o=[e])}})),r>i.value&&(i.value=r,i.entries=o,n())},a=jt("layout-shift",s);a&&(n=Ft(e,i,$t,t.reportAllChanges),Gt((function(){s(a.takeRecords()),n(!0)})),Dt((function(){r=0,i=Lt("CLS",0),n=Ft(e,i,$t,t.reportAllChanges),Ut((function(){return n()}))})),setTimeout(n,0))})))}(e,{reportAllChanges:!0}),Xt(e),fn(e),function(e,t){t=t||{},Qt((function(){var n,i=Jt(),r=Lt("LCP"),o=function(e){t.reportAllChanges||(e=e.slice(-1)),e.forEach((function(e){e.startTime<i.firstHiddenTime&&(r.value=Math.max(e.startTime-Nt(),0),r.entries=[e],n())}))},s=jt("largest-contentful-paint",o);if(s){n=Ft(e,r,hn,t.reportAllChanges);var a=qt((function(){vn[r.id]||(o(s.takeRecords()),s.disconnect(),vn[r.id]=!0,n(!0))}));["keydown","click"].forEach((function(e){addEventListener(e,(function(){return gn(a)}),{once:!0,capture:!0})})),Gt(a),Dt((function(i){r=Lt("LCP"),n=Ft(e,r,hn,t.reportAllChanges),Ut((function(){r.value=performance.now()-i.timeStamp,vn[r.id]=!0,n(!0)}))}))}}))}(e,{reportAllChanges:!0}),Sn(e)}else L("[WEB-VITALS]: Disabled web vitals recording for non-chrome browser")},prepareBackgroundRequestProcessor:function(){i.addEventListener("visibilitychange",(function(){"hidden"===i.document.visibilityState&&j()}))}}}var kn=function(e,t,n,i){return function(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.fetch?wn(e,t,n,i,r,o):_n(r,o)}},wn=function(e,t,n,i,r){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};return e.fetch(r,{method:o.method||"GET",credentials:"omit",mode:o.mode||"cors",keepalive:!0,headers:o.headers||{},body:o.body}).then((function(e){if(!e.ok&&"no-cors"!==o.mode)throw new Error("Network response was not ok");return e})).catch((function(e){var r=String(e).toLowerCase();if(r.includes("TypeError: NetworkError when attempting to fetch resource".toLowerCase()))t.warn("Unable to fire ".concat(i," request, possibly unable to outlive environment."));else if(r.includes("TypeError: Load failed".toLowerCase())&&n===F.Safari)t.warn("Unable to fire ".concat(i," request, unknown network error."));else{if(!r.includes("TypeError: Failed to fetch".toLowerCase()))throw e;t.warn("Unable to fire ".concat(i," request, possibly be blocked by AdBlock."))}}))},_n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(n,i){var r=new XMLHttpRequest;r.onload=function(){r.status>=200&&r.status<300?n(new Response(r.responseText,{status:r.status,statusText:r.statusText})):i(new Error("Request failed with status "+r.status))},r.onerror=function(){return i(new Error("Network error"))},r.open(t.method||"GET",e,!0),k(t.headers)&&Object.keys(t.headers).forEach((function(e){r.setRequestHeader(e,t.headers[e])})),r.send(t.body||null)}))};function En(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"gzip",n=JSON.stringify(e),i=(new TextEncoder).encode(n),r=new ReadableStream({start:function(e){e.enqueue(i),e.close()}}).pipeThrough(new CompressionStream(t));return new Response(r).arrayBuffer().then((function(e){return btoa(String.fromCharCode.apply(String,v(new Uint8Array(e))))}))}function Cn(e){var t={};return e.onPageReset.subscribe((function(){t={}})),e.onZoneDeleted.subscribe((function(e){var n;n=e.slotDivId,delete t[n]})),{getComboZoneState:function(){return 0===Object.keys(t).length?void 0:t},setComboZoneState:function(e,n){t[e]=n}}}var Tn=function(){return c((function e(t){s(this,e),this.bootstrappers=t}),[{key:"getDeviceInfo",value:function(){return this.deviceInfo||(this.deviceInfo=W(this.bootstrappers.environmentBootstrapper.getBrowserWindowObject())),this.deviceInfo}},{key:"getTelemetryRequestMethod",value:function(){return kn(this.bootstrappers.environmentBootstrapper.getBrowserWindowObject(),this.bootstrappers.environmentBootstrapper.getLogger(),F.Chrome,"telemetry")}},{key:"getTelemetry",value:function(){return this.telemetry||(this.telemetry=xn(this.getComponentStatusStore(),this.getDeviceInfo(),this.bootstrappers.environmentBootstrapper.getLogger(),this.bootstrappers.environmentBootstrapper.getBrowserWindowObject(),this.bootstrappers.environmentBootstrapper.getSessionId(),this.getGptCountManager(),this.getReporter(),this.getComboZoneState(),this.getTelemetryRequestMethod(),this.bootstrappers.settingsBootstrapper.getSettings(),this.bootstrappers.evtBootstrapper.eventHub,En)),this.telemetry}},{key:"getReporter",value:function(){return this.reporter||(this.reporter=function(e,t){var n,i,r,o,s,a,c=[],d=[],l=[],g=Date.now(),p=g-e,f=!1,h=!1,v=!1;function b(){return e}function m(){return(new Date).getTime()-b()}function S(e){var t=Date.now();c.push(u(u(u({},e,!0),"ts",t),"load_time_ms",t-b()))}function y(e,t){var n=Date.now();d.push(Object.assign(Object.assign({adEvent:e},t),{ts:n,event_time_ms:n-b()}))}return c.push(u(u(u({},"tag_loaded",!0),"ts",g),"load_time_ms",p)),t.onSlotLoaded.subscribe((function(e){f||(S("gpt_first_slot_loaded"),f=!0),y("gpt_slot_loaded_".concat(e.slot.getSlotElementId()))})),t.onSlotResponse.subscribe((function(e){h||(S("gpt_first_slot_render_ended"),h=!0),y("gpt_slot_render_ended_".concat(e.slot.getSlotElementId()))})),t.onImpressionViewable.subscribe((function(e){v||(S("gpt_first_impression_viewable"),v=!0),y("gpt_impression_viewable_".concat(e.slot.getSlotElementId()))})),{states:c,events:d,slotProblems:l,get firstGptRequestMs(){return n},get cmpLoadFinishMs(){return i},get cmpGdprCached(){return Boolean(r&&r<=10)},get cmpUspCached(){return Boolean(o&&o<=10)},get cmpGdprElapsedMs(){return r},get firstZoneMs(){return s},get hbAuctionStartMs(){return a},get tagLoadedMs(){return p},getSlotProblems:function(){return l},addSlotProblem:function(e){l.length>=1e3&&(l=l.slice(100)),l.push(Object.assign(Object.assign({},e),{time:m()}))},getFuseDob:b,getElapsedTime:m,reportFirstGptRequest:function(){n=m()},reportCmpLoadFinish:function(){i=i||m()},reportCmpGdprDetermined:function(){r=r||m()-i},reportCmpUspDetermined:function(){o=o||m()-i},reportFirstZone:function(){s=s||m()},reportHbAuctionStart:function(){a=a||m()},setStateStatus:S,addAdEvent:y,getIsCmpPromptShown:function(){return Boolean(c.find((function(e){return e.cmp_prompt_shown})))}}}(this.bootstrappers.environmentBootstrapper.getFuseDob(),this.bootstrappers.evtBootstrapper.eventHub)),this.reporter}},{key:"getComponentStatusStore",value:function(){return this.pluginStateStore||(this.pluginStateStore=function(e,t,n){var i=P.reduce((function(e,t){return e[t]={_tag:"pending"},e}),{});return{get state(){return i},updateState:function(r,o){i[r]=o,n.setStateStatus("component_init_".concat(r,"_").concat(o._tag)),"ready"===o._tag&&t.log("[INIT]: Component ".concat(r," is ready")),e.onComponentInitEvent.emit({component:r,state:o})}}}(this.bootstrappers.evtBootstrapper.eventHub,this.bootstrappers.environmentBootstrapper.getLogger(),this.getReporter())),this.pluginStateStore}},{key:"getGptCountManager",value:function(){return this.gptCountManager||(this.gptCountManager=wt()),this.gptCountManager}},{key:"getComboZoneState",value:function(){return this.comboZoneState||(this.comboZoneState=Cn(this.bootstrappers.evtBootstrapper.eventHub)),this.comboZoneState}}])}();function An(e,t,n,r){var o=n.getAssertiveYieldEntityId()||"7oDcS2a8NXtFyxnDn";return{init:function(){r.setStateStatus("assertiveyield_load_start"),t.info("[INIT]: Initialising AssertiveYield"),i({logger:t,window:e},function(e){return{name:"AssertiveYield",url:"//".concat(e,".ay.delivery/"),file:"s2s-client-v1.js"}}(o),(function(){t.info("[INIT]: AssertiveYield script loaded"),r.setStateStatus("assertiveyield_load_finish");var s,a=n.getPrebidClientBidders(),c=n.getPrebidServerBidders().reduce((function(e,t){var n=a.includes(t);return{hybridBidders:[].concat(v(e.hybridBidders),v(n?[t]:[])),serverOnlyBidders:[].concat(v(e.serverOnlyBidders),v(n?[]:[t]))}}),{hybridBidders:[],serverOnlyBidders:[]}),u=c.hybridBidders,d=c.serverOnlyBidders,l=Object.assign({orgId:"LiCgEBeRTmRgR6M2n",entityId:o,bidders:u,serverOnlyBidders:d,pbjs:"fusePbjs",continent:"NA",analytics:!0,aliasRegistry:null,suffix:"_s2s",abPercentage:95},n.isAssertiveYieldEnabled()?{customEndpoint:{us:"pbs-publift-us",eu:"pbs-publift-eu"}}:{});t.info("[INIT]: AssertiveYield config ".concat(JSON.stringify(l))),e.ayS2STag.init(Object.assign(Object.assign({},l),{callback:function(e){}})),r.setStateStatus("assertiveyieldanalytics_load_start"),t.info("[INIT]: Initialising AssertiveYield Analytics"),s=n.getFuseUUID(),e.assertive={debug:!0,entityId:o,analytics:{integrations:{webAnalytics:!0},logUnfilled:!0,custom:{layout:null,userState:null,custom_1:s,custom_2:null,custom_3:null,custom_4:null,custom_5:null,custom_6:null,custom_7:null,custom_8:null,custom_9:null,custom_10:null,custom_11:null,custom_12:null,custom_13:null,custom_14:null,custom_15:null}}},i({logger:t,window:e},function(e){return{name:"AssertiveYieldAnalytics",url:"//".concat(e,".ay.delivery/"),file:"client-v2.js"}}(o),(function(){t.info("[INIT]: AssertiveYieldAnalytics script loaded"),r.setStateStatus("assertiveyieldanalytics_load_finish")}))}))}}}var Pn=function(){return c((function e(t){s(this,e),this.bootstrappers=t}),[{key:"getIn2wSafeframe",value:function(){return this.in2wSafeframeLoader||(this.in2wSafeframeLoader=function(e,t,n){var i=1;return{getIn2wCallbackId:function(){return i+++""},enable:function(){n.debug("[INIT]: loadIn2wSafeframe"),e.addEventListener("message",(function(i){if(i.data&&"object"===m(i.data)&&void 0!==i.data.__i2wGPTEvent)try{var r=i.data.__i2wGPTEvent,o=r.i2wcbid,s=e.googletag.pubads().getSlots().find((function(e){return e.__i2wcbid===o}));if(s)switch(r.type){case"slotResponseReceived":n.debug("[I2w]: emitting slotResponseReceived event: ".concat(JSON.stringify(i))),t.onSlotResponse.emit(Object.assign(Object.assign({},r.responseInformation),{slot:s,i2wcbid:o}));break;case"slotRenderEnded":n.debug("[I2w]: emitting slotRenderEnded event: ".concat(JSON.stringify(i))),t.onSlotRender.emit(Object.assign(Object.assign({},r.responseInformation),{slot:s,i2wcbid:o}));break;case"slotOnload":n.debug("[I2w]: emitting slotOnload event: ".concat(JSON.stringify(i))),t.onSlotLoaded.emit(Object.assign(Object.assign({},r.responseInformation),{slot:s,i2wcbid:o}));break;default:n.warn("[I2w]: Unknown event type: ".concat(r.type,": ").concat(JSON.stringify(i)))}else n.warn("[I2w]: no slot found with i2wcbid: ".concat(o))}catch(e){n.error("[I2w]: Something wrong while processing safeframe gpt events: ".concat(e.toString()))}}))}}}(this.bootstrappers.environmentBootstrapper.getBrowserWindowObject(),this.bootstrappers.evtBootstrapper.eventHub,this.bootstrappers.environmentBootstrapper.getLogger())),this.in2wSafeframeLoader}},{key:"getGeoEdgeManager",value:function(){return this.geoEdgeManager||(this.geoEdgeManager=function(e,t,n,r){var o=n.getGeoEdgeAdvertiserIds(),s=n.getGeoEdgePubIds(),a=Boolean(o.length||s.length),c=n.getGeoEdgeKey()||"039fe8d9-5c1c-455e-812b-a926b44f77f9";function d(e){return e.reduce((function(e,t){return Object.assign(Object.assign({},e),u({},t,!0))}),{})}return{init:function(){r.setStateStatus("geoedge_load_start"),t.info("[INIT]: Initialising GeoEdge"),a&&t.info("[INIT]: GeoEdge advertiser or publisher IDs found, setting config"),e.grumi=Object.assign(Object.assign({},a?{cfg:{advs:d(o),pubIds:d(s)}}:{}),{key:c}),i({logger:t,window:e},function(e){return{name:"GeoEdge",url:"//rumcdn.geoedge.be/",file:"".concat(e,"/grumi-ip.js")}}(c),(function(){t.info("[INIT]: GeoEdge script loaded"),r.setStateStatus("geoedge_load_finish")}))}}}(this.bootstrappers.environmentBootstrapper.getBrowserWindowObject(),this.bootstrappers.environmentBootstrapper.getLogger(),this.bootstrappers.settingsBootstrapper.getSettings(),this.bootstrappers.monitoringBootstrapper.getReporter())),this.geoEdgeManager}},{key:"getAssertiveYieldManager",value:function(){return this.assertiveYieldManager||(this.assertiveYieldManager=An(this.bootstrappers.environmentBootstrapper.getBrowserWindowObject(),this.bootstrappers.environmentBootstrapper.getLogger(),this.bootstrappers.settingsBootstrapper.getSettings(),this.bootstrappers.monitoringBootstrapper.getReporter())),this.assertiveYieldManager}},{key:"getGameraManager",value:function(){return this.gameraManager||(this.gameraManager=function(e,t,n,r,o){return n.isCmpRequired()&&o.onComponentInitEvent.subscribe((function(n){"cmp"===n.component&&"ready"===n.state._tag&&n.state.output.allowPersonalisation&&(t.log("[Gamera]: Personalized ads allowed by CMP output ".concat(JSON.stringify(n.state.output))),e.gamera=e.gamera||{},e.gamera.cmd=e.gamera.cmd||[],e.gamera.cmd.push((function(){var e=new Event("gamera.consentProceed");window.dispatchEvent(e)})))})),{init:function(){var o;r.setStateStatus("gamera_load_start"),t.info("[INIT]: Initialising Gamera"),i({logger:t,window:e},(o=n.isCmpRequired(),{name:"Gamera",url:"//metrics.rapidedge.io/",file:"gamera.js?ltv=1&audience=1&tpcs=1&partner=publift".concat(o?"&wait=1":""),id:"__gamera__"}),(function(){t.info("[INIT]: Gamera script loaded"),r.setStateStatus("gamera_load_finish")}))}}}(this.bootstrappers.environmentBootstrapper.getBrowserWindowObject(),this.bootstrappers.environmentBootstrapper.getLogger(),this.bootstrappers.settingsBootstrapper.getSettings(),this.bootstrappers.monitoringBootstrapper.getReporter(),this.bootstrappers.evtBootstrapper.eventHub)),this.gameraManager}},{key:"getAdmiralManager",value:function(){return this.admiralManager||(this.admiralManager=function(e,t){return{init:function(n){e.debug("[ADMIRAL] Initialising Start"),t.setStateStatus("admiral_load_start");try{n(),e.debug("[ADMIRAL] Initialising Finish"),t.setStateStatus("admiral_load_finish")}catch(t){e.error("[ADMIRAL] Encountered error during evaluation",t,n)}}}}(this.bootstrappers.environmentBootstrapper.getLogger(),this.bootstrappers.monitoringBootstrapper.getReporter())),this.admiralManager}}])}(),Rn=["account","contract","network","zone"],Bn=["mandatory","optional"];function On(e,t,n){var i;try{var r=zn(e,t,n),o=function(e,t,n){var i,r,o,s;try{var a;try{a=Object.assign(Object.assign({},t.getNetworkParams()),{zone:null!==(r=null===(i=e.zoneTemplate)||void 0===i?void 0:i.networkZoneParameters)&&void 0!==r?r:{}})}catch(t){n.error("[PREBID][".concat(e.slotDivId,"]: [bidsGenerator.ts]-[getAllLevelParams]: Error getting network params: ").concat(t)),a={account:{},contract:{},network:{},zone:null!==(s=null===(o=e.zoneTemplate)||void 0===o?void 0:o.networkZoneParameters)&&void 0!==s?s:{}}}return n.debug("[PREBID][".concat(e.slotDivId,"]: [bidsGenerator.ts]-[getAllLevelParams]: slot ").concat(e.slotDivId," networkParams: ").concat(JSON.stringify(a))),a}catch(t){return n.error("[PREBID][".concat(e.slotDivId,"]: [bidsGenerator.ts]-[getAllLevelParams]: Failed to get all level params: ").concat(t)),{account:{},contract:{},network:{},zone:{}}}}(e,t,n),s=null!==(i=r.reduce((function(t,i){var r,s,a,c;try{var u=i.network_code,d={account:null!==(r=o.account[u])&&void 0!==r?r:{},contract:null!==(s=o.contract[u])&&void 0!==s?s:{},network:null!==(a=o.network[u])&&void 0!==a?a:{},zone:null!==(c=o.zone[u])&&void 0!==c?c:{}};return n.debug("[PREBID][".concat(e.slotDivId,"]: [bidsGenerator.ts]-[genBidsFromSlots]: slot ").concat(e.slotDivId," paramsByNetwork ").concat(u,": ").concat(JSON.stringify(d))),[].concat(v(t),v(function(e,t,n,i){var r;try{var o=t.network_code,s=(null!==(r=t.matched_schemas)&&void 0!==r?r:[]).reduce((function(t,r){var s,a;try{var c=r.bid_type,u={};return Rn.forEach((function(t){Bn.forEach((function(s){var a,d;try{var l=r.fields;Object.keys(null!==(d=null===(a=null==l?void 0:l[t])||void 0===a?void 0:a[s])&&void 0!==d?d:[]).forEach((function(r){var a,d,g,p,f,h,v;try{var b=null!==(p=null===(g=null===(d=null===(a=null==l?void 0:l[t])||void 0===a?void 0:a[s])||void 0===d?void 0:d[r])||void 0===g?void 0:g.renameTo)&&void 0!==p?p:r,m=null===(v=null===(h=null===(f=null==l?void 0:l[t])||void 0===f?void 0:f[s])||void 0===h?void 0:h[r])||void 0===v?void 0:v.defaultValue,S=null==n?void 0:n[t],y=null==S?void 0:S[r],I=null==y?void 0:y[c];(null==I?void 0:I.parameterValue)?u[b]=I.parameterValue:m?(i.debug("[PREBID][".concat(e.slotDivId,"]: [bidsGenerator.ts]-[genBidsFromSlotsByNetwork]: slot ").concat(e.slotDivId," missing ").concat(s," ").concat(t," param ").concat(r," for ").concat(o,", so using default value ").concat(m)),u[b]=m):i.debug("[PREBID][".concat(e.slotDivId,"]: [bidsGenerator.ts]-[genBidsFromSlotsByNetwork]: slot ").concat(e.slotDivId," missing ").concat(s," ").concat(t," param ").concat(r," for ").concat(o))}catch(t){i.error("[PREBID][".concat(e.slotDivId,"]: [bidsGenerator.ts]-[genBidsFromSlotsByNetwork]: Error processing param ").concat(r,": ").concat(t))}}))}catch(t){i.error("[PREBID][".concat(e.slotDivId,"]: [bidsGenerator.ts]-[genBidsFromSlotsByNetwork]: Error processing requirement ").concat(s,": ").concat(t))}}))})),[].concat(v(t),[{bidder:o,bidSizes:null!==(a=null===(s=r.matched_schema)||void 0===s?void 0:s.sizes)&&void 0!==a?a:[],params:u}])}catch(n){return i.error("[PREBID][".concat(e.slotDivId,"]: [bidsGenerator.ts]-[genBidsFromSlotsByNetwork]: Error processing schema: ").concat(n)),t}}),[]);return i.debug("[PREBID][".concat(e.slotDivId,"]: [bidsGenerator.ts]-[genBidsFromSlotsByNetwork]: slot ").concat(e.slotDivId," new bids for ").concat(o,": ").concat(JSON.stringify(s))),s}catch(t){return i.error("[PREBID][".concat(e.slotDivId,"]: [bidsGenerator.ts]-[genBidsFromSlotsByNetwork]: Failed to generate bids for network: ").concat(t)),[]}}(e,i,d,n)))}catch(i){return n.error("[PREBID][".concat(e.slotDivId,"]: [bidsGenerator.ts]-[genBidsFromSlots]: Error processing network: ").concat(i)),t}}),[]))&&void 0!==i?i:[];return n.debug("[PREBID][".concat(e.slotDivId,"]: [bidsGenerator.ts]-[genBidsFromSlots]: New bids list: ").concat(JSON.stringify(s))),s}catch(e){return n.error("[PREBID]: [bidsGenerator.ts]-[genBidsFromSlots]: Failed to generate bids: ".concat(e)),[]}}var zn=function(e,t,n){var i,r,o=null!==(r=null===(i=e.zoneTemplate)||void 0===i?void 0:i.matchedNetworks)&&void 0!==r?r:[];try{return n.debug("[PREBID][".concat(e.slotDivId,"]: [bidsGenerator.ts]-[getNetworks]: initial network list: ").concat(JSON.stringify(o))),n.debug("[PREBID][".concat(e.slotDivId,"]: [bidsGenerator.ts]-[getNetworks]: allowed bidders in new bids: ").concat(t.allowedBiddersInNewBids())),o=Dn(o,t.allowedBiddersInNewBids()),n.debug("[PREBID][".concat(e.slotDivId,"]: [bidsGenerator.ts]-[getNetworks]: final network list: ").concat(JSON.stringify(o))),o}catch(t){return n.error("[PREBID][".concat(e.slotDivId,"]: [bidsGenerator.ts]-[getNetworks]: Failed to get networks: ").concat(t)),o}},Dn=function(e,t){try{return t&&0!==t.length?(null!=e?e:[]).filter((function(e){return(null==e?void 0:e.network_code)&&t.includes(e.network_code)})):null!=e?e:[]}catch(e){return[]}},Mn=function(){return c((function e(t,n,i,r,o,a){var c=this;s(this,e),this.maybePBG=t,this.logger=n,this.settings=i,this.safeFramesCompatibilityChecker=r,this.gptCountManager=o,this.events=a,this.registeredSlots={},this.slotLatestBidders={},this.allowedSafeFrameBidders=[],this.settings.isUseSspRefreshExclusionEnabled()&&(this.logger.debug("[PREBID]: ssp-refresh-exclusion enabled. subscribing to prebid auction end event"),this.events.onPrebidAuctionEnd.subscribe((function(e){return c.processPrebidAuctionEnd(e)})))}),[{key:"processPrebidAuctionEnd",value:function(e){var t={};for(var n in e.bidsReceived.forEach((function(e){var n=e.adUnitCode;t[n]?t[n].push(e.bidderCode):t[n]=[e.bidderCode]})),t)this.setSlotLatestBidders(n,Array.from(new Set(t[n])))}},{key:"setSlotLatestBidders",value:function(e,t){var n=this.gptCountManager.getSlotRefreshCount(e)>2,i=this.registeredSlots[e];if(i){var r=this.slotLatestBidders[e];r&&t.length==r.length&&!n||(this.slotLatestBidders[e]=t,this.reregisterWithAllowedBidders(i,t,n))}else this.logger.debug("[PREBID][".concat(e,"]: Slot not registered, skipping force bidders"))}},{key:"registerPrebidUnit",value:function(e){this.settings.isForceAuctionBidSizes()?this.registerPrebidUnitWithForcedBidSizes(e):this.registerPrebidUnitWithSlotBidSizes(e),this.registeredSlots[e.slotDivId]=e}},{key:"getRegisteredSlot",value:function(e){return this.registeredSlots[e]}},{key:"removePrebidUnit",value:function(e){this.logger.debug("[PREBID][".concat(e.slotDivId,"]: Removing slot")),this.maybePBG.removeAdUnit(e.slotDivId),delete this.registeredSlots[e.slotDivId]}},{key:"registerPrebidUnitWithSlotBidSizes",value:function(e){var t=this.getPrebidUnitConfig(e,this.prepareMediaBids(e),e.sizesHb);this.logger.debug("[PREBID][".concat(e.slotDivId,"]: Registered with mediaTypes: ").concat(JSON.stringify(t.mediaTypes))),this.maybePBG.addAdUnits(t)}},{key:"registerPrebidUnitWithForcedBidSizes",value:function(e){var t=this;this.logger.debug("[PREBID][".concat(e.slotDivId,"]: Registering with forced bid sizes")),this.prepareMediaBids(e).forEach((function(n){var i,r=(null===(i=n.bidSizes)||void 0===i?void 0:i.length)?n.bidSizes.map((function(e){return Rt(e)})).filter((function(t){return 2===t.length&&t[0]&&t[1]&&e.sizesHb.some((function(e){return e[0]===t[0]&&e[1]===t[1]}))})):e.sizesHb,o=t.getPrebidUnitConfig(e,[n],r);t.logger.debug("[PREBID][".concat(e.slotDivId,"]: Registered ").concat(n.bidder," with mediaTypes: ").concat(JSON.stringify(o.mediaTypes))),t.maybePBG.addAdUnits(o)}))}},{key:"getPrebidUnitConfig",value:function(e,t,n){var i,r;return{code:e.slotDivId,mediaTypes:Object.assign(Object.assign(Object.assign({},this.settings.isPrebidBannerEnabled()&&this.getBannerTypeConfig(n)),this.settings.isPrebidNativeEnabled()&&(null===(i=e.mediaTypes)||void 0===i?void 0:i.includes("native"))&&this.getNativeTypeConfig(e)),this.settings.isPrebidVideoEnabled()&&(null===(r=e.mediaTypes)||void 0===r?void 0:r.includes("video"))&&this.getVideoTypeConfig(e)),bids:t}}},{key:"getBannerTypeConfig",value:function(e){return{banner:{sizes:e}}}},{key:"getNativeTypeConfig",value:function(e){return{native:{sendTargetingKeys:!1}}}},{key:"getVideoTypeConfig",value:function(e){return{video:Object.assign(Object.assign({},{context:"outstream",playerSize:[640,480],mimes:["video/mp4"],protocols:[2,3,4],playbackmethod:[2],maxduration:30,minduration:6,skip:1,linearity:2,api:[2]}),e.videoAttributes)}}},{key:"prepareMediaBids",value:function(e){var t,n=this,i=this.settings.isForceSafeFrames();i&&this.logger.debug("[PREBID][".concat(e.slotDivId,"]: Safe Frames compatibility filter is enabled"));var r=e.sizesHb.map((function(e){return Pt(e)})),o=[].concat(v(e.zoneTemplate.bids),v(On(e,this.settings,this.logger))).filter((function(t){return!n.settings.isUseSspRefreshExclusionEnabled()||!e.allowedBidders||e.allowedBidders.includes(t.bidder)})).filter((function(e){var t=e.bidSizes;return!(t&&t.length>0)||function(e,t){for(var n=[],i=new Set(t),r=0,o=e.length;r<o;++r)i.has(e[r])&&n.push(e[r]);return n}(r,t).length>0})).filter((function(t){var r;if(!i)return!0;var o=n.settings.isForceAuctionBidSizes()&&(null===(r=t.bidSizes)||void 0===r?void 0:r.length)?t.bidSizes.map((function(e){return Rt(e)})):e.sizesHb,s=n.isBidCompatible(t,o,e.breakpoint);return s||n.logger.debug("[PREBID][".concat(e.slotDivId,"]: Bidder ").concat(t.bidder," is not compatible with Safe Frames, excluding from the slot")),s}));if(this.settings.isPrebidVideoEnabled()&&(null===(t=e.mediaTypes)||void 0===t?void 0:t.includes("video"))){var s={w:640,h:480,context:"outstream",language:"en",mimes:["video/mp4"]};return o.map((function(e){return Object.assign(Object.assign({},e),{params:Object.assign(Object.assign(Object.assign({},s),e.params),"pubmatic"===e.bidder&&{outstreamAU:"renderer_test_pubmatic"})})}))}return o}},{key:"getBiddersFromCache",value:function(e){var t=this.maybePBG.getBidResponsesForAdUnitCode(e).bids,n=t.filter((function(e){return"rendered"!==(null==e?void 0:e.status)})).filter((function(e){return 1e3*e.ttl+e.responseTimestamp>Date.now()}));return this.logger.debug("[PREBID][".concat(e,"]: ssp-refresh-exclusion bids in cache ").concat(t.length,", nonExpiredBids ").concat(n.length)),Array.from(new Set(n.map((function(e){return e.bidder}))))}},{key:"reregisterWithAllowedBidders",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=n?this.getBiddersFromCache(e.slotDivId):[],r=i.length?Array.from(new Set(t.concat(i))):t,o=Array.from(new Set(e.zoneTemplate.bids.map((function(e){return e.bidder})).filter((function(e){return!r.includes(e)}))));this.logger.debug("[PREBID][".concat(e.slotDivId,"]: ssp-refresh-exclusion prebid reregister cache-").concat(n," allowedBidders ").concat(JSON.stringify(r),", excludedBidders ").concat(JSON.stringify(o))),this.removePrebidUnit(e),this.registerPrebidUnit(Object.assign(Object.assign({},e),{allowedBidders:r}))}},{key:"setAllowedSafeFrameBidders",value:function(e){this.allowedSafeFrameBidders=e}},{key:"isBidCompatible",value:function(e,t,n){return this.safeFramesCompatibilityChecker.isCompatible(e,t,n,this.allowedSafeFrameBidders)}}])}();function Nn(){var e=["ix","pubmatic","rubicon","connectad","33across","amx","stroeerCore","nobid","oms","seedtag","optidigital","vidazoo"];function t(e,t){var n=e.filter((function(e){return!t.some((function(t){var n=h(t,2),i=n[0],r=n[1];return i===e[0]&&r===e[1]}))}));return 0===n.length}return{isCompatible:function(n,i,r,o){return"triplelift"===n.bidder?function(e,n,i){if(!e.params.inventoryCode||!/^.+_\d+x\d+$/.test(e.params.inventoryCode))return!0;if(r=i,("xs"===r||"s"===r)&&t(n,[[300,250]]))return!0;var r;return t(n,[[970,250],[300,600]])}(n,i,r):!!function(t){return[].concat(e,v(t))}(o).includes(n.bidder)}}}var Ln="https://mpbs.rubiconproject.com/openrtb2/auction",jn="https://mpbs.rubiconproject.com/cookie_sync";function Fn(e){return e.hasOwnProperty("libLoaded")}function Un(e,t){var n=t.enabled,i=t.useCriteoId,r=t.useSharedId,o=t.usePairId;return n?{filterSettings:{iframe:{bidders:"*",filter:"include"}},enableOverride:!0,userIds:[].concat(v(i?[{name:"criteo"}]:[]),v(r?[qn(e)]:[]),v(o?[Vn(e)]:[]))}:{syncEnabled:!1}}function Gn(e,t,n,i,r){if(i.isResponsiveEnabled()&&!t){var o=null,s=[];return Object.keys(n).forEach((function(t){var r=n[t],a=o?o-1:null;e.debug("[PREBID]: Configured breakpoint ".concat(t," ").concat(r,"px to ").concat(a)),s.push({mediaQuery:"(min-width:".concat(r,"px)").concat(o?" and (max-width: ".concat(a,"px)"):""),sizesSupported:i.getSupportedSizes(t),labels:[t]}),o=r})),s}var a=r;return[{mediaQuery:"(min-width: ".concat(0,"px)"),sizesSupported:i.getSupportedSizes(a),labels:[a]}]}function qn(e){return e.debug("[PREBID]: Added shared id"),{name:"sharedId",storage:{name:"_sharedID",type:"cookie",expires:30}}}function Vn(e){return e.debug("[PREBID]: Added pair id"),{name:"pairId",params:{liveramp:{storageKey:"_lr_pairId"}}}}function Hn(e){var t=[];return e.getPrebidIasPubId()&&t.push({name:"ias",waitForIt:!0,params:{pubId:e.getPrebidIasPubId()}}),e.isUseGameraEnabled()&&t.push({name:"gamera",waitForIt:!0,params:{}}),t}function Wn(e,t,n,i,r,o,s,a){var c,u,d;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({enableSendAllBids:e&&!0===e.sendAllBids,priceGranularity:{buckets:[{max:3,increment:.01,precision:2},{max:10,increment:.1,precision:2},{max:50,increment:1,precision:2},{max:100,increment:10,precision:2}]},sizeConfig:Gn(t,n,i,r,o),userSync:Un(t,{enabled:r.isUserSyncEnabled(),useCriteoId:e.useCriteoId,useSharedId:r.isSharedIdEnabled(),usePairId:r.isPairIdEnabled()}),targetingControls:{addTargetingKeys:["SOURCE","DSP","CRID"]},eventHistoryTTL:r.getEventHistoryTTLOverride()},r.isCmpRequired()&&function(e,t){return e.debug("[PREBID]: Configured CMP module consentManagement"),{consentManagement:Object.assign({gdpr:{cmpApi:"iab",timeout:t.getUspTimeoutMillis(),defaultGdprScope:!0,allowAuctionWithoutConsent:!t.isStrictCmp()},usp:{cmpApi:"iab",timeout:t.getUspTimeoutMillis()}},t.isCmpV2Enabled()&&t.isGppEnabled()?{gpp:{cmpApi:"iab",timeout:t.getGppTimeoutMillis()}}:{})}}(t,r)),r.isGptPreAuctionEnabled()&&function(e){return e.debug("[PREBID]: Configured GPT Pre auction module"),{gptPreAuction:{enabled:!0,customPreAuction:function(e){var t;return null===(t=document.querySelector('div[data-fuse-slot="'.concat(e.code,'"]')))||void 0===t?void 0:t.getAttribute("data-gpid")}}}}(t)),r.isPrebidContextualSignalsEnabled()&&{ortb2:{site:{name:a.hostname,domain:a.hostname,cat:r.getFuseIndustry(),page:a.href,ref:s.document.referrer,keywords:null===(u=null===(c=s.document.querySelector('meta[name="keywords"]'))||void 0===c?void 0:c.getAttribute("content"))||void 0===u?void 0:u.split(",").map((function(e){return e.trim()}))}}}),e.sco&&{schain:{validation:"strict",config:{ver:"1.0",complete:1,nodes:[{asi:(d=e.sco).asi,sid:d.sellerId,hp:1}]}}}),e.prebidServerBidders.length>0&&function(e,t){return t.debug("[PREBID]: Enabling Prebid Server for ".concat(JSON.stringify(e))),{s2sConfig:{accountId:"20884",bidders:e,adapter:"prebidServer",enabled:!0,endpoint:Ln,syncEndpoint:jn,timeout:750,extPrebid:{cache:{vastxml:{returnCreative:!1}}}}}}(e.prebidServerBidders,t)),{currency:{adServerCurrency:"USD",granularityMultiplier:1,defaultRates:{AUD:{USD:.67}}}}),r.isBidCacheEnabled()&&{useBidCache:!0}),(r.getPrebidIasPubId()||r.isUseGameraEnabled())&&{realTimeData:{dataProviders:Hn(r)}}),"v5"===r.getTagRevision()&&{enableTIDs:!0})}function Zn(e,t,r,o,s,a,c,u,d,l,g,p,f){e.pushToPrebidQue((function(e){var n=o.pbjs;x(n)||!Fn(n)?o.pbjs=e:n.renderAd&&(n.renderAd=e.renderAd);var i=t.getPrebidSettings(),a=Wn({sendAllBids:i&&!0===i.sendAllBids,sco:t.getSco(),prebidServerBidders:[],useCriteoId:t.isCriteoIdEnabled()},r,u,d,t,g,o,s),c=G.getIdentityModule();t.isIdentityEnabled()&&c&&t.isUserSyncEnabled()&&(r.debug("[PREBID] Enabled identity module"),a=c.configPrebid(a),r.debug("[PREBID] Enabled ATS analytics module"),e.enableAnalytics([{provider:"atsAnalytics",options:{pid:t.getIdentitySettings().placementId}}]));var l=L.getId5Module();t.isId5Enabled()&&l&&t.isUserSyncEnabled()&&(r.debug("[PREBID] Enabled id5 module"),a=l.configPrebid(a)),function(e,t,n,i){t.debug("[PREBID]: Applied config settings ".concat(JSON.stringify(e))),n.setConfig(Object.assign(Object.assign({},e),i.isPrebidVideoEnabled()&&{cache:{url:"https://prebid.adnxs.com/pbc/v1/cache"},rubicon:{rendererConfig:{align:"center",position:"append",closeButton:!0,label:"Advertisement",collapse:!0}}})),"v5"===i.getTagRevision()&&(n.bidderSettings={standard:{storageAllowed:["cookie"]}})}(a,r,e,t),function(e,t,n){t.debug("[PREBID] Adding auctionEnd event listener"),e.onEvent("auctionEnd",(function(e){t.debug("[PREBID] auctionEnd event callback triggered"),n.onPrebidAuctionEnd.emit(e)})),t.debug("[PREBID] Adding adRenderFailed event listener"),e.onEvent("adRenderFailed",(function(e){t.debug("[PREBID] adRenderFailed event callback triggered"),n.onPrebidAdRenderFailed.emit(e)})),t.debug("[PREBID] Adding adRenderSucceeded event listener"),e.onEvent("adRenderSucceeded",(function(e){t.debug("[PREBID] adRenderSucceeded event callback triggered"),n.onPrebidAdRenderSucceeded.emit(e)}))}(e,r,p),r.debug("[PREBID]: Enabled prebid ".concat(JSON.stringify(a)))})),n(l.getDelayPrebidInit(),"simulate prebid download delay",r,(function(){var e=c.getElapsedTime();!function(e,t,n,r,o,s){o.setStateStatus("prebid_load_script_start");var a=Yn(t);if(!Fn(a)){var c=r.getPrebidHash(),u=r.getFuseCDN();return i({logger:e,window:t},Object.assign({name:"Prebid.org"},c?{url:"//".concat(u,"/prebid/"),file:"prebid-".concat(c,".js")}:{url:"//".concat(u,"/").concat(r.getTenantCode(),"/tags/").concat(n,"/").concat(r.getFuseId(),"/"),file:"prebid.js"}),(function(){e.debug("[INIT]: Prebid ".concat(Fn(a)&&a.libLoaded?"".concat(a.version," is loaded and ready"):"not loaded")),o.setStateStatus("prebid_onload_received"),s()}))}e.warn("[INIT]: Prebid ".concat(a.version," is already loaded skip loading it again"))}(r,o,a,t,c,(function(){f(e)}))}))}function Yn(e){return e.fusePbjs||(e.fusePbjs={que:[]}),e.fusePbjs}var Jn,Qn,Kn=function(){return c((function e(t){s(this,e),this.bootstrappers=t}),[{key:"getMaybePrebidGlobal",value:function(){return Yn(this.bootstrappers.environmentBootstrapper.getBrowserWindowObject())}},{key:"getPrebidSafeFramesCompatibilityChecker",value:function(){return this.prebidSafeFramesCompatibilityChecker||(this.prebidSafeFramesCompatibilityChecker=Nn()),this.prebidSafeFramesCompatibilityChecker}},{key:"getPrebidSlotRegistrator",value:function(){return this.prebidSlotRegistrator||(this.prebidSlotRegistrator=new Mn(this.getMaybePrebidGlobal(),this.bootstrappers.environmentBootstrapper.getLogger(),this.bootstrappers.settingsBootstrapper.getSettings(),this.getPrebidSafeFramesCompatibilityChecker(),this.bootstrappers.monitoringBootstrapper.getGptCountManager(),this.bootstrappers.evtBootstrapper.eventHub)),this.prebidSlotRegistrator}},{key:"getPrebidInitialiser",value:function(){return this.pbInitialised||(this.pbInitialised=function(e,t){function n(){return e}return{unsafePrebidGlobal:n,pushToPrebidQue:function(e){var i=n();i.que.push((function(){try{e(i)}catch(e){e instanceof Error?t.error("Error processing command :",e.message,e.stack):t.error("Error processing command :",e)}}))}}}(this.getMaybePrebidGlobal(),this.bootstrappers.environmentBootstrapper.getLogger())),this.pbInitialised}},{key:"pbm",get:function(){return this._pbm||(this._pbm=function(e){return{reset:function(){var t=e.unsafePrebidGlobal();Fn(t)&&t.removeAdUnit()}}}(this.getPrebidInitialiser())),this._pbm}},{key:"pbmInitialised",get:function(){return this.pbm}}])}();function Xn(e,t,n,i,r){var o=0;return{plan:function(s,a){e.debug("[PLANNER]: Planning auction with ".concat(s.map((function(e){return e.slotDivId})).join(", ")));var c,u,d,l,g="".concat(++o),p=function(t,n){var i=n.sort((function(e,t){var n=e.zoneDiv.getBoundingClientRect(),i=t.zoneDiv.getBoundingClientRect();return n.top-i.top})),r=i.map((function(e){return e.slotDivId}));return e.debug("[PLANNER][".concat(t,"]: Slot priority order: ").concat(JSON.stringify(r))),i}(g,s),f=a.maxViewports?function(e,t){var n=e.filter((function(e){return e.zoneDiv.getBoundingClientRect().top<t}));return w(n)?n:e}(p,(c=a.maxViewports,u=n.getViewportStatus(),d=u.offset,l=u.innerHeight,d.y+l+l*c)):p,h=t.getAuctionMaxSlots(),v=f.slice(0,h),b=function(o,s,a){var c=s.filter((function(e){return e.allowHeaderBidding}));if(!w(c))return void e.debug("[AUCTION][".concat(o,"]: No headerbidding slots enabled for this auction"));if(i())return void e.debug("[AUCTION][".concat(o,"]: Low dwell page detected, skipping headerbidding"));var u=n.getCurrentBreakpoint().name,d=t.isUamEnabledAtBP(u),l=function(n,i,o,s){var a="ready"===r.state.prebid._tag,c=t.getHbTimeout(i,s),u=t.isPrebidEnabledAtBP(i);if(!u)return void e.debug("[AUCTION][".concat(n,"]: Excluded prebid from the auction because it is not configured"));if(!a)return void e.info("[AUCTION][".concat(n,"]: Prebid has not finished loading and will be excluded from the auction"));return{timeout:c,slots:o}}(o,u,c,a.isRefresh),g=function(n,i,o){var s="ready"===r.state.uam._tag;if(!n)return void e.debug("[AUCTION][".concat(i,"]: UAM has been excluded from the auction because it is not configured"));if(!s)return void e.info("[AUCTION][".concat(i,"]: UAM has not finished loading and will be excluded from the auction"));if(0===o.length)return void e.debug("[AUCTION][".concat(i,"]: UAM has been excluded from the auction because no headerbidding slots are enabled"));if(t.isForceSafeFrames())return void e.info("[AUCTION][".concat(i,"]: UAM disabled due to forceSafeFrames"));return{slots:o}}(d,o,c);if(!k(l)&&!k(g))return void e.debug("[AUCTION][".concat(o,"]: No uam or prebid plan for this auction"));var p=g?1e3:0,f=l?l.timeout+250:0;return{cancelTimeout:Math.max(p,f),prebidPlan:l,uamPlan:g}}(g,v,a);return Object.assign({auctionId:g,breakpointName:n.getCurrentBreakpoint().name,hbPlan:b,slots:v},a.isRefresh?{isRefresh:!0,lastGptAuction:a.lastGptAuction,nextGptAuction:t.isMinimumPerceivedRefreshEnabled()?a.lastGptAuction+1e3*t.getMinGptRefreshInterval():void 0}:{})}}}function $n(e){var t,n=ei(e),i=function(e){var t,n,i,r;return null!==(r=null===(i=null===(n=null===(t=null==e?void 0:e.hbPlan)||void 0===t?void 0:t.uamPlan)||void 0===n?void 0:n.slots)||void 0===i?void 0:i.map((function(e){return e.slotDivId})))&&void 0!==r?r:[]}(e);return t=i,v(new Set([].concat(v(n),v(t))))}function ei(e){var t,n,i,r;return null!==(r=null===(i=null===(n=null===(t=null==e?void 0:e.hbPlan)||void 0===t?void 0:t.prebidPlan)||void 0===n?void 0:n.slots)||void 0===i?void 0:i.map((function(e){return e.slotDivId})))&&void 0!==r?r:[]}function ti(e,t,n,i,r,o,s){var a=[],c={},u=[],d=null,l=null,g=!1;function p(t){var n=r.getCurrentBreakpoint().name,i=t.filter((function(t){return o.isSlotEnabledForBreakpoint(t.zoneTemplate,n)?t.currentlyActive?t.zoneTemplate.attributes.afs?(e.info("[SCHEDULER]: Skipped ".concat(t.slotDivId," because it is AFS slot")),!1):!f(t)||(e.debug("[SCHEDULER]: Skipped ".concat(t.slotDivId," because it is already scheduled")),!1):(e.info("[SCHEDULER]: Skipped ".concat(t.slotDivId," because it is hasn't activated")),!1):(e.debug("[SCHEDULER]: Skipped ".concat(t.slotDivId," because no sizes mapped at the current breakpoint (").concat(n,")")),!1)}));if(i.length>0){var s=i.map((function(e){return e.slotDivId}));e.info("[SCHEDULER]: Added ".concat(s," to auction queue")),i.forEach((function(e){return a.push(e)}))}}function f(e){return a.filter((function(t){return t.slotDivId===e.slotDivId})).length>0}function h(e,t){return(e.zoneTemplate.originalZoneTemplateId||e.zoneTemplate.id)===t}function v(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],c=arguments.length>1?arguments[1]:void 0,u=a=a.filter((function(t){return!i.isDeletedSlot(t.slotDivId)||(e.info("[SCHEDULER]: Removed deleted slot ".concat(t.slotDivId," from queue")),!1)}));if(!w(u))return e.log("[SCHEDULER]: Auction will not run because no slots are queued"),[];var p=m();if(p.length>0){if(d){var f=a.map((function(e){return e.slotDivId}));return e.info("[SCHEDULER] Deferred the auction for ".concat(JSON.stringify(f)," because slots missing from the auction block: ").concat(JSON.stringify(p))),l=!0,[]}}else d&&(e.info("[SCHEDULER]: Auction block cleared, as requirements satisfied "),S());var h=n.plan(u,Object.assign({maxViewports:g?void 0:o.getMaxViewportsFirstAuction()},t?{isRefresh:!0,lastGptAuction:c}:{isRefresh:!1}));if(!g){var v=r.getViewportStatus(),y=v.offset.y+v.innerHeight,I=a.filter((function(e){return e.zoneDiv.getBoundingClientRect().top<y}));s.setTargeting("zone_count_above_vp",I.length.toString())}return a=a.filter((function(e){return-1===h.slots.indexOf(e)})),e.log("[SCHEDULER]: Starting auction with ".concat(h.slots.length," slots, ").concat(a.length," slots remaining")),b(h),h.slots.map((function(e){return e.slotDivId}))}function b(n){g=!0,t.executeAuction(n,(function(t){t===Qn.CANCELLED&&a.length>0&&(e.debug("[SCHEDULER][".concat(n.auctionId,"]: The auction was cancelled, initiating the next auction")),v())}),(function(t,i){return function(t,n){n!==Jn.GPT_LOADED||c[t]||(c[t]=!0,a.length>0&&(e.debug("[SCHEDULER][".concat(t,"]: The first slot has received a gpt-loaded event, initiating the next auction")),v()))}(n.auctionId,i)}))}function m(){return u.filter((function(e){return!(function(e){return void 0!==a.find((function(t){return h(t,e)}))}(e)||function(e){var t=i.getActiveSlots().find((function(t){return h(t,e)}));return!!t&&t.zoneTemplate.attributes.afs}(e))}))}function S(){u=[],l=null,d&&clearTimeout(d),d=null}return{triggerRefreshAuction:function(e,t){p([e]),v(!0,t)},queueSlots:p,isScheduled:f,runAuction:v,forceRunAuction:function(t){var i=n.plan([t],{isRefresh:!1});e.log("[SCHEDULER][".concat(i.auctionId,"]: Forcing auction for ").concat(t.slotDivId)),b(i)},reset:function(){S(),a=[]},clearPendingAuctions:function(){a=[]},setAuctionBlock:function(t,n){(u=t.filter((function(t){var n=o.getZoneTemplate(t);if(!n)return e.warn("[SLOTS][".concat(t,"]: Excluded from next-auction slot requirement, because the slot does not exist in this tag")),!1;if(n.excludeFromAuctionBlock)return e.warn("[SLOTS][".concat(t,"]: Excluded from next-auction slot requirement, because the slot has an activation condition")),!1;var i=r.getCurrentBreakpoint().name;return!!o.isSlotEnabledForBreakpoint(n,i)||(e.info("[SLOTS][".concat(t,"]: Excluded from next-auction slot requirement, because it is not enabled at the ").concat(i," breakpoint")),!1)}))).length>0?(e.info("[SCHEDULER]: Enabled auction block. Will not proceed until Zones with FuseIds ".concat(JSON.stringify(u)," are registered, or ").concat(n,"ms have elapsed")),d=setTimeout((function(){l?(e.warn("[SCHEDULER]: Auction block timeout reached, missing: ".concat(JSON.stringify(m()),". Running deferred auction")),S(),v()):(m().length>0&&e.warn("[SCHEDULER]: Auction block timeout reached, missing: ".concat(m())),S())}),n)):e.info("[SCHEDULER]: Did not enable AuctionBlock, because no (valid) slots specified")},getMissingAuctionBlockSlots:m,isAnyAuctionExecuted:function(){return g},clearAuctionBlock:S}}!function(e){e.GPT_REQUEST="GPT_REQUEST",e.GPT_RESPONSE="GPT_RESPONSE",e.GPT_RENDERED="GPT_RENDERED",e.GPT_LOADED="GPT_LOADED",e.CANCELLED="CANCELLED",e.SUPERSEDED="SUPERSEDED"}(Jn||(Jn={})),function(e){e[e.PREBID_REQUEST=0]="PREBID_REQUEST",e[e.PREBID_RESPONSE=1]="PREBID_RESPONSE",e[e.PREBID_SKIPPED=2]="PREBID_SKIPPED",e[e.UAM_REQUEST=3]="UAM_REQUEST",e[e.UAM_RESPONSE=4]="UAM_RESPONSE",e[e.UAM_SKIPPED=5]="UAM_SKIPPED",e[e.GPT_REQUEST=6]="GPT_REQUEST",e[e.CANCELLED=7]="CANCELLED"}(Qn||(Qn={}));var ni=function(e){return Array.isArray(e)?"fluid"!==e[0]:"fluid"!==e};function ii(e){var t=function(e){return e.filter(ni)}(e);return t.length>0?t:void 0}var ri=function(e,t){var n=function(e){if(e.includes("px")){var t=Number(e.split("px")[0]);return Number.isNaN(t)?void 0:t}};return{maxWidth:n(t.getComputedStyle(e).maxWidth),maxHeight:n(t.getComputedStyle(e).maxHeight)}};var oi=[{name:"H3@300x250",parentSize:[970,250],comboZoneSize:[300,250],computedSize:[920,250]},{name:"H2@300x250",parentSize:[970,250],comboZoneSize:[300,250],computedSize:[620,250]},{name:"V2@300x250",parentSize:[300,600],comboZoneSize:[300,250],computedSize:[300,510]}];function si(e){var t=h(e.split("@"),2),n=t[0],i=t[1];if(i)return{name:e,layout:"v"===n[0].toLowerCase()?"vertical":"horizontal",numZones:parseInt(n[1]),sizes:[Rt(i)]}}var ai="div",ci="data-fuse",ui="".concat(ai,"[").concat(ci,"]"),di="data-fuse-reset-at",li=function(){function e(t,n,i,r,o,a,c,u){var d=this;s(this,e),this.logger=t,this.browserWindow=n,this.templateSettings=i,this.fuseSlotFormatter=r,this.reporter=o,this.zoneCustomiserApi=a,this.comboZoneManager=c,this.comboZoneState=u,this.document=this.browserWindow.document,this.slotCounter={},this.zoneCounter={},this.canProcessSlot=function(e,t){var n=e.getAttribute("data-fuse-code"),i=e.getAttribute(di);if(t){if(n&&!i)return d.logger.debug("[SLOTS]: Skip ".concat(n," because it was already processed")),!1;n&&i&&d.logger.debug("[SLOTS]: Processing ".concat(n," again because it has been reset"))}else n&&d.logger.warn("[SLOTS]: Processing ".concat(n," again. This is likely to be an error, but preserved for backwards compatibility"));return!0},this.finalizeZones=function(t){var n=t.comboZoneEligible,i=t.templateToUse;return t.zoneDivs.map((function(t){var r,o,s=(null===(r=t.id)||void 0===r?void 0:r.trim())?null===(o=t.id)||void 0===o?void 0:o.trim():void 0,a=d.templateSettings.isUseBackwardCompatibleNaming()?i.gamAdUnitId:i.id,c=d.assignSlotDivId(a),u=d.assignZoneInstanceId(a),l=d.assignGpid(a,i.slot,"single");return d.prepareZoneDiv(c,u,l,t,i),{zoneTemplate:i,slotDivId:c,zoneDiv:t,zoneDivId:s,zoneInstanceId:u,gpid:l,targeting:e.extractTargeting(t),comboZoneEligible:n}}))}}return c(e,[{key:"prepareZoneDiv",value:function(e,t,n,i,r){if(this.logger.debug("[SLOTS][".concat(e,": Preparing the element")),i.setAttribute("data-fuse-code","".concat(e)),i.setAttribute("data-fuse-zone-instance","".concat(t)),i.setAttribute("data-fuse-slot","".concat(e)),this.templateSettings.isGptPreAuctionEnabled()&&i.setAttribute("data-gpid",n),i.setAttribute("data-fuse-processed-at",this.reporter.getElapsedTime().toString()),i.removeAttribute(di),this.document.getElementById(e))this.logger.warn("[DOM-SCAN]: Found existing slot element with id ".concat(e));else{var o=this.document.createElement("div");o.setAttribute("id","".concat(e)),o.classList.add("fuse-slot"),o.style.maxWidth="inherit",o.style.maxHeight="inherit",this.fuseSlotFormatter.format(i,r),this.templateSettings.isYandexEnabled()&&this.fuseSlotFormatter.updateSlotForYandex(o,r),i.appendChild(o)}return i}},{key:"assignSlotDivId",value:function(t){return"fuse-slot-".concat(t,"-").concat(e.assignCounter(t,this.slotCounter))}},{key:"assignZoneInstanceId",value:function(t){return"zone-instance-".concat(t,"-").concat(e.assignCounter(t,this.zoneCounter))}},{key:"assignGpid",value:function(e,t,n){return"".concat(t,"#").concat(n,"-").concat(this.slotCounter[e])}},{key:"processRawElement",value:function(e,t){var n,i=this,r=e.getAttribute(ci);if(!r)return this.logger.warn("[SLOTS]: Empty data-fuse attribute ".concat(r)),[];var o=this.templateSettings.generateZoneTemplate(r,this.zoneCustomiserApi);if(!o)return this.logger.warn("[SLOTS]: Unknown ZoneCode found in data-fuse attribute ".concat(r)),[];if(!this.canProcessSlot(e,t))return[];var s=this.zoneCustomiserApi.viewportInfo.getCurrentBreakpoint().name,a=function(e,t,n){if(!n||n.length<1)return[];var i=ri(e,t),r=i.maxWidth,o=i.maxHeight;return oi.filter((function(e){var t=n.find((function(t){return t[0]===e.parentSize[0]&&t[1]===e.parentSize[1]})),i=n.find((function(t){return t[0]===e.comboZoneSize[0]&&t[1]===e.comboZoneSize[1]}));return t&&i&&(!r||r>=e.computedSize[0])&&(!o||o>=e.computedSize[1])}))}(e,this.browserWindow,null===(n=o.sizeMapping)||void 0===n?void 0:n[s]),c=this.comboZoneManager.tryInitialize({zoneDiv:e,currentBp:s,comboZoneOptions:a,template:o}),u=c.template,d=c.zoneDivs,l=c.comboZoneVal,g=this.finalizeZones({templateToUse:u,zoneDivs:d,comboZoneEligible:a.length>0});return l&&g.forEach((function(e){i.comboZoneState.setComboZoneState(e.slotDivId,l)})),g}},{key:"findElementWithDomId",value:function(e){var t=this.document.querySelectorAll("".concat(ai,'[id="').concat(e,'"][').concat(ci,"]"));return 0==t.length?this.logger.warn("[SLOTS]: No DOM element found with both id='".concat(e,"' AND a data-fuse attribute")):t.length>1&&this.logger.warn("[SLOTS]: Multiple DOM elements found with id '".concat(e,"'")),t}},{key:"findAllFuseElements",value:function(){return this.document.querySelectorAll(ui)}},{key:"findElementsWithTemplateId",value:function(e){return this.document.querySelectorAll("".concat(ai,"[").concat(ci,'="').concat(e,'"]'))}},{key:"processRawElements",value:function(e,t){var n=this;return Array.from(e).reduce((function(e,i){var r=n.processRawElement(i,t);return[].concat(v(e),v(r))}),[])}},{key:"processSlots",value:function(e){var t=this.findAllFuseElements();return this.processRawElements(t,e)}},{key:"processZoneWithDivId",value:function(e,t){var n=this.findElementWithDomId(e);return this.processRawElements(n,t)}},{key:"processLastSlotWithFuseId",value:function(e,t){var n=this.findElementsWithTemplateId(e),i=this.processRawElements(n,t);return i[i.length-1]}},{key:"processSlotsWithFuseId",value:function(e,t){var n=this.findElementsWithTemplateId(e);return this.processRawElements(n,t)}}],[{key:"assignCounter",value:function(e,t){return t[e]||(t[e]=0),++t[e]}},{key:"getTargetingValue",value:function(e){return e.indexOf(",")>0?e.split(",").map((function(e){return e.trim()})).filter((function(e){return""!==e})):e}},{key:"extractTargeting",value:function(t){var n=t.getAttributeNames().filter((function(e){return"data-targeting-key"!==e&&"data-targeting-value"!==e})).filter((function(e){return 0===e.indexOf("data-targeting-",0)})).map((function(e){return{attributeKey:e,targetingKey:e.replace("data-targeting-","").trim()}})).map((function(e){return{key:e.targetingKey,value:t.getAttribute(e.attributeKey)}})).filter((function(e){var t=e.key,n=e.value;return(null==t?void 0:t.length)&&(null==n?void 0:n.length)})).map((function(t){var n=t.key,i=t.value;return{key:n,value:e.getTargetingValue(i)}})),i=t.getAttribute("data-targeting-key"),r=t.getAttribute("data-targeting-value");return(null==i?void 0:i.length)&&(null==r?void 0:r.length)&&!n.some((function(e){return e.key===i}))&&n.push({key:i,value:e.getTargetingValue(r)}),n}}])}();function gi(e,t,n){function i(e){return"[SLOT-FORMAT][".concat(e.id,"]:")}return{format:function(r,o){var s=o.attributes;!t.isMiniScrollersEnabled()||!1===s.miniscroller||s.sticky||s.interscroller||s.interstitial||s.scrollToStick||o.attributes.forceComboZone||o.attributes.comboZoneEnabled||function(t,r){var o=n.browserWindow.getComputedStyle(t),s=o.height,a=o.minHeight;return e.debug("".concat(i(r),' applying miniscroller on element with height "').concat(s,'" min-height: "').concat(a,'"')),-1===["0px","auto"].indexOf(s)&&(e.debug("".concat(i(r)," Miniscroller was not applied because of height ").concat(s,' already set for element "').concat(t.id,'"')),!0)}(r,o)||function(t,r){for(var o=t.parentElement,s=["hidden","scroll","auto"],a=["overflow","overflow-x","overflow-y"];o;)a.forEach((function(t){var a=n.browserWindow.getComputedStyle(o)[t];if(k(a)&&-1!==s.indexOf(a))return e.debug("".concat(i(r)," Miniscroller was not applied. ").concat(String(t),' on "').concat(o.id," ").concat(o.className,'"')),!0})),o=o.parentElement;return!1}(r,o)||(e.debug("".concat(i(o),' Update slot element "').concat(r.id,'" to miniscroller')),function(e,i){var r=n.getCurrentBreakpoint().name;e.classList.add("fuse-slot-mini-scroller");var o=t.maxSlotHeightForBreakpoint(i,r);e.style.minHeight="".concat(o,"px")}(r,o))},updateSlotForYandex:function(e,t){var i,r=n.getCurrentBreakpoint().name,o=null===(i=t.sizeMapping)||void 0===i?void 0:i[r],s=0,a=0;o&&o.length>0&&(o.forEach((function(e){"fluid"!==e&&"fluid"!==e[0]&&(Number(e[0])>a&&(a=Number(e[0])),Number(e[1])>s&&(s=Number(e[1])))})),e.style.width="".concat(a,"px"),e.style.height="".concat(s,"px"),e.style.margin="auto")}}}function pi(e,t){var n=[],i=null,r=[];function o(e){n.push(e)}function s(e){var t=n.indexOf(e);return t>=0&&(n.splice(t,1),!0)}function a(e){var t=function(e){var t;return null===(t=r.filter((function(t){return t.subscriber===e})).shift())||void 0===t?void 0:t.wrapper}(e);return s(t||e)}function c(e){var t=function(n){e(n),a(t)};o(t),r.push({wrapper:t,subscriber:e})}return{eventName:t,subscribe:o,unsubscribe:a,once:c,immediateOrOnce:function(n){return k(i)?(e.debug("[EVENT][".concat(t,"]: Already triggered, invoking callback synchronously")),n(i),!0):(c(n),!1)},emit:function(r){var o=n.length;o>0?e.debug("[EVENT][".concat(t,"]: Fired, start processing ").concat(o," callbacks")):e.debug("[EVENT][".concat(t,"]: Fired, no pending callbacks")),i=r,n.map((function(e){return e})).forEach((function(n){try{n(r)}catch(n){n instanceof Error?e.error("[EVENT][".concat(t,"]: Caught exception in callback with item ").concat(r),n.message,n.stack):e.error("[EVENT][".concat(t,"]: Caught exception of invalid type in callback with item ").concat(r))}}))},getSubscriberCount:function(){return n.length}}}function fi(e,t,n,i){var r=n/100,o=function(e,t,n,i,r){var o=e.top,s=e.bottom,a=e.left,c=e.right,u=e.width,d=e.height*r,l=u*r;return o+d+i>=0&&a+l>=0&&s-d-i<=n&&c-l<=t}(t.getBoundingClientRect(),e.width,e.innerHeight,i,r);return!e.hidden&&o}function hi(e,t,n,i,r,o,s,a,c,u,d,l){var g,p=[],f={},h={},b=pi(e,"onSlotCreated"),m=pi(e,"onSlotsInitialised");function S(){var e={};return Object.keys(f).forEach((function(t){var n=f[t];e[n.slotDivId]=n.zoneDiv})),e}function y(){return Object.keys(f).filter((function(e){return f[e].currentlyActive})).map((function(e){return f[e]}))}function I(e){return k(window.document.getElementById(e))}function w(e){return-1!==p.indexOf(e)}function _(e,t){e.currentlyActive=!0,E(e,t),a.onZoneEvent.emit({zoneTemplateId:e.zoneTemplate.id,zoneDivId:e.zoneDivId,zoneEventType:"registered",instanceId:e.zoneInstanceId,status:"active",gpid:e.gpid,comboZoneEligible:e.comboZoneEligible,slotDivId:e.slotDivId})}function E(t,n){t.zoneTemplate.attributes.afs?e.debug("[SLOTS][".concat(t.slotDivId,"]: Afs zone detected, skipping gpt/prebid registration")):(function(t,n){l.pushToGPTQue((function(o){if(w(t.slotDivId))e.log("[SLOTS][".concat(t.slotDivId,"]: Skip GPT registration because div deleted"));else{var s;r.isIn2wSafeframe()&&(s=d.getIn2wCallbackId());var a=s?o.defineRegisteredSlot(t,[].concat(v(n),[{key:"i2wcbid",value:s}])):o.defineRegisteredSlot(t,n);a&&(r.isIn2wSafeframe()&&(a.__i2wcbid=s),i.add(t.zoneTemplate.id,a),o.displaySlot(t.slotDivId))}}))}(t,n),t.allowHeaderBidding?function(t){u.pushToPrebidQue((function(){w(t.slotDivId)?e.log("[SLOTS][".concat(t.slotDivId,"]: Skip prebid registration because div deleted")):c.registerPrebidUnit(t)}))}(t):e.debug("[SLOTS][".concat(t.slotDivId,"]: Skip prebid registration because headerbidding not enabled")))}function C(t){var n;e.debug("[SLOTS][".concat(t,"]: Deleting slot"));var r=T(t);r?i.purgeByElement(r.zoneTemplate.id,r.slotDivId):e.debug("[SLOTS][".concat(t,"]: Registered slot not found upon deletion")),p.push(t),delete f[t],null===(n=h[t])||void 0===n||n.destroy(),delete h[t],a.onSlotDestroyed.emit({slotDivId:t}),r&&a.onZoneEvent.emit({zoneTemplateId:r.zoneTemplate.id,zoneDivId:r.zoneDivId,zoneEventType:"deleted",instanceId:r.zoneInstanceId,gpid:r.gpid,slotDivId:r.slotDivId})}function T(e){return f[e]}function A(t,n,i,r,s){return o.buildActivator(n,t.slotDivId,i,(function(){return function(t,n,i){var r=t.slotDivId;if(f[r]&&!0===f[r].currentlyActive)e.warn("[SLOTS][".concat(r,"]: Skipped activation because the slot was already activated"));else{if(!I(r))return e.warn("[SLOTS][".concat(r,"]: Skipped activation because the slot was removed from the DOM")),void C(r);h[r].destroy(),t.currentlyActive=!0,E(t,n),a.onZoneEvent.emit({zoneTemplateId:t.zoneTemplate.id,zoneDivId:t.zoneDivId,zoneEventType:"activated",instanceId:t.zoneInstanceId,gpid:t.gpid,slotDivId:t.slotDivId}),i([t])}}(t,r,s)}))}function P(i){var o,c=i.slotDivId,u=i.zoneDiv,d=i.zoneInstanceId,l=i.zoneDivId,p=i.zoneTemplate,v=i.gpid,m=i.targeting,S=i.forceActivate,y=i.api,w=i.runAuctionFn,E=i.comboZoneEligible,C=s.getCurrentBreakpoint().name,T=function(e,t,n){var i=ri(t,e),r=i.maxWidth,o=i.maxHeight;return n.filter((function(e){return!ni(e)||!k(r)||e[0]<=r})).filter((function(e){return!ni(e)||!k(o)||e[1]<=o}))}(n,u,null!==(o=p.sizeMapping[C])&&void 0!==o?o:[]),P=T.length>0?T:void 0,R=ii(T),B=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},function(t,i,r,o,a){return{slotDivId:t,zoneDiv:o,zoneDivId:a,zoneInstanceId:i,zoneTemplate:r,zoneTemplateId:r.id,isInView:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,o=r.attributes.interscroller?n.document.querySelector(".publift-widget-".concat(r.id,"-container")):n.document.getElementById(t);if(o){var a=(r.attributes.interscroller?o:o.parentElement).getBoundingClientRect(),c=a.top,u=a.bottom,d=a.left,l=a.right,g=a.width,p=a.height;return c||u||d||l||g||p?fi(s.getViewportStatus(),o,50,i):(e.log("[SLOTS][".concat(t,"]: Skipped slot checkInView because zone/interscroller element is not visible")),!1)}return e.warn("[SLOTS][".concat(t,"]: Slot element is not found")),!1},isAllowRefresh:function(){return!0},isInDom:function(){return I(t)},isAboveViewport:function(){return o.getBoundingClientRect().bottom<0}}}(c,d,p,u,l)),{currentlyActive:!1,storedAt:t.getElapsedTime(),breakpoint:C,sizes:P,sizesHb:R,path:p.slot,allowHeaderBidding:k(R)&&R.length>0&&r.isHeaderBiddingSlot(p)}),p.mediaTypes&&{mediaTypes:p.mediaTypes}),p.videoAttributes&&{prebidVideoConfig:p.videoAttributes}),{gpid:v}),p.targeting&&{targeting:p.targeting}),k(g)?{isAllowRefresh:function(){return g(c)}}:{}),{comboZoneEligible:E});if(f[c]=B,x(P))return e.info("[SLOTS][".concat(c,"]: Registered as inactive because no sizes available")),B;var O=B,z=function(e,t,n,i){e.log("[SLOTS][".concat(t,"]: merge slot targeting ").concat(JSON.stringify(n),", ").concat(JSON.stringify(i)));var r=n;return null==i||i.forEach((function(e){r.find((function(t){return t.key===e.key}))||r.push({key:e.key,value:e.value})})),e.log("[SLOTS][".concat(t,"]: set slot targeting ").concat(JSON.stringify(r))),r}(e,c,m,p.targeting);if(S)e.info("[SLOTS][".concat(c,"]: Registering as active because it is forced")),_(O,z);else if(p.activateCondition){var D=A(O,p.activateCondition,y,z,w);D.checkCondition()?(e.info("[SLOTS][".concat(c,"]: Registering as active because conditions already satisfied")),_(O,z)):(e.info("[SLOTS][".concat(c,"]: Registering as inactive and enabling triggers")),function(e,t){h[e.slotDivId]=t,a.onZoneEvent.emit({zoneTemplateId:e.zoneTemplate.id,zoneDivId:e.zoneDivId,zoneEventType:"registered",instanceId:e.zoneInstanceId,status:"inactive",gpid:e.gpid,comboZoneEligible:e.comboZoneEligible,slotDivId:e.slotDivId})}(O,D),D.enableTriggers())}else e.log("[SLOTS][".concat(c,"]: Registering as active because no conditions defined")),_(O,z);return b.emit({}),a.onSlotRegistered.emit({slot:O}),B}function R(){e.debug("[DOM]: Clearing fuse skins");for(var t=n.document.querySelectorAll("div.fuse-custom-skin"),i=0;i<t.length;i++)t[i].parentNode.removeChild(t[i])}return{reset:function(){Object.keys(f).forEach((function(t){w(t)&&e.log("[EVENT]: resetSlots() unit already deleted ".concat(t)),p.push(t)}));var n=S();Object.keys(n).forEach((function(e){n[e].setAttribute(di,t.getElapsedTime().toString())})),Object.keys(h).forEach((function(e){h[e].destroy()})),f={},h={},R()},getZoneTemplates:function(){var e={};return Object.keys(f).forEach((function(t){var n=f[t];e[n.slotDivId]=n.zoneTemplate})),e},getSlotsForTemplateId:function(e){return Object.keys(f).filter((function(t){return f[t].zoneTemplate.id===e})).map((function(e){return f[e]}))},getActiveSlots:y,getSlotInitObservable:function(){return b},getSlotsInitObservable:function(){return m},isDeletedSlot:w,isAboveViewport:function(e){var t,n;return null!==(n=null===(t=f[e])||void 0===t?void 0:t.isAboveViewport())&&void 0!==n&&n},isLazy:function(e){var t;return"lazy"===(null===(t=f[e])||void 0===t?void 0:t.zoneTemplate.activateConditionConfig.type)},excludeDeleted:function(e,t){return e.filter((function(e){var n=!w(e.slotDivId);return!n&&t&&t(e.slotDivId),n}))},deleteSlot:C,getSlot:T,getSlotByZoneDivId:function(e){return f[Object.keys(f).find((function(t){return f[t].zoneDivId===e}))]},getSlots:function(e){var t=[];return e.forEach((function(e){var n=T(e);n&&t.push(n)})),t},register:function(t,n,i,r){var o=t.map((function(e){return P({slotDivId:e.slotDivId,zoneDiv:e.zoneDiv,zoneInstanceId:e.zoneInstanceId,zoneDivId:e.zoneDivId,zoneTemplate:e.zoneTemplate,gpid:e.gpid,targeting:e.targeting,forceActivate:i,api:n,runAuctionFn:r,comboZoneEligible:e.comboZoneEligible})})).filter(k);return e.debug("[SLOTS]: Registered ".concat(o.length," slots")),m.emit({}),o},clearFuseSkins:R,setAllowSlotRefreshCallback:function(t){g=t,e.debug("[SLOTS]: Registered setAllowSlotRefreshCallback")},destroySticky:function(){y().filter((function(e){return e.zoneTemplate.attributes.sticky})).forEach((function(e){return C(e.slotDivId)}))},getZoneDivs:S,REGISTERED_SLOTS:f}}function vi(e,t){var n=t;return e.immediateOrOnce((function(e){return n=e})),{get value(){return n},asSupplier:function(){return function(){return n}}}}function bi(e,t){if(!e||!t)return!1;var n=new URL(e),i=new URL(t);return n.hash="",i.hash="",n.toString()==i.toString()}function mi(e,t,n,i,r,o,s,a,c){var u=null,d=vi(s.onTagInitComplete),l=null;function g(){e.info("[PAGE]: Resetting all page state"),n(),s.onPageReset.emit({breakpoint:a().name})}function p(e){(null==e?void 0:e.pageTargets)&&o(null==e?void 0:e.pageTargets)}function f(e){return c.getLowDwellPages().filter((function(t){var n=e.match(t);return n&&n.length>0})).length>0}function h(e,t){var n=Object.assign({url:e,isPageTransition:t,isLowDwellPage:f(e),breakpoint:a().name},l?{afsPageParams:l}:{});s.onPageInit.emit(n)}return s.onTagInitComplete.immediateOrOnce((function(e){h(e.tagInitUrl,!1)})),{reset:g,handlePageInitCall:function(n,o,s){var a;e.info("[PAGE]: pageInit('".concat(n,"', ").concat(o,", ").concat(JSON.stringify(s)));var f,v=null===u,b=k(d.value),m=!1;if(v)if(b)if(bi(n,t)){if(r())return p(s),void e.warn("[PAGE]: Not resetting, because URL unchanged since tag init");e.info("[PAGE]: Late pageInit() call, will apply PageTargeting and run auction"),m=!0,f=!1}else e.info("[PAGE]: First pageInit() call, and URL changed since tag init. Resetting."),g(),f=!0;else f=!1;else if(bi(n,u)){if(!(null==s?void 0:s.forceReset))return p(s),void e.warn("[PAGE]: Not resetting, because URL unchanged since last pageInit call");e.debug("[PAGE]: pageInit call with forceReset=true. Resetting."),f=!1,g()}else e.info("[PAGE]: pageInit() called, and the URL has changed. Resetting."),f=!0,g();u=n,p(s),(null==s?void 0:s.blockingFuseIds)&&function(t,n,r,o){var s=r?t:t-o;if(s<=0)e.info("[PAGE][pageInit]: Skipped setting auction block, because there is no time left on the timeout");else{var a=n.map((function(e){return"".concat(e)}));c.isSpaOldBlockingPageInit()||i(a,s)}}(null!==(a=null==s?void 0:s.blockingTimeout)&&void 0!==a?a:2e3,s.blockingFuseIds,f,o),(null==s?void 0:s.afsPageParams)&&(l=s.afsPageParams),b&&!m&&h(n,!0)},isPageInitCalled:function(){return k(u)},isLowDwellUrl:f}}function Si(e,t,n,i,r,o,s,a,c,d){var l=function(e,t){var n={},i={};function r(e,t){return n[e].slotStatus[t]}function o(t,r){var o=i[t];if(o)return n[o].slotStatus[t];e.debug("[AUCTION-STATUS][".concat(r,"]: Could not find active GPT call for ").concat(t))}function s(t){var n=i[t];n?(e.debug("[AUCTION][".concat(n,"]: Removed ").concat(t," from GPT active list")),delete i[t]):e.debug("[AUCTION]: Could not find ".concat(t," in the GPT active list"))}return{getAuctions:function(){return n},getAuctionStatus:function(e){return n[e]},getActiveGptCalls:function(){return Object.keys(i)},createNewAuction:function(e,i,r){var o,s,a,c;n[e.auctionId]={started:t.getElapsedTime(),creativeDivIds:(a=e,c="slotDivId",a.slots.map((function(e){return e[c]}))),hbDivIds:$n(e),uamIncluded:k(null===(o=e.hbPlan)||void 0===o?void 0:o.uamPlan),uamResponded:!1,uamSkipped:!1,prebidIncluded:k(null===(s=e.hbPlan)||void 0===s?void 0:s.prebidPlan),prebidResponded:!1,prebidSkipped:!1,uamCancelled:!1,prebidCancelled:!1,gptRequestSent:!1,auctionPhaseCallback:i,slotStatus:e.slots.reduce((function(e,t){return Object.assign(Object.assign({},e),u({},t.slotDivId,{slotPhaseCallback:function(e){return r(t,e)}}))}),{})}},onPrebidRequest:function(e){var i=n[e];i.prebidRequestTime=t.getElapsedTime(),i.auctionPhaseCallback(Qn.PREBID_REQUEST)},onPrebidResponse:function(e){var i=n[e];i.prebidResponseTime=t.getElapsedTime(),i.prebidResponded=!0,i.auctionPhaseCallback(Qn.PREBID_RESPONSE)},onPrebidSkipped:function(e){var t=n[e];t.prebidSkipped=!0,t.auctionPhaseCallback(Qn.PREBID_SKIPPED)},onUamRequest:function(e){var i=n[e];i.uamRequestTime=t.getElapsedTime(),i.auctionPhaseCallback(Qn.UAM_REQUEST)},onUamSkipped:function(e){var t=n[e];t.uamSkipped=!0,t.auctionPhaseCallback(Qn.UAM_SKIPPED)},onUamResponse:function(e){var i=n[e];i.uamResponseTime=t.getElapsedTime(),i.uamResponded=!0,i.auctionPhaseCallback(Qn.UAM_RESPONSE)},cancelAuction:function(e){var i=n[e];i.cancelled=t.getElapsedTime(),i.auctionPhaseCallback(Qn.CANCELLED)},onGptRequest:function(o,s){s.forEach((function(s){var a=s.slotDivId,c=r(o,a);if(c){c.gptRequestTime=t.getElapsedTime(),c.slotPhaseCallback(Jn.GPT_REQUEST);var u=i[a];u&&(e.warn("[AUCTION][".concat(o,"]: ").concat(a," is part of an uncompleted auction: ").concat(u," and is marked superseded")),n[u].slotStatus[a].supersededTime=t.getElapsedTime(),n[u].slotStatus[a].slotPhaseCallback(Jn.SUPERSEDED)),i[a]=o}})),n[o].gptRequestSent=!0,n[o].auctionPhaseCallback(Qn.GPT_REQUEST)},onGptResponse:function(e){var n=o(e,Jn.GPT_RESPONSE);n&&(n.gptResponseTime=t.getElapsedTime(),n.slotPhaseCallback(Jn.GPT_RESPONSE))},onGptSlotRendered:function(e,n){var i=o(e,Jn.GPT_RENDERED);i&&(i.gptOnRenderTime=t.getElapsedTime(),n||s(e),i.slotPhaseCallback(Jn.GPT_RENDERED))},onGptSlotLoaded:function(e){var n=o(e,Jn.GPT_LOADED);n&&(n.gptOnLoadTime=t.getElapsedTime(),s(e),n.slotPhaseCallback(Jn.GPT_LOADED))},cancelSlotAuction:function(n,i,o){e.info("[AUCTION][".concat(n,"]: Cancelled auction for ").concat(i," because ").concat(o));var a=r(n,i);a&&(a.cancelledTime=t.getElapsedTime(),s(i),a.slotPhaseCallback(Jn.CANCELLED))},removeFromGptActive:s}}(i,r),g=!1,p=!1,f=!1,h=!1;function v(t){var n=t.auctionId,s=e.excludeDeleted(t.slots,(function(e){l.cancelSlotAuction(n,e,"slot DOM element was deleted")})),u=o.isAbandonLazyAuctionEnabled()?function(e,t,n,i,r){return t.filter((function(t){var o=n(t.slotDivId)&&i(t.slotDivId);return e.debug("[AUCTION]: Slot ".concat(t.slotDivId," is lazy: ").concat(n(t.slotDivId)," and above viewport: ").concat(i(t.slotDivId))),o&&(e.debug("[AUCTION]: Slot ".concat(t.slotDivId," is lazy and above viewport, excluding")),r(t.slotDivId)),!o}))}(i,s,e.isLazy.bind(e),e.isAboveViewport.bind(e),(function(e){l.cancelSlotAuction(n,e,"slot DOM element aboveViewport")})):s;if(!w(u))return i.log("[AUCTION][".concat(n,"]: No slots to request, cancelling auction")),void l.cancelAuction(n);l.onGptRequest(n,u),e.clearFuseSkins(),a.waitForTouchEnd((function(){if(i.debug("Touch has ended, refreshing ads"),function(e){var t=e;return function(e){return!0===(null==e?void 0:e.isRefresh)&&1===e.slots.length}(e)&&void 0!==t.nextGptAuction}(t)){var e=t.nextGptAuction-r.getElapsedTime();i.debug("[AUCTION][".concat(n,"][GPT-SCHEDULE]: Refreshing with perceived refresh ").concat(t.nextGptAuction," - ").concat(r.getElapsedTime()," = ").concat(e,"ms")),e>0?(i.debug("[AUCTION][".concat(n,"][GPT-SCHEDULE]: Refreshing too soon, delay for ").concat(e,"ms")),setTimeout((function(){c.refreshUnitsAsync(n,t.slots)}),e)):(i.debug("[AUCTION][".concat(n,"][GPT-SCHEDULE]: No delay, refreshing immediately")),c.refreshUnitsAsync(n,t.slots))}else c.refreshUnitsAsync(n,u)}))}function b(e,t,n){var r=e.auctionId,o=l.getAuctionStatus(r);if(o.gptRequestSent)t&&i.warn("[AUCTION][".concat(r,"]: Received ").concat(t," response after adserver request already sent"));else{var s=o.prebidIncluded,a=o.uamIncluded;if(n){var c=a?o.uamResponded:"excluded",u=s?o.prebidResponded:"excluded";i.warn("[AUCTION][".concat(r,"]: Timeout reached with missing responses, sending to GPT. Uam responded=").concat(c,", Prebid responded=").concat(u)),v(e)}else a&&s?(o.uamResponded||o.uamCancelled)&&(o.prebidResponded||o.prebidCancelled)?(i.info("[AUCTION][".concat(r,"]: All necessary responses received, sending to GPT")),v(e)):i.debug("[AUCTION][".concat(r,"]: Got response from ").concat(t,", waiting for other responses")):(i.debug("[AUCTION][".concat(r,"]: ").concat(t," complete, calling GPT")),v(e))}}function m(e){i.debug("[AUCTION][".concat(e.auctionId,"]: Starting GPT-only auction")),v(e)}function S(e){var t=e.slot.getSlotElementId();l.onGptSlotLoaded(t)}function y(e){var t=e.slot.getSlotElementId();l.onGptResponse(t)}function I(t){var n=!t.isEmpty,o=t.slot.getSlotElementId();i.debug("[AUCTION]: ".concat(o," render event details: ").concat(JSON.stringify(t)));var s=e.getSlot(o);if(s){if(n)i.info("[AUCTION]: Adserver responded with creative for ".concat(o));else{var a={fuseSlotId:s.zoneTemplate.id,fuseSlotCode:o,errorType:"MISSING_CREATIVE"};r.addSlotProblem(a),i.warn("[AUCTION]: Adserver responded without creative for ".concat(o))}if(d&&s.sizes){var c=Bt(s.sizes.filter((function(e){return ni(e)}))),u=Array.isArray(t.size)?t.size:null;2===(null==u?void 0:u.length)&&(u[1]>c[0]||u[1]>c[1])&&(Ot(u[0],c[0])>50||Ot(u[1],c[1])>50)&&(i.debug("[AUCTION][".concat(o,"]: Received a rogue bid ").concat(u,"  with mismatch maxArea ").concat(c," from adx: ").concat(JSON.stringify(t))),null==d||d.recordRogueAdxResponse(o,t,c))}l.onGptSlotRendered(o,n)}else e.isDeletedSlot(o)?(i.info("[AUCTION]: Slot Render Ended Event fired for deleted unit ".concat(o)),l.onGptSlotRendered(o,n)):i.debug("[AUCTION]: SlotRenderEnded Event fired for non fuse units: ".concat(o,". HasCreative: ").concat(n))}return s.onSlotLoaded.subscribe((function(e){S(e)})),s.onSlotResponse.subscribe((function(e){y(e)})),s.onSlotRender.subscribe((function(e){I(e)})),s.onPrebidAuctionEnd.subscribe((function(n){var i;d.recordPrebidAuctionEnd(n,null!==(i=t.version)&&void 0!==i?i:"unknown",e)})),s.onPrebidAdRenderFailed.subscribe((function(e){d.recordPrebidAdRenderFailed(e)})),s.onPrebidAdRenderSucceeded.subscribe((function(e){d.recordPrebidAdRenderSucceeded(e)})),{startGptOnlyAuction:m,executeAuction:function(a,c,u){s.onAuctionEvent.emit(Object.assign({auctionEventType:"started"},a)),l.createNewAuction(a,c,u),i.log("[AUCTION][".concat(a.auctionId,"]: Running with plan: ").concat(function(e){var t=e;return JSON.stringify(Object.assign({auctionId:e.auctionId,hbSettings:!!e.hbPlan&&{cancelTimeout:e.hbPlan.cancelTimeout,usePrebid:!!e.hbPlan.prebidPlan&&{timeout:e.hbPlan.prebidPlan.timeout,slots:e.hbPlan.prebidPlan.slots.map((function(e){return e.slotDivId}))},useUam:!!e.hbPlan.uamPlan&&{slots:e.hbPlan.uamPlan.slots.map((function(e){return e.slotDivId}))}},gptSlots:e.slots.map((function(e){return e.slotDivId})),gpids:e.slots.map((function(e){return e.gpid})),breakpointName:e.breakpointName},t.isRefresh?{isRefresh:t.isRefresh,lastGptAuction:t.lastGptAuction,nextGtpAuction:t.nextGptAuction}:{}))}(a))),o.isYandexEnabled()?function(e){var t=e.auctionId,n=o.getYandexBlockId();n?(i.log("[AUCTION][".concat(t,"]: Run Yandex with blockId ").concat(n)),window.yaContextCb.push((function(){e.slots.forEach((function(e){var o=e.slotDivId,s=e.zoneTemplateId,a=Number(s.substring(7)+o.substring(o.lastIndexOf("-")+1));i.log("[AUCTION][".concat(t,"][").concat(o,"]: Set pageNumber ").concat(a)),Ya.Context.AdvManager.render({renderTo:"".concat(o),blockId:n,pageNumber:a,onRender:function(){r.setStateStatus("yandex_unit_rendered")}})}))}))):i.error("[AUCTION][".concat(t,"]: Cannot run Yandex cause yandexBlockId is not set"))}(a):function(e){return void 0!==e.hbPlan}(a)?function(o){var s=o.auctionId,a=function(e){var t;return k(null===(t=null==e?void 0:e.hbPlan)||void 0===t?void 0:t.prebidPlan)}(o);a&&function(n){var o=ei(n),s=n.auctionId;r.addAdEvent("prebid_request_".concat(JSON.stringify(o)),{auctionId:s}),i.info("[AUCTION][".concat(s,"]: Requesting prebid for: ").concat(JSON.stringify(o))),g||(g=!0,r.setStateStatus("first_prebid_request"));var a=t;a.requestBids({auctionId:s,adUnitCodes:o,timeout:n.hbPlan.prebidPlan.timeout,bidsBackHandler:function(t,c){var u;l.onPrebidResponse(s);var g=Object.keys(t);if(i.info("[AUCTION][".concat(s,"]: Prebid auction complete. Any-bidder-timeout?=").concat(c,". Responding slots: ").concat(JSON.stringify(g))),g.length>0){if(i.debug("[AUCTION][".concat(s,"]: Prebid response details: ").concat(JSON.stringify(t))),d){var p=function(n){var r=e.getSlot(n);if(null===(u=null==r?void 0:r.sizesHb)||void 0===u?void 0:u.length){var o=Bt(r.sizesHb);t[n].bids.forEach((function(e){(e.width>o[0]||e.height>o[1])&&(i.debug("[AUCTION][".concat(s,"][").concat(n,"]: Received a rogue bid ").concat(e.width,"x").concat(e.height,"  with mismatch maxArea ").concat(o," from ").concat(e.bidder,": ").concat(JSON.stringify(e))),null==d||d.recordRogueBidderResponse(n,e,o))}))}};for(var h in t)p(h)}}else i.warn("[AUCTION][".concat(s,"]: No bid responses received from prebid"));r.addAdEvent("prebid_response_".concat(JSON.stringify(g)),{auctionId:s}),f||(f=!0,r.setStateStatus("first_prebid_response"));try{a.setTargetingForGPTAsync(o),b(n,"prebid",!1)}catch(e){var v=Te(e);i.error("[AUCTION][".concat(s,"]: ").concat(v.message," ").concat(v.stack))}}})}(o);var c=function(e){var t;return k(null===(t=null==e?void 0:e.hbPlan)||void 0===t?void 0:t.uamPlan)}(o);c&&function(e){var t=e.auctionId,o=e.hbPlan.uamPlan.slots,s=JSON.stringify(o.map((function(e){return e.slotDivId})));i.info("[AUCTION][".concat(e.auctionId,"]: Sending UAM request for ").concat(s)),r.addAdEvent("uam_request_".concat(s),{auctionId:t}),p||(p=!0,r.setStateStatus("first_uam_request")),n.makeBids(e,(function(n){i.info("[AUCTION][".concat(t,"]: Received UAM response")),i.debug("[AUCTION][".concat(t,"]: UAM response details: "),JSON.stringify(n)),r.addAdEvent("uam_response_".concat(s),{auctionId:t}),h||(h=!0,r.setStateStatus("first_uam_response")),l.onUamResponse(t),b(e,"uam",!1)}))}(o);var u=a&&!l.getAuctionStatus(s).prebidCancelled,v=c&&!l.getAuctionStatus(s).uamCancelled;u||v?(r.reportHbAuctionStart(),function(e){i.debug("[AUCTION][".concat(e.auctionId,"]: Set auction failure timeout of ").concat(e.hbPlan.cancelTimeout,"ms")),setTimeout((function(){return b(e,void 0,!0)}),e.hbPlan.cancelTimeout)}(o)):m(o)}(a):m(a)},reportOnLoadEvent:S,reportSlotResponseReceived:y,reportOnRenderEndedEvent:I,getStateView:function(){return l}}}function yi(e){return{getZoneTemplate:function(t){return e.getZoneTemplate(t)},setDisableWidgetRenderer:function(t){e.getV2CompatOverrides().disableWidgetsRenderer=t},setForceSafeFrames:function(t){e.setForceSafeFrames(t)},isUseBackwardCompatibleNaming:function(){return e.isUseBackwardCompatibleNaming()}}}var Ii="fuse_exp_16-val";function xi(e,t,n){var i=0,r=0,o=!1,s=n.isComboZoneEnabled(),a=n.isComboZoneYeRunning();function c(t,n){if(!a)return[];if(e.info("[COMBO-ZONE][".concat(t.id,"]: Calculating comboZone targeting")),!t.attributes.comboZoneEnabled){var r="ye-".concat(s,"_zone_disabled");return e.info("[COMBO-ZONE][".concat(t.id,"]: ComboZone is disabled - setting targeting to ").concat(r," ")),[{key:Ii,value:r}]}var o=function(e){var t=e.length>0;if(t&&s&&d(i))return e[0].name;var n="ye-".concat(s.toString()),r=t?"eligible":"ineligible";if(t){var o=d(i)?"selected":"not-selected";return"".concat(n,"_").concat(r,"_").concat(o)}return"".concat(n,"_").concat(r)}(n),c=[{key:Ii,value:o}];return e.info("[COMBO-ZONE][".concat(t.id,"]: ComboZone targeting calculated with result: ").concat(JSON.stringify(c))),n.length>0&&i++,c}function d(e){return e<1}function l(n,i,r,s){var a;if(!(null===(a=i.sizeMapping)||void 0===a?void 0:a[r]))return e.log("[COMBO-ZONE][".concat(i.id,"] no sizes found for breakpoint ").concat(r)),{zoneDivs:[n],template:i};n.setAttribute("data-fuse-combo",i.id),n.removeAttribute("data-fuse"),e.log("[COMBO-ZONE][".concat(i.id,"] updated data-fuse to data-fuse-combo"));var c="fuse-zone-combo-".concat(s.name.replace("@","-"));n.classList.add(c),e.log("[COMBO-ZONE][".concat(i.id,"] added class ").concat(c," to combo zone parent div"));var d=new Array(s.numZones).fill(0).map((function(){return t.createDivElement(i.id,"fuse-slot-comboZone")}));e.log("[COMBO-ZONE][".concat(i.id,"] created ").concat(d.length," slots for template")),n.append.apply(n,v(d)),o||(t.insertStyles("publift-fuse-combozone-styles","\n      .fuse-zone-combo-V2-300x250, .fuse-zone-combo-V2-728x90 {\n        display: flex;\n        flex-direction: column;\n      }\n      .fuse-zone-combo-V2-300x250 .fuse-slot-comboZone, .fuse-zone-combo-V2-728x90 .fuse-slot-comboZone {\n        margin-bottom: 10px;\n      }\n      .fuse-zone-combo-H2-300x250, .fuse-zone-combo-H3-300x250 {\n        display: flex;\n        flex-direction: row;\n        justify-content: center;\n      }\n      .fuse-zone-combo-H2-300x250 .fuse-slot-comboZone, .fuse-zone-combo-H3-300x250 .fuse-slot-comboZone {\n        padding-right: 10px;\n      }\n    "),o=!0);var l=Object.assign(Object.assign({},i),{sizeMapping:Object.assign(Object.assign({},i.sizeMapping),u({},r,v(s.sizes)))});return e.log("[COMBO-ZONE][".concat(i.id,"] Updated comboZone slot sizes to ").concat(JSON.stringify(s.sizes))),{zoneDivs:d,template:l}}return{tryInitialize:function(t){var i,o,s,a,u,g,p,f,h=t.currentBp,b=t.comboZoneOptions,m=t.template,S=t.zoneDiv,y=n.isComboZoneEnabled()&&d(r)&&(null===(i=m.attributes)||void 0===i?void 0:i.comboZoneEnabled)&&b.length>0,I=(null===(o=m.attributes)||void 0===o?void 0:o.forceComboZone)&&(null===(s=null==m?void 0:m.comboZoneAttributes)||void 0===s?void 0:s.name);if(e.debug("[COMBO-ZONE][".concat(m.id,"]: Checking if template can be used as Combo zone ").concat(JSON.stringify({isComboZoneQualified:{count:r,enabled:null===(a=m.attributes)||void 0===a?void 0:a.comboZoneEnabled,comboZoneOptions:b},isComboZoneForced:{forced:null===(u=m.attributes)||void 0===u?void 0:u.forceComboZone,eligible:null===(g=m.comboZoneAttributes)||void 0===g?void 0:g.name}}))),!y&&!I){e.info("[COMBO-ZONE][".concat(m.id,"]: Template wasn't be picked for comboZone"));var x=c(m,b);return{zoneDivs:[S],template:Object.assign(Object.assign({},m),{targeting:[].concat(v(m.targeting||[]),v(x))}),comboZoneVal:null===(p=x[0])||void 0===p?void 0:p.value}}e.info("[COMBO-ZONE][".concat(m.id,"]: Using template as Combo zone")),I||++r;var k=si(I?m.comboZoneAttributes.name:b[0].name);e.log("[COMBO-ZONE][".concat(m.id,"]: Picked attributes for the comboZone: ").concat(JSON.stringify(k)));var w=l(S,m,h,k),_=w.zoneDivs,E=w.template,C=c(E,b);return{zoneDivs:_,template:Object.assign(Object.assign({},E),{targeting:[].concat(v(E.targeting||[]),v(C))}),comboZoneVal:null===(f=C[0])||void 0===f?void 0:f.value}}}}function ki(e,t,n,i){var r=pi(e,t);return n.subscribe((function(e){var t=i(e);k(t)&&r.emit(t)})),r}var wi=function(){return c((function e(t,n,i,r,o,a){var c=this;s(this,e),this.slot=t,this.logger=i,this.reporter=r,this.isRefreshPrebidTimeoutBuffering=a,this.isRefreshEnabled=!0,this.lastGptRequestTimestamp=0,this.lastRefreshTimestamp=0,this.slotRenderEventHandle=function(){return c.handleSlotRenderEvent()},this.slotLoadEventHandle=function(){return c.handleSlotLoadEvent()},this.slotRequestedEventHandle=function(){return c.handleSlotRequestedEvent()},this.refreshInterval=this.isRefreshPrebidTimeoutBuffering?n-4:n,this.slotRenderEventStream=this.createFilteredObservable(o.onSlotRender,t),this.slotLoadEventStream=this.createFilteredObservable(o.onSlotLoaded,t),this.slotRequestedEventStream=this.createFilteredObservable(o.onSlotRequested,t),this.slotRenderEventStream.subscribe(this.slotRenderEventHandle),this.slotLoadEventStream.subscribe(this.slotLoadEventHandle),this.slotRequestedEventStream.subscribe(this.slotRequestedEventHandle)}),[{key:"createFilteredObservable",value:function(e,t){return ki(this.logger,"",e,(function(e){return e.slot.getSlotElementId()===t.slotDivId?t:null}))}},{key:"handleSlotRequestedEvent",value:function(){this.lastGptRequestTimestamp=Date.now(),this.logger.debug("[REFRESH]: Received gpt requested for slot ".concat(this.slot.slotDivId))}},{key:"disableRefresh",value:function(){this.isRefreshEnabled=!1,this.logger.debug("[REFRESH]: Refresh disabled for slot ".concat(this.slot.slotDivId))}},{key:"enableRefresh",value:function(){this.isRefreshEnabled=!0,this.scheduleRefresh("enableRefresh"),this.logger.debug("[REFRESH]: Refresh enabled for slot ".concat(this.slot.slotDivId))}},{key:"isBlockedByRefreshCallback",value:function(){try{return!this.slot.isAllowRefresh()}catch(e){return this.logger.error("[REFRESH]: ".concat(this.slot.slotDivId," Refresh callback failed with ").concat(JSON.stringify(e))),!0}}},{key:"destroy",value:function(){this.slotRenderEventStream.unsubscribe(this.slotRenderEventHandle),this.slotLoadEventStream.unsubscribe(this.slotLoadEventHandle),this.slotRequestedEventStream.unsubscribe(this.slotRequestedEventHandle),this.refreshTimer&&(clearInterval(this.refreshTimer),this.refreshTimer=null),this.isRefreshEnabled=!1,this.lastGptRequestTimestamp=0,this.lastRefreshTimestamp=0,this.logger.debug("[REFRESH]: Refresh strategy destroyed for slot ".concat(this.slot.slotDivId))}},{key:"getLastGptRequestElapsedTime",value:function(){return this.lastGptRequestTimestamp-this.reporter.getFuseDob()}}])}(),_i=function(e){function t(e,n,i,r,a,c,u,d){var l;return s(this,t),(l=o(this,t,[e,n,r,a,c,d])).triggerAuction=i,l.minOnScreenDuration=u,l.CHECK_INTERVAL=500,l.onScreenDuration=0,l.hasReceivedImpressionViewable=!1,l.impressionViewableEventHandle=function(){return l.handleImpressionViewableEvent()},l.logger.debug("[REFRESH]: ViewportRefreshStrategy initialized for slot ".concat(l.slot.slotDivId,", interval: ").concat(l.refreshInterval)),l.impressionViewableEventStream=l.createFilteredObservable(c.onImpressionViewable,e),l.impressionViewableEventStream.subscribe(l.impressionViewableEventHandle),l}return g(t,e),c(t,[{key:"getInfo",value:function(){return{strategyName:"ViewportRefreshStrategy",isRefreshEnabled:this.isRefreshEnabled,lastGptRequestTimestamp:this.lastGptRequestTimestamp,refreshInterval:this.refreshInterval}}},{key:"destroy",value:function(){this.impressionViewableEventStream.unsubscribe(this.impressionViewableEventHandle),this.resetCounter(),function(e,t,n){var i=d(l(e.prototype),t,n);return"function"==typeof i?function(e){return i.apply(n,e)}:i}(t,"destroy",this)([])}},{key:"resetCounter",value:function(){this.onScreenDuration=0,this.lastRefreshTimestamp=Date.now(),this.hasReceivedImpressionViewable=!1}},{key:"shouldSkipRefresh",value:function(){return this.isRefreshEnabled?this.isBlockedByRefreshCallback()?(this.logger.log("[REFRESH]: ".concat(this.slot.slotDivId," Refresh blocked by callback")),!0):!this.slot.isInDom()&&(this.logger.warn("[REFRESH]: Could not refresh ".concat(this.slot.slotDivId," because a div with that id was not found in the DOM")),!0):(this.logger.log("[REFRESH]: Not refreshing ".concat(this.slot.slotDivId," because refresh is disabled")),!0)}},{key:"setRefreshTimer",value:function(){var e=this,t=this.slot.slotDivId;this.refreshTimer&&(this.logger.warn("[REFRESH]: Refresh timer already set for ".concat(t,". Clearing it.")),clearInterval(this.refreshTimer)),this.refreshTimer=setInterval((function(){e.processRefresh()}),this.CHECK_INTERVAL)}},{key:"scheduleRefresh",value:function(e){this.refreshTimer?this.logger.debug("[REFRESH]: Slot ".concat(this.slot.slotDivId," is already scheduled. eventName: ").concat(e)):(this.lastRefreshTimestamp=Date.now(),this.setRefreshTimer())}},{key:"handleSlotRenderEvent",value:function(){this.onScreenDuration=0,this.scheduleRefresh("slotRenderEnded")}},{key:"handleSlotLoadEvent",value:function(){this.onScreenDuration=0,this.scheduleRefresh("slotOnLoad")}},{key:"handleImpressionViewableEvent",value:function(){this.logger.debug("[REFRESH]: Received impression viewable event for slot ".concat(this.slot.slotDivId)),this.hasReceivedImpressionViewable=!0}},{key:"processRefresh",value:function(){if(!(Date.now()-this.lastRefreshTimestamp<1e3*this.refreshInterval)&&this.slot.zoneDiv&&this.slot.isInView()&&(this.onScreenDuration+=this.CHECK_INTERVAL,(this.hasReceivedImpressionViewable||!(this.onScreenDuration<this.minOnScreenDuration))&&!this.shouldSkipRefresh()))try{this.logger.log("[REFRESH]: Slot ".concat(this.slot.slotDivId," meets the conditions durationSinceLastRefresh: ").concat(Date.now()-this.lastRefreshTimestamp,", onScreenDuration: ").concat(this.onScreenDuration,", hasReceivedImpressionViewable: ").concat(this.hasReceivedImpressionViewable," and will trigger auction.")),this.lastRefreshTimestamp=Date.now(),this.triggerAuction(this.slot,this.getLastGptRequestElapsedTime())}catch(e){this.logger.warn("[REFRESH]: ".concat(this.slot.slotDivId," Refresh triggerAuction failed with ").concat(JSON.stringify(e)))}finally{this.resetCounter()}}}])}(wi),Ei=function(e){function t(e,n,i,r,a,c,u){var d;return s(this,t),(d=o(this,t,[e,n,r,a,c,u])).triggerAuction=i,d.logger.debug("[REFRESH]: ScheduledRefreshStrategy initialized for slot ".concat(d.slot.slotDivId,", interval: ").concat(d.refreshInterval)),d}return g(t,e),c(t,[{key:"getInfo",value:function(){return{strategyName:"ScheduledRefreshStrategy",isRefreshEnabled:this.isRefreshEnabled,lastGptRequestTimestamp:this.lastGptRequestTimestamp,refreshInterval:this.refreshInterval}}},{key:"shouldSkipRefresh",value:function(){return this.isRefreshEnabled?this.isBlockedByRefreshCallback()?(this.logger.log("[REFRESH]: ".concat(this.slot.slotDivId," Refresh blocked by callback")),!0):this.slot.isInDom()?(!this.slot.zoneDiv||!this.slot.isInView())&&(this.logger.log("[REFRESH]: Not refreshing ".concat(this.slot.slotDivId," because it is not in view")),!0):(this.logger.warn("[REFRESH]: Could not refresh ".concat(this.slot.slotDivId," because a div with that id was not found in the DOM")),!0):(this.logger.log("[REFRESH]: Not refreshing ".concat(this.slot.slotDivId," because refresh is disabled")),!0)}},{key:"setRefreshTimer",value:function(e){var t=this,n=this.slot.slotDivId;this.refreshTimer&&(this.logger.warn("[REFRESH]: Refresh timer already set for ".concat(n,". Clearing it.")),clearInterval(this.refreshTimer)),this.refreshTimer=setInterval((function(){t.processRefresh()}),1e3*e)}},{key:"scheduleRefresh",value:function(e){this.refreshTimer?this.logger.debug("[REFRESH]: Slot ".concat(this.slot.slotDivId," is already scheduled. eventName: ").concat(e)):(this.lastRefreshTimestamp=Date.now(),this.setRefreshTimer(this.refreshInterval))}},{key:"processRefresh",value:function(){this.shouldSkipRefresh()||(this.logger.log("[REFRESH]: Slot ".concat(this.slot.slotDivId," meets the conditions and will trigger auction.")),this.lastRefreshTimestamp=Date.now(),this.triggerAuction(this.slot,this.getLastGptRequestElapsedTime()))}},{key:"handleSlotLoadEvent",value:function(){this.scheduleRefresh("slotOnLoad")}},{key:"handleSlotRenderEvent",value:function(){this.scheduleRefresh("slotRenderEnded")}}])}(wi),Ci=function(){return c((function e(t,n){s(this,e),this.slot=t,this.logger=n,this.debug("[REFRESH]: NoRefreshStrategy initialized for slot ".concat(this.slot.slotDivId))}),[{key:"debug",value:function(e){this.logger&&this.logger.debug(e)}},{key:"getInfo",value:function(){return{strategyName:"NoRefreshStrategy",isRefreshEnabled:!1}}},{key:"destroy",value:function(){this.debug("[REFRESH]: NoRefreshStrategy destroy called for slot ".concat(this.slot.slotDivId,", no action taken."))}},{key:"disableRefresh",value:function(){this.debug("[REFRESH]: NoRefreshStrategy disableRefresh called for slot ".concat(this.slot.slotDivId,", no action taken."))}},{key:"enableRefresh",value:function(){this.debug("[REFRESH]: NoRefreshStrategy enableRefresh called for slot ".concat(this.slot.slotDivId,", no action taken."))}}])}();function Ti(e,t,n,i,r){e.log("[REFRESH]: Initializing RefreshManager");var o={};return r.onSlotRegistered.subscribe((function(s){var a,c;o[s.slot.slotDivId]=(a=s.slot,y(c=n.getRefreshInterval(a.zoneTemplate))&&c>0?"ViewportRefreshStrategy"===n.getRefreshStrategy()?(e.debug("[SLOTS]: Using ViewportRefreshStrategy for slot ".concat(a.slotDivId)),new _i(a,c,i.triggerRefreshAuction.bind(i),e,t,{onSlotRender:r.onSlotRender,onSlotLoaded:r.onSlotLoaded,onImpressionViewable:r.onImpressionViewable,onSlotRequested:r.onSlotRequested},1e3,n.isRefreshPrebidTimeoutBuffering())):(e.debug("[SLOTS]: Using ScheduledRefreshStrategy for slot ".concat(a.slotDivId)),new Ei(a,c,i.triggerRefreshAuction.bind(i),e,t,{onSlotRender:r.onSlotRender,onSlotLoaded:r.onSlotLoaded,onSlotRequested:r.onSlotRequested},n.isRefreshPrebidTimeoutBuffering())):(e.debug("[SLOTS]: Using NoOpRefreshStrategy for slot ".concat(a.slotDivId)),new Ci(a,e)))})),r.onSlotDestroyed.subscribe((function(e){!function(e){var t;null===(t=o[e])||void 0===t||t.destroy(),delete o[e]}(e.slotDivId)})),{disableRefreshBySlotId:function(e){var t;null===(t=o[e])||void 0===t||t.disableRefresh()},enableRefreshBySlotId:function(e){var t;null===(t=o[e])||void 0===t||t.enableRefresh()},destroyAllRefresh:function(){Object.keys(o).forEach((function(e){o[e].destroy()}))},disableAllRefresh:function(){Object.keys(o).forEach((function(e){o[e].disableRefresh()}))},enableAllRefresh:function(){Object.keys(o).forEach((function(e){o[e].enableRefresh()}))},getAllRefresh:function(){return Object.entries(o).filter((function(e){return"NoRefreshStrategy"!==h(e,2)[1].getInfo().strategyName})).reduce((function(e,t){var n=h(t,2),i=n[0],r=n[1],o=Object.assign({},e);return o[i]=r.getInfo(),o}),{})},reset:function(){Object.keys(o).forEach((function(e){o[e].destroy()})),o={}}}}var Ai=function(){return c((function e(t){s(this,e),this.bootstrappers=t}),[{key:"configureResponsive",value:function(){var e=this,t=vi(this.bootstrappers.evtBootstrapper.eventHub.onTagInitComplete);this.bootstrappers.evtBootstrapper.eventHub.onBreakpointChanged.subscribe((function(n){e.bootstrappers.environmentBootstrapper.getLogger().info("[RESPONSIVE]: Switching page to breakpoint '".concat(n.name,"'")),e.resetAfterChangedBreakpoint(),k(t.value)?e.getController().registerAndRunAuction(!0,!1,e.getApiV3()):e.getController().registerAndQueue(!0,!1,e.getApiV3())}))}},{key:"getRefreshManager",value:function(){return this.refreshManagerApi||(this.refreshManagerApi=Ti(this.bootstrappers.environmentBootstrapper.getLogger(),this.bootstrappers.monitoringBootstrapper.getReporter(),this.bootstrappers.settingsBootstrapper.getSettings(),this.getAuctionScheduler(),this.bootstrappers.evtBootstrapper.eventHub)),this.refreshManagerApi}},{key:"getAuctionExecutor",value:function(){if(!this.auctionExecutor){var e=this.bootstrappers.settingsBootstrapper.getSettings(),t=this.bootstrappers.gptBootstrapper.gptManagerInitSafe;this.auctionExecutor=Si(this.getFuseSlotRegistry(),this.bootstrappers.prebidBootstrapper.getMaybePrebidGlobal(),this.bootstrappers.uamBootstrapper.getUam(),this.bootstrappers.environmentBootstrapper.getLogger(),this.bootstrappers.monitoringBootstrapper.getReporter(),e,this.bootstrappers.evtBootstrapper.eventHub,this.bootstrappers.domBootstrapper.getTouchObserver(),t,this.bootstrappers.monitoringBootstrapper.getTelemetry())}return this.auctionExecutor}},{key:"getFuseSlotRegistry",value:function(){return this.fuseSlotRegistry||(this.fuseSlotRegistry=hi(this.bootstrappers.environmentBootstrapper.getLogger(),this.bootstrappers.monitoringBootstrapper.getReporter(),this.bootstrappers.environmentBootstrapper.getBrowserWindowObject(),this.bootstrappers.gptBootstrapper.getGptSlotRegistry(),this.bootstrappers.settingsBootstrapper.getSettings(),this.bootstrappers.conditionBootstrapper.getSlotConditionFactory(),this.bootstrappers.domBootstrapper.getViewportInfo(),this.bootstrappers.evtBootstrapper.eventHub,this.bootstrappers.prebidBootstrapper.getPrebidSlotRegistrator(),this.bootstrappers.prebidBootstrapper.getPrebidInitialiser(),this.bootstrappers.pluginBootstrapper.getIn2wSafeframe(),this.bootstrappers.gptBootstrapper.gptManagerInitSafe)),this.fuseSlotRegistry}},{key:"getZoneRegistry",value:function(){return this.zoneRegistry||(this.zoneRegistry=function(e,t,n){var i=[],r={},o={},s={};function a(e){return-1!==i.indexOf(e)}function c(e){return Object.keys(r).map((function(e){return r[e]})).filter((function(t){return t.zoneDivId==e})).shift()}function u(e){var t;return null!==(t=s[e])&&void 0!==t?t:0}return{register:function(n){var s=n.zoneInstanceId;if(!r[s]){var a=n.zoneDivId?c(n.zoneDivId):void 0;if(a){var u=a.zoneDiv,d=a.zoneInstanceId;if(d===s)return void e.error("[ZONE][".concat(d,"]: Ignoring unexpected re-registration"));e.warn("[ZONE][".concat(d,"]: Div ").concat(u.id," replaced in DOM without pageInit(). Registering ").concat(s)),i.push(d),delete r[d],delete o[d]}e.info("[ZONE][".concat(s,"]: Registered with DivId ").concat(n.zoneDiv.id)),t.reportFirstZone();var l={zoneInstanceId:s,zoneDiv:n.zoneDiv,zoneDivId:n.zoneDivId,zoneTemplateId:n.zoneTemplate.id,gpid:n.gpid};return r[s]=l,l}e.error("[ZONE][".concat(s,"]: Already registered"))},isDeletedZone:a,activateZone:function(t){var i=c(t);if(!i)return e.error("[ZONE][".concat(t,"]: Unknown zone")),!1;var r=i.zoneInstanceId;return!o[r]&&(o[r]=!0,n.emit({zoneTemplateId:i.zoneTemplateId,zoneDivId:i.zoneDivId,zoneEventType:"activate_zone_api",instanceId:i.zoneInstanceId,gpid:i.gpid,slotDivId:i.zoneDiv.id}),!0)},isManuallyActivated:function(t){var n;return r[t]?null!==(n=o[t])&&void 0!==n&&n:(e.error("[ZONE][".concat(t,"]: Unknown zone")),!1)},getRegisteredZones:function(){return Object.keys(r).map((function(e){return r[e]}))},reset:function(){Object.keys(r).forEach((function(t){a(t)?e.debug("[EVENT]: resetSlots() unit already deleted ".concat(t)):i.push(t)})),o={},r={}},deleteZone:function(t){var n=c(t);n?a(n.zoneInstanceId)?e.warn("[ZONE][".concat(t,"]: Deleted zone")):(delete r[n.zoneInstanceId],i.push(n.zoneInstanceId)):e.warn("[ZONE][".concat(t,"]: Unknown zone"))},getTemplateUsageCount:u,incrementTemplateUsageCount:function(e){s[e]=u(e)+1}}}(this.bootstrappers.environmentBootstrapper.getLogger(),this.bootstrappers.monitoringBootstrapper.getReporter(),this.bootstrappers.evtBootstrapper.eventHub.onZoneEvent)),this.zoneRegistry}},{key:"pageTargeting",get:function(){if(!this._pageTargeting){var e=this.bootstrappers.gptBootstrapper.gptManagerInitSafe;this._pageTargeting=function(e,t){var n=[];function i(i,r){var o=-1;n.forEach((function(e,t){-1===o&&e.key===i&&(o=t)})),e.info("[TARGETING]: Updating custom targeting for [key: ".concat(i,", value: ").concat(r,"]")),o>-1?n[o].value=r:n.push({key:i,value:r}),t.setPageTargetingAsync(i,r)}return{clearTargeting:function(){e.info("[TARGETING] Clearing page targeting"),t.clearGPTTargetingAsync(n),n=[]},setTargeting:i,setTargetingMultiple:function(e){e.forEach((function(e){return i(e.key,e.value)}))},getTargeting:function(){return n}}}(this.bootstrappers.environmentBootstrapper.getLogger(),e)}return this._pageTargeting}},{key:"getAuctionScheduler",value:function(){if(!this.auctionScheduler){var e=this.bootstrappers.environmentBootstrapper.getLogger();this.auctionScheduler=ti(e,this.getAuctionExecutor(),this.getAuctionPlanner(),this.getFuseSlotRegistry(),this.bootstrappers.domBootstrapper.getViewportInfo(),this.bootstrappers.settingsBootstrapper.getSettings(),this.pageTargeting)}return this.auctionScheduler}},{key:"getAuctionPlanner",value:function(){var e=this;return this.auctionPlanner||(this.auctionPlanner=function(e,t,n,i,r){return Xn(e,t,n,i,r)}(this.bootstrappers.environmentBootstrapper.getLogger(),this.bootstrappers.settingsBootstrapper.getSettings(),this.bootstrappers.domBootstrapper.getViewportInfo(),(function(){return e.bootstrappers.initBootstrapper.getInitManager().isLowDwellPage()}),this.bootstrappers.monitoringBootstrapper.getComponentStatusStore())),this.auctionPlanner}},{key:"getController",value:function(){return this.controller||(this.controller=function(e,t,n,i,r,o,s){var a=function(e){i.queueSlots(e),l()};function c(e,t,n){var o=d(r.processSlots(e),n,t),s=o.filter((function(e){return e.currentlyActive}));return i.queueSlots(s),o}function u(e,t,n){var i=c(e,t,n);return l(),i}function d(n,i,r){return n.forEach((function(e){t.register(e)})),e.register(n,i,r,a)}function l(){return o.isTagInitialised()?i.runAuction():(n.info("[CONTROLLER] Deferred the auction start until the tag is initialised"),!1)}return{registerAndQueue:c,registerAndRunAuction:u,registerZoneAndQueue:function(e,t,n,o){var s=r.processZoneWithDivId(e,t);if(!s)return null;var a=d(s,o,n);return a.forEach((function(e){(null==e?void 0:e.currentlyActive)&&i.queueSlots([e])})),a},activateZone:function(e){t.activateZone(e)},registerAndQueueLastSlotWithFuseId:function(e,t,n,o){var s=r.processLastSlotWithFuseId(e,t);if(s){var a=d([s],o,n)[0];return(null==a?void 0:a.currentlyActive)&&i.queueSlots([a]),a}},runAuction:l,forceRunAuction:function(t){var r=e.getSlot(t);r&&r.currentlyActive?i.forceRunAuction(r):n.warn("[CONTROLLER]: Could not force auction because slot ".concat(t," not found or is inactive"))},runAuctionAllActiveSlots:function(){i.queueSlots(e.getActiveSlots()),l()},reset:function(){n.log("[CONTROLLER]: resetSlots()"),e.reset(),i.reset(),t.reset()},destroyZone:function(i){t.deleteZone(i);var r=e.getSlotByZoneDivId(i);r?e.deleteSlot(r.slotDivId):n.debug("[CONTROLLER] Registered slot for zoneDivId ".concat(i," not found upon deletion"))},destroyAllRefresh:function(){s.destroyAllRefresh()},enableAllRefresh:function(){s.enableAllRefresh()},getAllRefresh:function(){return s.getAllRefresh()},handleBreakpointChange:function(){i.clearPendingAuctions(),i.clearAuctionBlock(),s.destroyAllRefresh();var t=e.getActiveSlots();i.queueSlots(t),i.runAuction()},loadSlots:function(e,t,i){if(!e)return n.warn("[CONTROLLER]: loadSlots() called during initialisation. Translating call to registerSlots() to avoid reset"),void u(!0,!1,t);i(),c(!1,!1,t),l()},destroySticky:function(){e.destroySticky()}}}(this.getFuseSlotRegistry(),this.getZoneRegistry(),this.bootstrappers.environmentBootstrapper.getLogger(),this.getAuctionScheduler(),this.getDomProcessor(),this.bootstrappers.initBootstrapper.getInitManager(),this.getRefreshManager())),this.controller}},{key:"getDomProcessor",value:function(){return this.domProcessor||(this.domProcessor=new li(this.bootstrappers.environmentBootstrapper.getLogger(),this.bootstrappers.environmentBootstrapper.getBrowserWindowObject(),this.bootstrappers.settingsBootstrapper.getSettings(),this.getFuseSlotFormatter(),this.bootstrappers.monitoringBootstrapper.getReporter(),this.getZoneCustomiserApi(),this.getComboZoneManager(),this.bootstrappers.monitoringBootstrapper.getComboZoneState())),this.domProcessor}},{key:"getComboZoneManager",value:function(){return this.comboZoneManager||(this.comboZoneManager=xi(this.bootstrappers.environmentBootstrapper.getLogger(),this.bootstrappers.domBootstrapper.getFuseDivElementFactory(),this.bootstrappers.settingsBootstrapper.getSettings())),this.comboZoneManager}},{key:"getFuseSlotFormatter",value:function(){return this.fuseSlotFormatter||(this.fuseSlotFormatter=gi(this.bootstrappers.environmentBootstrapper.getLogger(),this.bootstrappers.settingsBootstrapper.getSettings(),this.bootstrappers.domBootstrapper.getViewportInfo())),this.fuseSlotFormatter}},{key:"getPageManager",value:function(){var e=this;return this.pageManager||(this.pageManager=mi(this.bootstrappers.environmentBootstrapper.getLogger(),this.bootstrappers.environmentBootstrapper.getBrowserWindowObject().location.href,(function(){return e.resetPage()}),this.getAuctionScheduler().setAuctionBlock,(function(){return e.getAuctionScheduler().isAnyAuctionExecuted()}),this.pageTargeting.setTargetingMultiple,this.bootstrappers.evtBootstrapper.eventHub,this.bootstrappers.domBootstrapper.getViewportInfo().breakpointSupplier(),this.bootstrappers.settingsBootstrapper.getSettings())),this.pageManager}},{key:"resetAfterChangedBreakpoint",value:function(){this.bootstrappers.gptBootstrapper.getGptSlotRegistry().purgeAll(),this.bootstrappers.prebidBootstrapper.pbmInitialised.reset(),this.getController().reset()}},{key:"resetPage",value:function(){var e=this.bootstrappers.gptBootstrapper,t=e.gptManagerInitSafe;this.bootstrappers.initBootstrapper.getFuseQueueManager().clear(),t.applyPageTargetingAsync(),this.bootstrappers.monitoringBootstrapper.getGptCountManager().resetCounts(),t.resetCorrelator(),e.getGptSlotRegistry().purgeAll(),this.bootstrappers.prebidBootstrapper.pbmInitialised.reset(),this.getController().reset(),this.pageTargeting.clearTargeting(),this.bootstrappers.initBootstrapper.getFuseQueueManager().clear()}},{key:"getZoneCustomiserApi",value:function(){return this.zoneCustomiserApi?this.zoneCustomiserApi:function(e,t,n){return{getCurrentBreakpointName:function(){return n.getCurrentBreakpoint().name},settings:yi(e),getSlotsForTemplateId:function(e){return t.getSlotsForTemplateId(e)},viewportInfo:n}}(this.bootstrappers.settingsBootstrapper.getSettings(),this.getFuseSlotRegistry(),this.bootstrappers.domBootstrapper.getViewportInfo())}},{key:"getApiV3",value:function(){return this.apiV3||(this.apiV3=function(e,t,n,i,r,o,s,a,c,u,d){var l=yi(t);function g(){e.debug("[APIV3]: registerAll() started");var t=n.registerAndRunAuction(!0,!1,p);e.debug("[APIV3]: registerAll() finished, ".concat(t.length," slots found"))}var p={getCurrentBreakpointName:function(){return c.getCurrentBreakpoint().name},getWindow:function(){return c.browserWindow},processNewSlots:function(){g()},registerAll:g,registerZone:function(t){e.debug("[APIV3]: registerZone('".concat(t,"') started"));var i=n.registerZoneAndQueue(t,!0,!1,p);return i&&n.runAuction(),i},queueZone:function(t){return e.debug("[APIV3]: queueZone('".concat(t,"') started")),n.registerZoneAndQueue(t,!0,!1,p)},runAuction:function(){return e.debug("[APIV3]: runAuction() started"),n.runAuction()},disableRefreshByZone:function(e){return d.disableRefreshBySlotId(e)},enableRefreshByZone:function(e){return d.enableRefreshBySlotId(e)},getSlotsForTemplateId:function(e){return i.getSlotsForTemplateId(e)},setAllowedSafeFrameBidders:function(t){Array.isArray(t)&&t.every((function(e){return"string"==typeof e}))?(u.setAllowedSafeFrameBidders(t),e.debug("[APIV3]: The following bidders have been added to safeframe compatible bidders: ".concat(t))):e.debug("[APIV3]: Unable to set allowed safe frame bidders, invalid input")},destroySticky:function(){n.destroySticky()},isUseBackwardCompatibleNaming:function(){return l.isUseBackwardCompatibleNaming()},events:a,settings:l,slotRegistry:i,zoneRegistry:r,insertConditionFactory:o,slotConditionFactory:s,viewportInfo:c};return p}(this.bootstrappers.environmentBootstrapper.getLogger(),this.bootstrappers.settingsBootstrapper.getSettings(),this.getController(),this.getFuseSlotRegistry(),this.getZoneRegistry(),this.bootstrappers.conditionBootstrapper.getInsertConditionFactory(),this.bootstrappers.conditionBootstrapper.getSlotConditionFactory(),this.bootstrappers.evtBootstrapper.eventHub,this.bootstrappers.domBootstrapper.getViewportInfo(),this.bootstrappers.prebidBootstrapper.getPrebidSlotRegistrator(),this.getRefreshManager())),this.apiV3}},{key:"getSlotInfoRequestMethod",value:function(){return kn(this.bootstrappers.environmentBootstrapper.getBrowserWindowObject(),this.bootstrappers.environmentBootstrapper.getLogger(),this.bootstrappers.monitoringBootstrapper.getDeviceInfo().getBrowser(),"slotInfo")}},{key:"getSlotInfo",value:function(){var e=this;return this.slotInfo||(this.slotInfo=function(e,t,n,i,r){var o={};function s(i){var r,s=i.slot.getSlotElementId(),a=n.getZoneTemplates()[s],c=e.document.getElementById(s);if(a){var u={creativeId:i.creativeId,advertiserId:i.advertiserId,lineItemId:i.lineItemId,orderId:i.campaignId,respSizes:i.size,reqSizes:a.sizeMapping[t.getCurrentBreakpoint().name],googleQueryId:null!==(r=null==c?void 0:c.getAttribute("data-google-query-id"))&&void 0!==r?r:null},d=o[s];I(d)||0==d.length?o[s]=[u]:1==d.length?o[s]=[].concat(v(d),[u]):2==d.length&&(o[s]=[].concat(v(d.slice(1)),[u]))}}return i(s),{handleSlotRenderEndedEvent:s,reportSlotInfo:function(t,n){var i={email:null==n?void 0:n.email,url:e.location.href,datetimeStamp:(new Date).toLocaleString(),slots:o};if(null==n?void 0:n.authHeader)return r(t,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json",Authorization:n.authHeader},body:JSON.stringify(i)}).then((function(){alert("Blocking request sent.")})).catch((function(){alert("Error occurred while sending blocking request. Please reach out to the customer support team.")}));r(t,{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/json",Authorization:(null==n?void 0:n.authHeader)||""},body:JSON.stringify(i)}),alert("Blocking request sent. Please reach out to the customer support team to update your bookmarklet")}}}(this.bootstrappers.environmentBootstrapper.getBrowserWindowObject(),this.bootstrappers.domBootstrapper.getViewportInfo(),this.getFuseSlotRegistry(),(function(t){return e.bootstrappers.evtBootstrapper.eventHub.onSlotRender.subscribe(t)}),this.getSlotInfoRequestMethod())),this.slotInfo}}])}();var Pi=function(){return c((function e(t){s(this,e),this.opts=t}),[{key:"getUam",value:function(){return this.uam||(this.uam=function(e,t,n,i,r){function o(e,t,n,i,r,o){if(!t[e]){t[e]={init:function(){c("i",arguments)},fetchBids:function(){c("f",arguments)},setDisplayBids:function(){},targetingKeys:function(){return[]},_Q:[]};var s=n.createElement(i);s.async=!0,s.src=r,"function"==typeof o&&(s.readyState?s.onreadystatechange=function(){"loaded"!==s.readyState&&"complete"!==s.readyState||(s.onreadystatechange=null,o())}:s.onload=function(){o()});var a=n.getElementsByTagName(i)[0];a.parentNode.insertBefore(s,a)}function c(n,i){t[e]._Q.push([n,i])}}function s(i,r){n.setStateStatus("uam_initialise_start"),t.apstag.init(a(i),(function(){e.info("[UAM]: Initialisation finished"),n.setStateStatus("uam_initialise_finish"),r()}))}function a(e){var t={};e||(t.gdpr={cmpTimeout:0});var n=r.getSco();return!I(n)&&Object.getOwnPropertyNames(n).length&&(t.schain={ver:"1.0",complete:1,nodes:[{asi:n.asi,sid:n.sellerId,hp:1}]}),Object.assign({pubID:r.getUamSettings().pubID,adServer:"googletag"},t)}return{loadAmazonUam:o,load:function(i,r){if(e.debug("[UAM]: Loading script"),n.setStateStatus("uam_script_load_start"),o("apstag",t,t.document,"script","//c.amazon-adsystem.com/aax2/apstag.js",(function(){n.setStateStatus("uam_script_load_finish"),s(i,r)})),!t.apstag)return e.error("[INIT]: UAM script load failed.")},init:s,getUamConfig:a,makeBids:function(n,r){var o=n.hbPlan.uamPlan.slots.map((function(e){return{slotID:e.slotDivId,slotName:e.path,sizes:e.sizesHb}}));e.debug("[AUCTION][".concat(n.auctionId,"]: Sending UAM request with slot details: ").concat(JSON.stringify(o))),t.apstag.fetchBids({slots:o},(function(e){i.pushToGPTQue((function(){t.apstag.setDisplayBids(),r(e)}))}))}}}(this.opts.environmentBootstrapper.getLogger(),this.opts.environmentBootstrapper.getBrowserWindowObject(),this.opts.monitoringBootstrapper.getReporter(),this.opts.gptBootstrapper.gptManagerInitSafe,this.opts.settingsBootstrapper.getSettings())),this.uam}}])}(),Ri=function(){return c((function e(t,n,i,r,o){s(this,e),this.logger=t,this.settings=n,this.insertFactory=i,this.apiV3=r,this.gptManager=o,this._hasInterstitial=!1}),[{key:"hasInterstitial",get:function(){return this._hasInterstitial}},{key:"initInterstitial",value:function(){var e=this;if(this._hasInterstitial)this.logger.log("[INTERSTITIAL]: Already present");else{this.logger.info("[INTERSTITIAL]: Initialising");var t=this.getInterstitialSlot();if(null==t?void 0:t.injectConditionConfig){var n=this.insertFactory.buildActivator(t.injectConditionConfig,t.id,this.apiV3,(function(){e.setInterstitialSlot(t)}));n.checkCondition()?this.setInterstitialSlot(t):n.enableTriggers()}else t&&this.setInterstitialSlot(t)}}},{key:"clearInterstitial",value:function(){if(this._hasInterstitial){this.logger.info("[INTERSTITIAL]: Clearing");var e=this.getInterstitialSlot();e&&(this.gptManager.clearInterstitialSlotAsync(e.slot),this._hasInterstitial=!1)}else this.logger.log("[INTERSTITIAL]: No interstitial to clear")}},{key:"getInterstitialSlot",value:function(){return this.settings.getFuseSlots().find((function(e){var t=e.attributes;return!0===(null==t?void 0:t.interstitial)}))}},{key:"setInterstitialSlot",value:function(e){this.gptManager.setInterstitialSlotAsync(e),this._hasInterstitial=!0}}])}(),Bi=function(){return c((function e(t,n,i,r,o){s(this,e),this.slot=t,this.logger=n,this.viewportInfo=i,this.fuseDivElementFactory=r,this.settings=o}),[{key:"getSlotNonFluidSizes",value:function(){var e,t,n=this.viewportInfo.getCurrentBreakpoint().name;return null===(t=null===(e=this.slot.sizeMapping)||void 0===e?void 0:e[n])||void 0===t?void 0:t.filter((function(e){return"fluid"!==e}))}},{key:"getSlotMaxNonFluidHeight",value:function(){var e=this.getSlotNonFluidSizes(),t=e?e.map((function(e){return Number(e[1])})):[];return t.length?Math.max.apply(Math,v(t)):0}},{key:"getZoneTemplateId",value:function(){return this.settings.isUseBackwardCompatibleNaming()?this.slot.gamAdUnitId:this.slot.id}},{key:"createSlotElement",value:function(){return this.fuseDivElementFactory.createDivElement(this.getZoneTemplateId(),"fuse-slot-".concat(this.type))}},{key:"toHTML",value:function(e){return this.fuseDivElementFactory.toHTML(e)}},{key:"getSlotMaxNonFluidWidth",value:function(){var e=this.getSlotNonFluidSizes(),t=e?e.map((function(e){return Number(e[0])})):[];return t.length?Math.max.apply(Math,v(t)):0}},{key:"getLogContext",value:function(){return"[".concat(this.type,"][").concat(this.slot.id,"]:")}},{key:"getClassName",value:function(){return"publift-widget-".concat(this.slot.id)}},{key:"getContainerElement",value:function(){return document.querySelector(".".concat(this.getClassName(),"-container"))}},{key:"getStylesElement",value:function(){return document.querySelector("#".concat(this.getClassName(),"-styles"))}},{key:"getWidgetElement",value:function(){return document.querySelector(".".concat(this.getClassName()))}}])}(),Oi=function(e){function t(e,n,i,r,a,c,u,d,l){var g,p,f=!(arguments.length>9&&void 0!==arguments[9])||arguments[9];return s(this,t),(g=o(this,t,[e,n,i,r,c])).slot=e,g.logger=n,g.viewportInfo=i,g.fuseDivElementFactory=r,g.registerAdRendered=a,g.settings=c,g.refreshManager=u,g.slotRegistry=d,g.onShowCloseCallback=l,g.waitForCreative=f,g.loadingByCreative=!1,g.hiddenForever=!1,g.hasLoadedCreative=!1,g.type="sticky",g.barScrollHeight=0,g.barHeight=60,g.scrollingHeight=500,g.scrollCreative=!1,g.creativeHeight=0,g.scrollOffset=0,g.scrollPosition=0,g.scrollMultiplier=0,g.slotRenderCallbackRegistered=!1,g.attributes=g.makeAttributes(),g.scrollCreative=(null===(p=g.slot.stickyAttributes)||void 0===p?void 0:p.scrollCreative)||!1,g.scrollableElement=g.getScrollableElement(),g.setHeights(0),g}return g(t,e),c(t,[{key:"getScrollableElement",value:function(){var e,t;if(null===(e=this.slot.stickyAttributes)||void 0===e?void 0:e.scrollableSelector){var n=Ue(this.viewportInfo.browserWindow.document,this.logger,null===(t=this.slot.stickyAttributes)||void 0===t?void 0:t.scrollableSelector);if(n)return n}return this.viewportInfo.browserWindow}},{key:"createWidget",value:function(e){var t=this.getClassName();return this.toHTML('\n<div class="'.concat(t,'-container closed" style="display: ').concat(0===e?"none":"block",'">\n<div class="').concat(t,'-container-background">\n</div>\n  <div class="').concat(t,'-button">\n    <div></div>\n    <div></div>\n  </div>\n  <div class="').concat(t,'">\n  </div>\n</div>\n'))}},{key:"getHideAtSelector",value:function(){return this.getAttributes().hideSelector}},{key:"getHideAtElement",value:function(){var e=this.getHideAtSelector();return e?Ue(document,this.logger,e):null}},{key:"getFixedElement",value:function(){var e=this.getAttributes().fixedSelector;return e?Ue(document,this.logger,e):null}},{key:"getFixedClass",value:function(){return"".concat(this.getClassName(),"-fixed")}},{key:"getWidgetCloseButtonElement",value:function(){return document.querySelector(".".concat(this.getClassName(),"-button"))}},{key:"makeAttributes",value:function(){var e=Object.assign({bgColor:"#EFEFEF",bgOpacity:.7,allowClose:!1,buttonColor:"#313131",barColor:"#EFEFEF",borderWidth:"0px",zIndex:2147483645,compact:!1},this.slot.stickyAttributes);return e.compact&&(e.bgOpacity=1,e.bgColor=e.barColor),e}},{key:"addContent",value:function(e,t){var n=this,i=this.getClassName(),r=e.querySelector(".".concat(i)),o=this.createSlotElement();r.appendChild(o),e.querySelector(".".concat(i,"-button")).addEventListener("click",(function(){e.classList.contains("closed")?n.onShow():n.onClose(),clearInterval(n.hideAtElementInterval)}));var s=document.querySelector("body");return null==s||s.insertAdjacentElement("beforeend",t),null==s||s.insertAdjacentElement("beforeend",e),o}},{key:"getButtonStyles",value:function(e,t,n,i,r){return e?t?"border-radius: 0 0 2px 2px; top: ".concat(n,"px;"):"border-radius: 2px 2px 0 0; top: -20px;":t?"border-radius: 2px 2px 0 0; top: ".concat(i-20+r,"px;"):"border-radius: 0 0 2px 2px; top: 0px;"}},{key:"getFixedSelectorStyles",value:function(e,t,n,i,r){return t?".".concat(e,"-fixed {\n  ").concat(n?"top":"bottom"," : ").concat(i?r:0,"px !important;\n}\n").concat(t," {\n  transition: ").concat(n?"top":"bottom"," .3s linear;\n}"):""}},{key:"createStyles",value:function(){var e,t=this.getAttributes(),n=t.zIndex,i=t.compact,r=t.isTop,o=t.isButtonOutside,s=t.bgColor,a=t.bgOpacity,c=t.barColor,u=t.allowReopen,d=t.buttonColor,l=t.fixedSelector,g=t.borderWidth,p=this.getSlotMaxNonFluidHeight(),f=this.getContainerBordersSize(),h=this.getContainerBorderSize(),v=p+f,b=this.getSlotMaxNonFluidWidth()+f,m=u&&o?h:0,S=this.getClassName();return this.toHTML('\n<style id="'.concat(S,'-styles">\n.').concat(S,"-container {\n  direction: ltr;\n  z-index: ").concat(n,";\n  position: fixed;\n  ").concat(r?"top: 0":"bottom: 0",";\n  width: ").concat(i?b+"px":"100%",";\n  height: ").concat(v,"px;\n  transition: transform .3s linear, height .3s linear;\n  ").concat(o?"":"overflow: hidden;","\n  ").concat(i?"left: 50%; transform: translateX(-50%);":"left: 0;","\n}\n\n.").concat(S,"-container-background {\n  background-color: ").concat(s,";\n  opacity: ").concat(a,";\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  z-index: -1;\n}\n\n.").concat(S,"-button {\n  width: 40px;\n  margin-left: 2px;\n  height: 20px;\n  background-color: ").concat(c,";\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  position: absolute;\n  display: none;\n  transition: top .3s linear;\n  ").concat(this.getButtonStyles(Boolean(o),Boolean(r),v,p,h),"\n}\n.").concat(S,"-button :first-child, .").concat(S,"-button :last-child  {\n  background-color: ").concat(d,";\n  width: 13px;\n  height: 3px;\n  border-radius: 2px;\n}\n.").concat(S,"-button :first-child {\n  transform: rotate(").concat(r?"-":"","30deg) translateX(2px);\n}\n.").concat(S,"-button :last-child {\n  transform: rotate(").concat(r?"":"-","30deg) translateX(-2px);\n}\n.").concat(S," {\n  width: ").concat(i?b+"px":"100%",";\n  height: ").concat(v,"px;\n  display: flex;\n  justify-content: center;\n  align-items: ").concat(this.scrollCreative?"baseline":"center",";\n  transition: transform .3s linear, height .3s linear;\n  border").concat(i?"":r?"-bottom":"-top",": ").concat(g," solid ").concat(c,";\n  ").concat((null===(e=this.slot.stickyAttributes)||void 0===e?void 0:e.scrollCreative)?"overflow: hidden":"","\n}\n.").concat(S,"-container.closed {\n  ").concat(r?"transform: translateY(-".concat(v-m,"px)").concat(i?" TranslateX(-50%)":"",";"):"height: "+m+"px !important;","\n}\n.").concat(S,"-container.closed .").concat(S,"-button {\n  visibility: ").concat(u?"visible":"hidden",";\n  ").concat(u?"":"display: none;","\n}\n.").concat(S,"-container.closed .").concat(S,"-button :first-child {\n  transform: rotate(").concat(r?"":"-","30deg) translateX(2px);\n}\n.").concat(S,"-container.closed .").concat(S,"-button :last-child {\n  transform: rotate(").concat(r?"-":"","30deg) translateX(-2px);\n}\n").concat(this.getFixedSelectorStyles(S,l||"",Boolean(r),p,v),"\n</style>\n"))}},{key:"getContainerBorderSize",value:function(){var e=this.getAttributes().borderWidth;return Number(e.substring(0,e.length-2))}},{key:"getContainerBordersSize",value:function(){var e=this.getAttributes().compact;return this.getContainerBorderSize()*(e?2:1)}},{key:"getAttributes",value:function(){return this.attributes}},{key:"insert",value:function(){var e=this;this.logger.debug("".concat(this.getLogContext()," add widget"));var t=this.createWidget(this.getSlotMaxNonFluidHeight()),n=this.createStyles(),i=this.addContent(t,n);return this.viewportInfo.browserWindow.requestAnimationFrame((function(){e.logger.debug("".concat(e.getLogContext()," showing on insert with waitForCreative ").concat(e.waitForCreative)),e.show()})),this.getHideAtSelector()&&this.setHideAtElementListener(),this.scrollCreative&&this.scrollableElement&&this.scrollableElement.addEventListener("scroll",(function(){e.updateWidgetPosition()})),[i]}},{key:"getSlotMaxNonFluidHeight",value:function(){return this.barHeight}},{key:"setHeights",value:function(e){this.creativeHeight=e;var t=this.getSlotNonFluidSizes(),n=(null==t?void 0:t.length)?t.map((function(e){return Number(e[1])})):[0],i=this.slot.stickyAttributes.heightCalculationMethod,r=n.sort((function(e,t){return t-e}));if(this.scrollCreative)switch(i){case"half_max":this.barHeight=r[0]/2+1;break;case"second_max":this.barHeight=r[1]||r[0];break;case"min":this.barHeight=Math.min.apply(Math,v(n));break;default:this.barHeight=Math.max.apply(Math,v(n))}else this.barHeight=Math.max.apply(Math,v(n));this.barScrollHeight=e?e-this.barHeight:0}},{key:"hideAtElementListener",value:function(){var e=this.getContainerElement(),t=this.getHideAtElement(),n=this.getAttributes().isHideForever;k(t)&&e&&(fi(this.viewportInfo.getViewportStatus(),t,1,0)?e.classList.contains("closed")||(this.hide(),n&&clearInterval(this.hideAtElementInterval)):e.classList.contains("closed")&&(this.logger.debug("".concat(this.getLogContext()," showing from hideAtElementListener with waitForCreative ").concat(this.waitForCreative)),this.show()))}},{key:"setHideAtElementListener",value:function(){var e=this;this.hideAtElementInterval=setInterval((function(){e.hideAtElementListener()}),500)}},{key:"isHideSelectorVisible",value:function(){var e=this.getHideAtElement();return!(!e||!fi(this.viewportInfo.getViewportStatus(),e,1,0))}},{key:"onBreakpointChange",value:function(){var e=this.getAttributes().compact,t=this.getContainerElement(),n=this.getWidgetElement();if(n){this.setHeights(0);var i=this.barHeight,r=this.getSlotMaxNonFluidWidth(),o=this.getContainerBordersSize(),s=i+o,a=r+o;t.style.height=(0===i?0:s)+"px",t.style.display=0===i?"none":"block",e&&i&&(t.style.width=a+"px",n.style.width=r+"px"),n.style.height=i+"px",0===i||this.isHideSelectorVisible()?this.updateFixedElement(!0):this.updateFixedElement(),this.getStylesElement().innerHTML=this.createStyles().innerHTML}}},{key:"delete",value:function(){this.logger.debug("".concat(this.getLogContext()," delete sticky"));var e=this.getStylesElement(),t=this.getContainerElement();return this.updateFixedElement(!0),this.getHideAtSelector()&&clearInterval(this.hideAtElementInterval),e&&e.remove(),t&&t.remove(),!0}},{key:"getSlotElement",value:function(){return document.querySelector(".".concat(this.getClassName()," .fuse-slot-sticky"))}},{key:"getScrollY",value:function(){var e;return(null===(e=this.slot.stickyAttributes)||void 0===e?void 0:e.scrollableSelector)?this.scrollableElement.scrollTop:this.scrollableElement.scrollY}},{key:"updateWidgetPosition",value:function(e){if(this.scrollCreative&&this.hasLoadedCreative&&this.slot.stickyAttributes){var t=this.slot.stickyAttributes,n=t.scrollingHeight,i=t.scrollableSelector;if(n){var r=n.trim();r.includes("vh")?this.scrollingHeight=i?this.scrollableElement.scrollHeight-(this.scrollableElement.offsetHeight||0):Number(r.replace("vh",""))*this.viewportInfo.browserWindow.innerHeight:this.scrollingHeight=Number(r.replace("px",""))}this.scrollMultiplier=this.barScrollHeight/this.scrollingHeight;var o=this.getScrollY();if(this.logger.debug("".concat(this.getLogContext()," updateWidgetPosition before"),e,this.creativeHeight,this.barHeight,this.scrollOffset,this.scrollPosition,this.getWidgetElement().style.marginTop,o,this.scrollingHeight),e)this.getWidgetElement().style.alignItems=this.creativeHeight>this.barHeight?"baseline":this.attributes.isTop?"start":"end";else if(this.creativeHeight>this.barHeight){var s=o-this.scrollPosition,a=s*this.scrollMultiplier;this.scrollOffset+=a,this.logger.debug("".concat(this.getLogContext()," updateWidgetPosition check"),a,s,this.scrollOffset),s<=0?this.scrollOffset<=0&&(this.scrollOffset=0):this.scrollOffset>this.barScrollHeight&&(this.scrollOffset=this.barScrollHeight),this.getSlotElement().style.marginTop="-"+this.scrollOffset+"px",this.scrollPosition=o}this.logger.debug("".concat(this.getLogContext()," updateWidgetPosition after"),e,this.creativeHeight,this.barHeight,this.scrollOffset,this.scrollPosition,this.getWidgetElement().style.marginTop,this.scrollMultiplier,this.barScrollHeight)}}},{key:"show",value:function(){var e=this,t=this.getZoneTemplateId();return this.loadingByCreative||(this.waitForCreative&&!this.hasLoadedCreative?(this.loadingByCreative=!0,this.slotRenderCallbackRegistered||(this.logger.debug("".concat(this.getLogContext()," register slotRender callback")),this.registerAdRendered((function(n){if(-1!==n.slot.getSlotElementId().indexOf(t)){if(e.scrollCreative&&n.size){var i=Number(n.size[1]),r=0,o=n.slot.getTargeting("hb_size")[0]||n.slot.getTargeting("amznsz")[0];1===i&&o&&(r=Rt(o)[1],e.logger.debug("".concat(e.getLogContext()," get height ").concat(r," from targeting"))),e.setHeights(r||i),e.updateWidgetPosition(!0)}e.logger.debug("".concat(e.getLogContext()," show widget by creative ").concat(n.slot.getSlotElementId())),!e.isHideSelectorVisible()&&e.loadingByCreative?e.onShow():e.logger.debug("".concat(e.getLogContext()," unable to show widget by creative ").concat(n.slot.getSlotElementId(),", isHideSelectorVisible: ").concat(e.isHideSelectorVisible(),", loadingByCreative: ").concat(e.loadingByCreative)),e.loadingByCreative=!1,e.hasLoadedCreative=!0,e.logger.debug("".concat(e.getLogContext()," has loaded ").concat(n.slot.getSlotElementId()))}})),this.slotRenderCallbackRegistered=!0)):this.onShow()),!0}},{key:"onShow",value:function(){var e=this,t=this.getContainerElement();if(t){t.classList.remove("closed"),this.updateFixedElement(),this.slotRegistry.getSlotsForTemplateId(this.getZoneTemplateId()).forEach((function(t){t&&e.refreshManager.enableRefreshBySlotId(t.slotDivId)})),this.onShowCloseCallback();var n=this.getClassName(),i=this.getAttributes().allowClose,r=t.querySelector(".".concat(n,"-button"));r&&i&&(r.style.display="flex")}}},{key:"onClose",value:function(){var e=this,t=this.getContainerElement();t&&(t.classList.add("closed"),this.updateFixedElement(!0),this.slotRegistry.getSlotsForTemplateId(this.getZoneTemplateId()).forEach((function(t){t&&e.refreshManager.disableRefreshBySlotId(t.slotDivId)})),this.onShowCloseCallback())}},{key:"hide",value:function(){return this.logger.debug("".concat(this.getLogContext()," hiding")),this.onClose(),!0}},{key:"updateFixedElement",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.logger.debug("".concat(this.getLogContext()," updateFixedElement ").concat(e?"restore":"update"));var t=this.getFixedElement();if(t){var n=this.getFixedClass();e?t.classList.remove(n):t.classList.add(n)}}}])}(Bi),zi=function(e){function t(e,n,i,r,a,c,u){var d;return s(this,t),(d=o(this,t,[e,n,i,r,u])).slot=e,d.logger=n,d.viewportInfo=i,d.fuseDivElementFactory=r,d.registerAdRendered=a,d.widgetsRenderer=c,d.settings=u,d.type="interscroller",d}return g(t,e),c(t,[{key:"getAttributes",value:function(){return Object.assign({selector:".adBreak",showBanner:!1,height:"100vh",zIndex:1e7,top:"auto"},this.slot.interscrollerAttributes)}},{key:"getTopOffset",value:function(){return this.widgetsRenderer.getMiniScrollersTopOffset()}},{key:"insert",value:function(){var e=this,t=this.getAttributes(),n=t.showBanner,i=t.zIndex,r=t.top,o=t.height,s=t.selector,a=this.getSlotMaxNonFluidHeight(),c=this.createSlotElement(),u=this.getClassName(),d=n?'<div class="'.concat(u,'-container-message banner_top">Advertisement</div>'):"",l=this.toHTML('\n    <div class="'.concat(u,'-container">\n      ').concat(d,'\n        <div class="').concat(u,'-scroll-clip">\n          <div class="').concat(u,' publift-widget-interscroller">').concat(c.outerHTML,"</div>\n        </div>\n    </div>\n  ")),g=this.toHTML('\n  <style id="'.concat(u,'-styles">\n  .').concat(u,"-container {\n    width: 100vw;\n    min-height: ").concat(o,";\n    z-index: ").concat(i,";\n    position: relative;\n    display: ").concat(0===a?"none":"block",";\n  }\n\n  .").concat(u,"-container-message {\n    position: absolute;\n    background-color: black;\n    color: white;\n    padding: .5em;\n    text-align: center;\n    font-family: sans-serif;\n    width: calc(100% - 1em);\n    z-index: 9999;\n  }\n\n  .").concat(u,"-scroll-clip {\n    position: absolute;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    margin: 0;\n    padding: 0;\n    clip-path: inset(0px);\n    clip: rect(0px, auto, auto, 0px);\n    min-height: ").concat(o,"\n  }\n\n  .").concat(u," {\n    position: fixed;\n    top: ").concat(r||this.widgetsRenderer.getMiniScrollersTopOffset()+"px"," !important;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    margin: 0;\n    padding: 0;\n    bottom: 0;\n    transform: translateZ(0px);\n  }\n  </style>\n  ")),p=document.querySelector("body");if(p){var f=Ue(document,this.logger,s);if(f){p.insertAdjacentElement("beforeend",g),f.appendChild(l);var h=l.getBoundingClientRect().x-p.getBoundingClientRect().x;return l.style.marginLeft="-".concat(h,"px"),l.style.marginRight="-".concat(h,"px"),[c]}this.logger.info("".concat(this.getLogContext()," insertionPoint with selector not found: ").concat(s))}return this.registerAdRendered((function(t){if(e.logger.debug("".concat(e.getLogContext()," gpt event ").concat(JSON.stringify(t))),-1!==t.slot.getSlotElementId().indexOf(e.getZoneTemplateId())&&(e.logger.debug("".concat(e.getLogContext()," gpt event suit")),t.creativeId&&t.size)){e.logger.debug("".concat(e.getLogContext()," gpt event creative ").concat(t.size[1]));var n=Number(t.size[1]),i=0,r=t.slot.getTargeting("hb_size")[0]||t.slot.getTargeting("amznsz")[0];1===n&&r&&(i=Rt(r)[1],e.logger.debug("".concat(e.getLogContext()," get height ").concat(i," from targeting"))),e.updateWidgetPosition(i||n)}})),[]}},{key:"updateWidgetPosition",value:function(e){var t=this.getSlotMaxNonFluidHeight(),n=this.widgetsRenderer.getMiniScrollersTopOffset(),i=(this.viewportInfo.browserWindow.innerHeight-(e>1?e:t))/2,r=n;this.logger.debug("".concat(this.getLogContext()," get top offset ").concat(r," for adunit size ").concat(e," maxHeight ").concat(t," topOffsetCentered ").concat(i," topOffsetSettings ").concat(n)),this.getWidgetElement().style.top="".concat(r,"px")}},{key:"onBreakpointChange",value:function(){var e=this.getSlotMaxNonFluidHeight(),t=this.getContainerElement();t&&(t.style.display=0===e?"none":"block")}},{key:"delete",value:function(){var e=this.getStylesElement(),t=this.getContainerElement();return!(!e||!t)&&(e.remove(),t.remove(),!0)}},{key:"hide",value:function(){return this.getContainerElement().style.display="none",!0}},{key:"show",value:function(){return this.getContainerElement().style.display="block",!0}}])}(Bi),Di=function(e){function t(){var e;return s(this,t),(e=o(this,t,arguments)).type="dynamic",e}return g(t,e),c(t,[{key:"getAttributes",value:function(){var e,t,n,i;return Object.assign(Object.assign({},this.slot.dynamicAttributes),{skip:Number((null===(e=this.slot.dynamicAttributes)||void 0===e?void 0:e.skip)||0),each:Number((null===(t=this.slot.dynamicAttributes)||void 0===t?void 0:t.each)||0),incrementEach:Number((null===(n=this.slot.dynamicAttributes)||void 0===n?void 0:n.incrementEach)||0),repeatHeight:Number((null===(i=this.slot.dynamicAttributes)||void 0===i?void 0:i.repeatHeight)||1e3)})}},{key:"createElement",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=this.createSlotElement();return e&&e.split(" ").forEach((function(e){return n.classList.add(e)})),t&&(n.style.cssText=t),n}},{key:"getInsertNodes",value:function(e){var t=this.getLogContext();if(!e)return this.logger.warn("".concat(t," Selector should be defined")),null;var n=function(e,t,n){if(!n)return t.warn("[WIDGETS] safeQuerySelectorAll selector should be defined"),null;try{return e.querySelectorAll(n)}catch(e){t.error("[WIDGETS] safeQuerySelectorAll error: ".concat(n))}return null}(document,this.logger,e);return(null==n?void 0:n.length)?this.logger.debug("".concat(t," Page has ").concat(n.length," elements suitable for selector ").concat(e)):this.logger.info("".concat(t," No element with selector ").concat(e," found")),n}},{key:"notFuseSlot",value:function(e){return!e||e.getAttribute("data-fuse")!==this.getZoneTemplateId()||(this.logger.debug("".concat(this.getLogContext()," Skip insertion cause slot already inserted")),!1)}},{key:"filterNodes",value:function(e){var t=this.getAttributes(),n=t.skip,i=t.each,r=t.position,o=t.incrementEach,s=[],a=0,c=i;return e.forEach((function(e,t){var i=t+1;if(n&&i<=n)return!1;if("incontent"!==r&&c){if((i-n-a)%c!=0)return!1;o&&(a+=c,c+=o)}s.push(e)})),s}},{key:"getZoneDiv",value:function(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?e.querySelector("div[data-fuse]"):e}},{key:"insert",value:function(){var e=this,t=this.getAttributes(),n=t.selector,i=t.position,r=t.classNames,o=t.css,s=t.wrapperContent,a=t.repeatHeight,c=this.getInsertNodes(n);if(!(null==c?void 0:c.length))return this.logger.debug("".concat(this.getLogContext()," Injection skipped")),[];var u=0,d=[];return this.filterNodes(c).forEach((function(t){var n=e.createElement(r,o),c=n;s&&(n=e.wrapElement(n,s));var l=t.nextElementSibling,g=t.parentNode,p=t.previousElementSibling,f=t.lastElementChild;switch(i){case"after":e.notFuseSlot(l)&&(g.insertBefore(n,l),d.push(c));break;case"before":e.notFuseSlot(p)&&(g.insertBefore(n,t),d.push(c));break;case"replace":t.replaceWith(n),d.push(c);break;case"incontent":var h=t.getBoundingClientRect().top+t.getBoundingClientRect().height+document.documentElement.scrollTop,v=Math.floor(h/a);v>u&&(u=v,e.notFuseSlot(l)&&(g.insertBefore(n,l),d.push(c)));break;default:e.notFuseSlot(f)&&(t.appendChild(n),d.push(c))}})),d}},{key:"wrapElement",value:function(e,t){var n=document.createElement("div");return n.innerHTML=t,n.firstElementChild.appendChild(e),n.firstElementChild}},{key:"delete",value:function(){var e=document.querySelectorAll('[data-fuse="'.concat(this.getZoneTemplateId(),'"]'));return e.forEach((function(e){e.remove()})),e.length>0}},{key:"hide",value:function(){throw new Error("Method not implemented.")}},{key:"show",value:function(){throw new Error("Method not implemented.")}},{key:"onBreakpointChange",value:function(){throw new Error("Method not implemented.")}}])}(Bi),Mi=function(){return c((function e(t,n){s(this,e),this.logger=t,this.widgetsRenderer=n,this.checkInterval=null,this.statuses=[]}),[{key:"getStatuses",value:function(){return this.statuses}},{key:"start",value:function(e){var t=this;!(arguments.length>1&&void 0!==arguments[1]&&arguments[1])&&this.statuses.length||(this.logger.debug("[WIDGETS][CHECKER] Start to check slots"),this.statuses=e.filter((function(e){var t,n;return(null===(t=e.dynamicAttributes)||void 0===t?void 0:t.selector)||(null===(n=e.interscrollerAttributes)||void 0===n?void 0:n.selector)})).map((function(e){var n,i,r=(null===(n=e.dynamicAttributes)||void 0===n?void 0:n.selector)||(null===(i=e.interscrollerAttributes)||void 0===i?void 0:i.selector);return{slot:e,selector:r||"",countSelector:t.countSelector(r),countSlot:t.countSlot(e.id)}})),this.statuses.length&&(this.checkInterval=setInterval((function(){return t.check()}),100)))}},{key:"stop",value:function(){this.checkInterval&&clearInterval(this.checkInterval),this.statuses=[]}},{key:"check",value:function(){var e=this;this.statuses.forEach((function(t){var n=t.slot,i=e.countSelector(t.selector),r=e.countSlot(n.id);t.countSelector===i&&t.countSlot===r||n.injectConditionConfig||(e.logger.debug("[WIDGETS][".concat(n.id,'] Injecting by selector "').concat(t.selector,'" change: selectors ').concat(i," slots ").concat(r)),e.widgetsRenderer.injectWidget(t.slot),t.countSelector=e.countSelector(t.selector),t.countSlot=e.countSlot(t.slot.id))}))}},{key:"countSelector",value:function(e){if(!e)return this.logger.warn("[WIDGETS]: Selector should be defined for countSelector"),0;try{return document.querySelectorAll(e).length}catch(t){this.logger.warn("[WIDGETS]: Invalid selector for count ".concat(e))}return 0}},{key:"countSlot",value:function(e){return document.querySelectorAll('[data-fuse="'.concat(e,'"]')).length}}])}(),Ni=function(){return c((function e(t,n,i,r,o,a,c,u,d,l,g){var p=this;s(this,e),this.logger=t,this.settings=n,this.slotRegistry=i,this.refreshManager=r,this.triggerContextApi=o,this.slotsController=a,this.conditionFactory=c,this.viewportInfo=u,this.events=d,this.videoManager=l,this.fuseDivElementFactory=g,this.inited=!1,this.widgets=[],this.widgetsChecker=new Mi(this.logger,this),this.events.onBreakpointChanged.subscribe((function(){return p.handleBreakpointChange()})),this.events.onPageInit.subscribe((function(e){e.isPageTransition&&p.reset()})),this.events.onZoneDeleted.subscribe((function(e){var t=p.settings.getFuseSlots().find((function(t){return t.id===e.zoneTemplateId}));t?p.getWidget(t)&&p.removeWidget(t):p.logger.debug("[WIDGETS] Zone template ".concat(e.zoneTemplateId," not found"))}))}),[{key:"getStickySlots",value:function(){return this.settings.getFuseSlots().filter((function(e){var t;return null===(t=e.attributes)||void 0===t?void 0:t.sticky}))}},{key:"getInterscrollerSlots",value:function(){return this.settings.getFuseSlots().filter((function(e){var t;return null===(t=e.attributes)||void 0===t?void 0:t.interscroller}))}},{key:"getDynamicSlots",value:function(){return this.settings.getFuseSlots().filter((function(e){var t;return null===(t=e.attributes)||void 0===t?void 0:t.dynamic}))}},{key:"getScrollToStickSlots",value:function(){return this.settings.getFuseSlots().filter((function(e){var t;return null===(t=e.attributes)||void 0===t?void 0:t.scrollToStick}))}},{key:"getMiniscrollerSlots",value:function(){return this.settings.getFuseSlots().filter((function(e){var t;return null===(t=e.attributes)||void 0===t?void 0:t.miniscroller}))}},{key:"isSlotInjected",value:function(e){return null!==document.querySelector('[data-fuse="'.concat(e.id,'"]'))}},{key:"getWidget",value:function(e){return this.widgets.filter((function(t){return t.slot.id===e.id}))[0]}},{key:"removeWidget",value:function(e){var t=this.getWidget(e);return t?(t.delete(),this.logger.debug("[WIDGETS][".concat(e.id,"] Widget deleted")),!0):(this.logger.debug("[WIDGETS][".concat(e.id,"] Widget was not found")),!1)}},{key:"handleBreakpointChange",value:function(){var e=this,t=this.getStickySlots(),n=this.getInterscrollerSlots();this.logger.info("[WIDGETS] onBreakpointChange Stickies: ".concat(t.length," Scrolls: ").concat(n.length)),t.concat(n).forEach((function(t){var n=e.getWidget(t);n&&n.onBreakpointChange()}))}},{key:"getWidgetSlots",value:function(){return this.getDynamicSlots().concat(this.getInterscrollerSlots(),this.getStickySlots())}},{key:"getWidgetsWithSelector",value:function(){return this.getDynamicSlots().concat(this.getInterscrollerSlots())}},{key:"cleanupDynamicSlots",value:function(){this.getDynamicSlots().forEach((function(e){document.querySelectorAll('[data-fuse="'.concat(e.id,'"]')).forEach((function(e){e.remove()}))}))}},{key:"injectWidget",value:function(e){var t,n=this;this.logger.debug("[WIDGETS][".concat(e.id,"] Inject widget"));var i=e.attributes,r=i.sticky,o=i.interscroller,s=i.dynamic,a=this.getWidget(e),c=!1;if(r&&this.settings.disableYandexSticky())this.logger.debug("[WIDGETS][".concat(e.id,"] Skip injection. Yandex sticky is disabled"));else if((r||o)&&this.isSlotInjected(e))this.logger.debug("[WIDGETS][".concat(e.id,"] Skip injection. DOM element exists"));else{if(!a){if(r)a=new Oi(e,this.logger,this.viewportInfo,this.fuseDivElementFactory,(function(e){return n.events.onSlotRender.subscribe(e)}),this.settings,this.refreshManager,this.slotRegistry,(function(){n.updateFuseStyles()}),!this.settings.isYandexEnabled()),c=Boolean(null===(t=e.stickyAttributes)||void 0===t?void 0:t.isTop);else if(o)a=new zi(e,this.logger,this.viewportInfo,this.fuseDivElementFactory,(function(e){return n.events.onSlotRender.subscribe(e)}),this,this.settings);else{if(!s)return void this.logger.warn("[WIDGETS][".concat(e.id,"] Skip injection of unknown widget"));this.logger.debug("[WIDGETS][".concat(e.id,"] Injecting dynamic slot with attributes ").concat(JSON.stringify(e.dynamicAttributes))),a=new Di(e,this.logger,this.viewportInfo,this.fuseDivElementFactory,this.settings)}this.widgets.push(a)}var u=a.insert(),d=this.settings.getVideoSettings();u.forEach((function(e){n.logger.debug("[WIDGETS][".concat(e.id,"] Run queueZone")),n.slotsController.registerZoneAndQueue(e.id,!0,!1,n.triggerContextApi),d.enabled&&d.injectedAdUnitId&&e.id.includes(d.injectedAdUnitId)&&n.videoManager.initVideo(!0)})),u.length>0&&this.slotsController.runAuction(),c&&this.updateFuseStyles()}}},{key:"render",value:function(){var e=this;this.getWidgetSlots().forEach((function(t){if(t.injectConditionConfig){var n=e.conditionFactory.buildActivator(t.injectConditionConfig,t.id,e.triggerContextApi,(function(){e.injectWidget(t)}));n.checkCondition()?e.injectWidget(t):n.enableTriggers()}else e.injectWidget(t)}))}},{key:"init",value:function(){this.logger.debug("[WIDGETS] Init"),this.inited?this.logger.debug("[WIDGETS] Skipped initialisation as it is already initialised"):(this.inited=!1,this.render(),this.widgetsChecker.start(this.getWidgetsWithSelector()),this.addScrollToStickListener(),this.injectFuseStyles(),this.inited=!0)}},{key:"cleanup",value:function(){var e=this;this.logger.debug("[WIDGETS] cleanup"),this.widgetsChecker.stop(),this.getWidgetSlots().forEach((function(t){return e.removeWidget(t)}))}},{key:"reset",value:function(){this.cleanup(),this.logger.debug("[WIDGETS] reset"),this.render(),this.widgetsChecker.start(this.getWidgetsWithSelector(),!0)}},{key:"getMiniScrollersTopOffset",value:function(){var e=this,t=0,n=this.settings.getTopStickyHeaderSelector();if(n){var i=Ue(document,this.logger,n);i&&(t+=i.clientHeight,this.logger.debug("[WIDGETS] miniscrollers offset set to ".concat(t," because of topStickyHeader")))}return this.getStickySlots().forEach((function(n){var i;if(null===(i=n.stickyAttributes)||void 0===i?void 0:i.isTop){var r=e.getWidget(n);if((null==r?void 0:r.getContainerElement())&&!r.getContainerElement().classList.contains("closed")){var o=e.settings.maxSlotHeightForBreakpoint(n,e.viewportInfo.getCurrentBreakpoint().name);t+=null!=o?o:0,e.logger.debug("[WIDGETS] miniscrollers offset set to ".concat(t," because of top sticky"))}}})),t}},{key:"injectFuseStyles",value:function(){if(document.getElementById("publift-fuse-styles"))this.logger.debug("[WIDGETS] styles already injected");else{var e="",t=this.getMiniScrollersTopOffset();if(this.settings.isMiniScrollersEnabled()){this.logger.debug("[WIDGETS] inject fuse styles");var n="\n      .fuse-slot-mini-scroller .fuse-slot {\n        top: ".concat(0|t,"px;\n        position: sticky !important;\n        overflow: hidden !important;\n      }\n      .fuse-slot-mini-scroller {\n        overflow: initial !important;\n        display: block !important;\n      }\n      ");this.logger.debug("[WIDGETS] injected miniScroller styles"),e+=n}e+="\n    .fuse-slot-scroll-to-stick .fuse-slot {\n      z-index: 9999;\n      top: ".concat(0|t,"px;\n      position: fixed;\n      width: 100%;\n      pointer-events: auto;\n    }\n    .publift-widget-interscroller {\n      top: ").concat(0|t,"px;\n    }"),this.fuseDivElementFactory.insertStyles("publift-fuse-styles",e)}}},{key:"updateFuseStyles",value:function(){var e=document.getElementById("publift-fuse-styles");e&&e.remove(),this.injectFuseStyles()}},{key:"getScrollToStickPrevElement",value:function(e){var t=e.previousElementSibling;return t||this.getScrollToStickPrevElement(e.parentElement)}},{key:"addScrollToStickListener",value:function(){var e=this;this.getScrollToStickSlots().length&&(this.logger.debug("[WIDGETS] scrollToStick slots found ".concat(this.getScrollToStickSlots().length,". Attach scroll listener")),this.viewportInfo.browserWindow.addEventListener("scroll",(function(){return e.scrollToStickListener()}),!0))}},{key:"scrollToStickListener",value:function(){var e=this;this.logger.debug("[WIDGETS] scrollToStickListener");var t=this.getScrollToStickSlots(),n=this.settings.scrollToStickDisableDepth()||0,i=this.getMiniScrollersTopOffset(),r=n>0&&this.viewportInfo.browserWindow.scrollY>n;t.forEach((function(n){document.querySelectorAll('[data-fuse="'.concat(n.id,'"]')).forEach((function(o){if(r)return e.logger.debug("[WIDGETS][".concat(n.id,"] scrollToStick removed by scrollToStickDisableDepth")),o.classList.remove("fuse-slot-scroll-to-stick"),void(t=t.filter((function(e){return e.id!==n.id})));var s=e.getScrollToStickPrevElement(o);s&&s.getBoundingClientRect().y+s.getBoundingClientRect().height-i<0?(e.logger.debug("[WIDGETS][".concat(n.id,"] scrollToStick set")),o.classList.add("fuse-slot-scroll-to-stick")):(e.logger.debug("[WIDGETS][".concat(n.id,"] scrollToStick removed")),o.classList.remove("fuse-slot-scroll-to-stick"))}))}))}}])}(),Li="publift-primis-script",ji="primisPlayer",Fi=function(){return c((function e(t,n,i,r,o){s(this,e),this.logger=t,this.settings=n,this.browserWindow=i,this.viewportInfo=r,this.events=o,this._hasVideo=!1,this.inited=!1,this.videoSettings=this.settings.getVideoSettings()}),[{key:"init",value:function(){var e=this;this.logger.debug("[VIDEO]: VideoManager.init()"),this.videoSettings.enabled&&(this.inited||(this.logger.debug("[VIDEO]: Configuring video event handlers"),this.events.onBreakpointChanged.subscribe((function(){return e.resetVideo(e.videoSettings.enabled&&!!e.videoSettings.injectedAdUnitId)})),this.events.onPageInit.subscribe((function(){return e.initVideo()})),this.events.onPageReset.subscribe((function(){return e.removeVideo()})),this.initVideo(),this.inited=!0))}},{key:"initVideo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.logger.debug("[VIDEO]: VideoManager.initVideo(".concat(e,")"));var t=this.videoSettings;t.enabled&&(e&&!t.injectedAdUnitId||!e&&t.injectedAdUnitId?this.logger.log("[VIDEO]: Video initVideo skipped -  dynamic: ".concat(e,", injectedAdUnitId: ").concat(t.injectedAdUnitId)):this._hasVideo?this.logger.log("[VIDEO]: Video all ready setup"):!t.breakpoints||t.breakpoints[this.viewportInfo.getCurrentBreakpoint().name]?("primis"===t.partner&&this.setupPrimis(t.placementId),this._hasVideo=!0):this.logger.log("[VIDEO]: Not starting video at breakpoint ".concat(this.viewportInfo.getCurrentBreakpoint().name)))}},{key:"resetVideo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.logger.log("[VIDEO]: Resetting video"),this.removeVideo(),this.initVideo(e)}},{key:"removeVideo",value:function(){var e=this.videoSettings;e.enabled&&this._hasVideo&&("primis"===e.partner&&this.resetPrimis(),this._hasVideo=!1,this.logger.log("[VIDEO]: Removed video script ".concat(Li)))}},{key:"setupPrimis",value:function(e){var t=this;this.logger.debug("[VIDEO]: VideoManager.setupPrimis(".concat(e,")"));var n=this.settings.getSco(),r=n?"&schain=1.0,1!".concat(n.asi,",").concat(n.sellerId,",1"):"";if(this.videoSettings.enabled&&this.videoSettings.injectedAdUnitId){var o='[data-fuse="'.concat(this.videoSettings.injectedAdUnitId,'"]'),s=this.browserWindow.document.querySelector(o);if(s){var a=this.browserWindow.document.createElement("div");a.id=ji,s.appendChild(a),this.logger.debug("[VIDEO]: Inserted video div into the DOM with selector ".concat(o))}else this.logger.warn("[VIDEO]: Injection video library. Element with selector ".concat(o," not found"))}i({logger:this.logger,window:this.browserWindow},{name:"Primis",url:"//live.primis.tech/live/",file:"liveView.php",query:"s=".concat(e).concat(r,"&playerApiId=publift-primis-video"),id:Li,insertSelector:this.videoSettings.enabled&&this.videoSettings.injectedAdUnitId?"#".concat(ji):"body"},(function(){t.logger.log("[VIDEO]: Primis video loaded")}))}},{key:"resetPrimis",value:function(){var e,t,n;null===(e=this.browserWindow.document.getElementById(Li))||void 0===e||e.remove(),null===(t=this.browserWindow.document.getElementById(ji))||void 0===t||t.remove(),null===(n=this.browserWindow.document.getElementById("primisPlayerContainerDiv"))||void 0===n||n.remove()}}])}(),Ui=function(){return c((function e(t){s(this,e),this.bootstrappers=t}),[{key:"getWidgetsRenderer",value:function(){return this.widgetsRenderer||(this.widgetsRenderer=new Ni(this.bootstrappers.environmentBootstrapper.getLogger(),this.bootstrappers.settingsBootstrapper.getSettings(),this.bootstrappers.slotsBootstrapper.getFuseSlotRegistry(),this.bootstrappers.slotsBootstrapper.getRefreshManager(),this.bootstrappers.slotsBootstrapper.getApiV3(),this.bootstrappers.slotsBootstrapper.getController(),this.bootstrappers.conditionBootstrapper.getInsertConditionFactory(),this.bootstrappers.domBootstrapper.getViewportInfo(),this.bootstrappers.evtBootstrapper.eventHub,this.getVideoManager(),this.bootstrappers.domBootstrapper.getFuseDivElementFactory())),this.widgetsRenderer}},{key:"getInterstitialManager",value:function(){return this.interstitialManager||(this.interstitialManager=new Ri(this.bootstrappers.environmentBootstrapper.getLogger(),this.bootstrappers.settingsBootstrapper.getSettings(),this.bootstrappers.conditionBootstrapper.getInsertConditionFactory(),this.bootstrappers.slotsBootstrapper.getApiV3(),this.bootstrappers.gptBootstrapper.gptManagerInitSafe)),this.interstitialManager}},{key:"getVideoManager",value:function(){return this.videoManager||(this.videoManager=new Fi(this.bootstrappers.environmentBootstrapper.getLogger(),this.bootstrappers.settingsBootstrapper.getSettings(),this.bootstrappers.environmentBootstrapper.getBrowserWindowObject(),this.bootstrappers.domBootstrapper.getViewportInfo(),this.bootstrappers.evtBootstrapper.eventHub)),this.videoManager}}])}();function Gi(e,t){var n=Object.assign({},e);for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&void 0!==t[i]&&(n[i]=t[i]);return n}var qi=function(){return c((function e(t,n,i,r,o,a,c,d,l,g){var p=this;s(this,e),this.logger=t,this.accountSettings=n,this.breakpoints=i,this.viewportInfo=r,this.hostname=o,this.queryParamReader=a,this.zoneCustomiser=c,this.in2wHook=d,this.geo=l,this.overrideParams=g,this.forceDisablePrebid=!1,this.allowedSafeFrameBidders=[],this.v2Compatibility={disableWidgetsRenderer:!1},this.isUamEnabled=function(){var e;return!p.isYandexEnabled()&&(null===(e=p.fuseSettings.amazonUam)||void 0===e?void 0:e.enabled)},this.isResponsiveEnabled=function(){return p.fuseSettings.responsive},this.getInskinWidth=function(){return p.fuseSettings.inskinWidth},this.getSupportedSizes=function(e){return p.accountSettings.supported_sizes[e]};var f=this.applyQueryOverrides(n.fuse_settings);this.accountCode=this.determineAccount(o,n.account_code,n.account_domain_map);var h="71161633"===f.networkCode;this.yieldExperiments=this.makeYieldExperimentsSettings(h,f),this.logger.debug("[SETTINGS]: Yield experiments settings: ".concat(JSON.stringify(this.yieldExperiments))),this.forceSafeFrames=f.forceSafeFrame,this.fuseSettings=this.applyYieldExperimentsOverrides(f,this.yieldExperiments),this.logger.debug("[SETTINGS]: Final: ".concat(JSON.stringify(this.fuseSettings))),this.initFuseSlots(),this.yieldExperimentsTargeting=Object.values(this.yieldExperiments).reduce((function(e,t,n){if(!t.isYieldExperiment)return e;var i="fuse_exp_".concat(n),r=t.isEligible?"".concat(Boolean(t.experimentValue)):"ineligible";return Object.assign(Object.assign({},e),u({},i,r))}),{}),this.additionalYieldExperimentTargeting=Object.assign({},this.yieldExperiments.useRandomBidderElimination.experimentValue&&{"fuse_exp_20-val":this.getEliminatedBidders().length.toString()})}),[{key:"applyQueryOverrides",value:function(e){var t=this.queryParamReader;return Gi(e,{useControl:t.queryParamAsExperimentSetting("fuseUseControl"),useBidCache:t.queryParamAsExperimentSetting("fuseUseBidCache"),in2wInjection:t.queryParamAsExperimentSetting("fuseIn2wInjection"),useIndustry:t.queryParamAsExperimentSetting("fuseUseIndustry"),useGptPreAuctionModule:t.queryParamAsExperimentSetting("fuseUseGptPreAuctionModule"),useId5:t.queryParamAsExperimentSetting("fuseUseId5"),useCriteoId:t.queryParamAsExperimentSetting("fuseUseCriteoId"),useIncreaseInitialTimeout:t.queryParamAsExperimentSetting("fuseUseIncreaseInitialTimeout"),useRefreshPrebidTimeoutBuffering:t.queryParamAsExperimentSetting("fuseUseRefreshPrebidTimeoutBuffering"),useAuctionSlotLimit:t.queryParamAsExperimentSetting("fuseUseAuctionSlotLimit"),useMaxViewports:t.queryParamAsExperimentSetting("fuseUseMaxViewports"),forceSafeFrame:vt(t.queryParamAsBoolean("fuseForceSafeFrame")),in2wSafeframe:t.queryParamAsExperimentSetting("fuseIn2wSafeframe"),forceAuctionBidSizes:t.queryParamAsExperimentSetting("fuseForceAuctionBidSizes"),fullScreenAdExpansion:t.queryParamAsExperimentSetting("fuseFullScreenAdExpansion"),usePrebidContextualSignals:t.queryParamAsExperimentSetting("fuseUsePrebidContextualSignals"),useSharedId:t.queryParamAsExperimentSetting("fuseUseSharedId"),useComboZones:t.queryParamAsExperimentSetting("fuseUseComboZones"),usePairId:t.queryParamAsExperimentSetting("fuseUsePairId"),useViewportRefresh:t.queryParamAsExperimentSetting("fuseUseViewportRefresh"),useAbandonLazyAuction:t.queryParamAsExperimentSetting("fuseUseAbandonLazyAuction"),useRandomBidderElimination:t.queryParamAsExperimentSetting("fuseUseRandomBidderElimination"),useSspRefreshExclusion:t.queryParamAsExperimentSetting("fuseUseSspRefreshExclusion"),useGamera:t.queryParamAsExperimentSetting("fuseUseGamera"),usePubxai:t.queryParamAsExperimentSetting("fuseUsePubxai"),usePubxaiPrebidOnly:t.queryParamAsExperimentSetting("fuseUsePubxaiPrebidOnly"),useAdmiral:t.queryParamAsExperimentSetting("fuseUseAdmiral"),useMinimumPerceivedRefresh:t.queryParamAsExperimentSetting("fuseUseMinimumPerceivedRefresh"),useCmpV2:t.queryParamAsExperimentSetting("fuseUseCmpV2"),useGpp:t.queryParamAsExperimentSetting("fuseUseGpp"),useBackwardCompatibleNaming:vt(t.queryParamAsBoolean("fuseUseBackwardCompatibleNaming")),useAssertiveYield:t.queryParamAsExperimentSetting("fuseUseAssertiveYield")})}},{key:"applyYieldExperimentsOverrides",value:function(e,t){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i].experimentValue);return Gi(e,n)}},{key:"getYieldExperiment",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=y(e);return{setting:null!=e&&e,isYieldExperiment:n,isEligible:t,experimentValue:t&&n?100*Math.random()<Number(e):void 0}}},{key:"getYieldExperimentSettingValue",value:function(e){return"boolean"==typeof(t=e)&&t==t&&e;var t}},{key:"makeYieldExperimentsSettings",value:function(e,t){var n,i,r,o,s=!!e&&t.useId5,a="v5"===this.getTagRevision(),c=this.getYieldExperiment(t.useCmpV2,a);return{useControl:this.getYieldExperiment(I(t.useControl)?5:t.useControl),useBidCache:this.getYieldExperiment(t.useBidCache),in2wInjection:this.getYieldExperiment(t.in2wInjection,void 0!==this.in2wHook),useIndustry:this.getYieldExperiment(t.useIndustry),useGptPreAuctionModule:this.getYieldExperiment(t.useGptPreAuctionModule),useId5:this.getYieldExperiment(!(null===(n=t.id5)||void 0===n?void 0:n.enabled)&&s),useCriteoId:this.getYieldExperiment(t.useCriteoId),useIncreaseInitialTimeout:this.getYieldExperiment(t.useIncreaseInitialTimeout),useRefreshPrebidTimeoutBuffering:this.getYieldExperiment(t.useRefreshPrebidTimeoutBuffering),useAuctionSlotLimit:this.getYieldExperiment(t.useAuctionSlotLimit),useMaxViewports:this.getYieldExperiment(!t.maxViewportsFirstAuction&&t.useMaxViewports),in2wSafeframe:this.getYieldExperiment(t.forceSafeFrame?t.in2wSafeframe:void 0),forceAuctionBidSizes:this.getYieldExperiment(t.forceAuctionBidSizes),fullScreenAdExpansion:this.getYieldExperiment(t.fullScreenAdExpansion),usePrebidContextualSignals:this.getYieldExperiment(t.usePrebidContextualSignals),useSharedId:this.getYieldExperiment(t.useSharedId),useComboZones:this.getYieldExperiment(t.useComboZones),usePairId:this.getYieldExperiment(t.usePairId),useViewportRefresh:this.getYieldExperiment(t.useViewportRefresh),useAbandonLazyAuction:this.getYieldExperiment(t.useAbandonLazyAuction),useRandomBidderElimination:this.getYieldExperiment(t.useRandomBidderElimination,this.getAvailableBidders().length>=8&&(o=this.viewportInfo.getCurrentBreakpoint().name,"xs"===o||"s"===o)),useSspRefreshExclusion:this.getYieldExperiment(t.useSspRefreshExclusion),useGamera:this.getYieldExperiment(t.useGamera,e&&a),usePubxai:this.getYieldExperiment(t.usePubxai),usePubxaiPrebidOnly:this.getYieldExperiment(t.usePubxaiPrebidOnly,!t.usePubxai),useAdmiral:this.getYieldExperiment(t.useAdmiral,!(null===(i=t.admiral)||void 0===i?void 0:i.enabled)),useNewBids:{setting:!1,isYieldExperiment:!1,isEligible:!1,experimentValue:!1},useMinimumPerceivedRefresh:this.getYieldExperiment(t.useMinimumPerceivedRefresh),useCmpV2:c,useGpp:this.getYieldExperiment(t.useGpp,c.isEligible&&c.experimentValue),useAssertiveYield:this.getYieldExperiment(t.useAssertiveYield,(null===(r=t.prebidServerBidderCodes)||void 0===r?void 0:r.length)>0)}}},{key:"getYieldExperimentsTargeting",value:function(){return this.yieldExperimentsTargeting}},{key:"getAdditionalYieldExperimentsTargeting",value:function(){return this.additionalYieldExperimentTargeting}},{key:"getUamSettings",value:function(){return this.fuseSettings.amazonUam}},{key:"isPrebidEnabled",value:function(){var e;return!this.isYandexEnabled()&&(!this.forceDisablePrebid&&(null===(e=this.fuseSettings.prebid)||void 0===e?void 0:e.enabled))}},{key:"isPrebidServer",value:function(){return this.getPrebidServerBidders().length>0&&(this.fuseSettings.enablePrebidServer||this.queryParamReader.isEnablePrebidServer())}},{key:"getAssertiveYieldEntityId",value:function(){return this.fuseSettings.assertiveYieldEntityId}},{key:"getPrebidServerBidders",value:function(){var e;return null!==(e=this.fuseSettings.prebidServerBidderCodes)&&void 0!==e?e:[]}},{key:"getPrebidClientBidders",value:function(){var e;return null!==(e=this.fuseSettings.prebidClientBidderCodes)&&void 0!==e?e:[]}},{key:"getPrebidSettings",value:function(){return this.fuseSettings.prebid}},{key:"getFuseUUID",value:function(){return this.accountSettings.fuse_uuid}},{key:"getSco",value:function(){return this.accountSettings.sco}},{key:"getTagRevision",value:function(){return this.accountSettings.publication_metadata.revision}},{key:"getFuseId",value:function(){return this.accountSettings.fuse_id}},{key:"getUseTelemetry",value:function(){return"disabled"!==this.fuseSettings.telemetry}},{key:"getIosChromeClickHandle",value:function(){return Boolean(this.fuseSettings.iosChromeClickHandle)}},{key:"getReportPageInfo",value:function(){return Boolean(this.fuseSettings.useReportPageInfo)}},{key:"getEventHistoryTTLOverride",value:function(){var e;return null!==(e=this.fuseSettings.eventHistoryTTLOverride)&&void 0!==e?e:300}},{key:"getConfiantId",value:function(){return this.fuseSettings.confiantId}},{key:"getLowDwellPages",value:function(){var e;return null!==(e=this.fuseSettings.lowDwellPages)&&void 0!==e?e:[]}},{key:"getMaxViewportsFirstAuction",value:function(){var e;return null!==(e=this.fuseSettings.maxViewportsFirstAuction)&&void 0!==e?e:this.isUseMaxViewportsEnabled()?1:void 0}},{key:"getCmpProvider",value:function(){return this._cmpProvider||(this._cmpProvider=this.isCmpRequired()?this.fuseSettings.cmpProvider:{partner:"none"},this.isNoCmpTestMode()&&"none"===this._cmpProvider.partner&&(this.logger.warn("[SETTINGS]: No CMP provider configured for noCmpTestMode, forcing Quantcast"),this._cmpProvider={partner:"quantcast"})),this._cmpProvider}},{key:"isCmpRequired",value:function(){return!this.isYandexEnabled()&&("none"!==this.fuseSettings.cmp||this.isNoCmpTestMode())}},{key:"isNoCmpTestMode",value:function(){var e;return void 0===this._noCmpTestValue&&(this._noCmpTestValue="noCmp"===this.accountSettings.fuse_flavour&&100*Math.random()<(null!==(e=this.fuseSettings.noCmpTestWeight)&&void 0!==e?e:1)),this._noCmpTestValue}},{key:"getCmpMode",value:function(){return this.isYandexEnabled()||!this.fuseSettings.cmp?"disabled":this.fuseSettings.strict_cmp?"strict":"enabled"}},{key:"getCmpSkipStub",value:function(){var e;return Boolean(null!==(e=this.fuseSettings.cmpSkipStub)&&void 0!==e?e:"fundingchoices"===this.getCmpProvider().partner)}},{key:"getDisableGppStub",value:function(){return Boolean(this.fuseSettings.disableGppStub)}},{key:"getGdprTimeoutMillis",value:function(){var e;return null!==(e=this.queryParamReader.queryParamAsNumber("fuseTagGdprTimeoutMs"))&&void 0!==e?e:2e4}},{key:"getUspTimeoutMillis",value:function(){return 100}},{key:"getGppTimeoutMillis",value:function(){return 2e4}},{key:"getTagStartCutoffMs",value:function(){var e;return null!==(e=this.queryParamReader.queryParamAsNumber("fuseTagStartCutoffMs"))&&void 0!==e?e:this.fuseSettings.tagStartCutoffMs}},{key:"getPrebidDownloadCutoffMs",value:function(){var e;return null!==(e=this.queryParamReader.queryParamAsNumber("fusePrebidDownloadCutoffMs"))&&void 0!==e?e:this.fuseSettings.prebidDownloadCutoffMs}},{key:"getPrebidTagStartCutoffMs",value:function(){var e;return null!==(e=this.queryParamReader.queryParamAsNumber("fusePrebidTagStartCutoffMs"))&&void 0!==e?e:this.fuseSettings.prebidTagStartCutoffMs}},{key:"getUamTagStartCutoffMs",value:function(){var e;return null!==(e=this.queryParamReader.queryParamAsNumber("fuseUamTagStartCutoffMs"))&&void 0!==e?e:this.fuseSettings.uamTagStartCutoffMs}},{key:"getAuctionMaxSlots",value:function(){var e,t,n=null!==(t=null!==(e=this.queryParamReader.queryParamAsNumber("fuseAuctionMaxSlots"))&&void 0!==e?e:this.fuseSettings.auctionMaxSlots)&&void 0!==t?t:99;return this.isAuctionSlotLimitEnabled()?Math.min(n,10):n}},{key:"isIdentityEnabled",value:function(){var e,t;return null!==(t=null===(e=this.fuseSettings.identity)||void 0===e?void 0:e.enabled)&&void 0!==t&&t}},{key:"getIdentitySettings",value:function(){return this.fuseSettings.identity}},{key:"getAfsSettings",value:function(){var e;return null!==(e=this.fuseSettings.afs)&&void 0!==e?e:{enabled:!1}}},{key:"isComboZoneEnabled",value:function(){return this.getYieldExperimentSettingValue(this.fuseSettings.useComboZones)}},{key:"isComboZoneYeRunning",value:function(){return this.yieldExperiments.useComboZones.isYieldExperiment}},{key:"isId5Enabled",value:function(){var e,t;return null!==(t=null===(e=this.fuseSettings.id5)||void 0===e?void 0:e.enabled)&&void 0!==t?t:this.getYieldExperimentSettingValue(this.fuseSettings.useId5)}},{key:"isGptPreAuctionEnabled",value:function(){return this.getYieldExperimentSettingValue(this.fuseSettings.useGptPreAuctionModule)}},{key:"isIn2wInjection",value:function(){return!!this.yieldExperiments.in2wInjection.isEligible&&this.getYieldExperimentSettingValue(this.fuseSettings.in2wInjection)}},{key:"isIn2wSafeframe",value:function(){return this.getYieldExperimentSettingValue(this.fuseSettings.in2wSafeframe)}},{key:"isBidCacheEnabled",value:function(){return this.getYieldExperimentSettingValue(this.fuseSettings.useBidCache)}},{key:"isPairIdEnabled",value:function(){return"v5"===this.getTagRevision()&&this.getYieldExperimentSettingValue(this.fuseSettings.usePairId)}},{key:"isAbandonLazyAuctionEnabled",value:function(){return this.getYieldExperimentSettingValue(this.fuseSettings.useAbandonLazyAuction)}},{key:"isPrebidContextualSignalsEnabled",value:function(){return this.getYieldExperimentSettingValue(this.fuseSettings.usePrebidContextualSignals)}},{key:"isSharedIdEnabled",value:function(){return this.getYieldExperimentSettingValue(this.fuseSettings.useSharedId)}},{key:"isFuseIndustryEnabled",value:function(){return this.getYieldExperimentSettingValue(this.fuseSettings.useIndustry)}},{key:"isCriteoIdEnabled",value:function(){return this.getYieldExperimentSettingValue(this.fuseSettings.useCriteoId)}},{key:"isRefreshPrebidTimeoutBuffering",value:function(){return this.getYieldExperimentSettingValue(this.fuseSettings.useRefreshPrebidTimeoutBuffering)}},{key:"isIncreaseInitialTimeout",value:function(){return this.getYieldExperimentSettingValue(this.fuseSettings.useIncreaseInitialTimeout)}},{key:"isAuctionSlotLimitEnabled",value:function(){return this.getYieldExperimentSettingValue(this.fuseSettings.useAuctionSlotLimit)}},{key:"isUseMaxViewportsEnabled",value:function(){return this.getYieldExperimentSettingValue(this.fuseSettings.useMaxViewports)}},{key:"isUseRandomBidderEliminationEnabled",value:function(){return this.yieldExperiments.useRandomBidderElimination.isEligible&&(this.getYieldExperimentSettingValue(this.fuseSettings.useRandomBidderElimination)||this.yieldExperiments.useRandomBidderElimination.experimentValue)}},{key:"isUseSspRefreshExclusionEnabled",value:function(){return this.getYieldExperimentSettingValue(this.fuseSettings.useSspRefreshExclusion)}},{key:"isUseGameraEnabled",value:function(){return!!this.yieldExperiments.useGamera.isEligible&&this.getYieldExperimentSettingValue(this.fuseSettings.useGamera)}},{key:"isViewportRefreshEnabled",value:function(){return!!this.yieldExperiments.useViewportRefresh.isEligible&&this.getYieldExperimentSettingValue(this.fuseSettings.useViewportRefresh)}},{key:"isAdmiralEnabled",value:function(){var e,t;return null!==(t=null===(e=this.fuseSettings.admiral)||void 0===e?void 0:e.enabled)&&void 0!==t?t:!!this.yieldExperiments.useAdmiral.isEligible&&this.getYieldExperimentSettingValue(this.fuseSettings.useAdmiral)}},{key:"isAssertiveYieldEnabled",value:function(){return this.yieldExperiments.useAssertiveYield.isEligible?this.getYieldExperimentSettingValue(this.fuseSettings.useAssertiveYield):this.queryParamReader.queryParamAsBoolean("fuseAssertiveYield")}},{key:"disableCollapseEmptyDivs",value:function(){var e,t;return null!==(t=null!==(e=this.queryParamReader.disableCollapseEmptyDivs())&&void 0!==e?e:this.fuseSettings.disableCollapseEmptyDivs)&&void 0!==t&&t}},{key:"getRefreshStrategy",value:function(){return this.isViewportRefreshEnabled()?"ViewportRefreshStrategy":"ScheduledRefreshStrategy"}},{key:"isAutoRegistrationEnabled",value:function(){return Boolean(this.fuseSettings.enableAutoRegistration)}},{key:"getId5PartnerId",value:function(){var e,t,n=(null===(e=this.fuseSettings.id5)||void 0===e?void 0:e.enabled)?null===(t=this.fuseSettings.id5)||void 0===t?void 0:t.partnerId:void 0;return this.yieldExperiments.useId5.isYieldExperiment&&this.yieldExperiments.useId5.experimentValue?1189:n}},{key:"getVideoSettings",value:function(){var e;return null!==(e=this.fuseSettings.videoSettings)&&void 0!==e?e:{enabled:!1}}},{key:"isConfiantEnabled",value:function(){return!this.isYandexEnabled()&&this.fuseSettings.confiant}},{key:"isPubstackEnabled",value:function(){return!!this.fuseSettings.pubstackId}},{key:"isUserSyncEnabled",value:function(){return!this.fuseSettings.disableUserSync}},{key:"isGeoEdgeEnabled",value:function(){return Boolean(this.fuseSettings.useGeoEdge)}},{key:"getGeoEdgeAdvertiserIds",value:function(){var e;return null!==(e=this.fuseSettings.geoEdgeAdvertIds)&&void 0!==e?e:[]}},{key:"getGeoEdgePubIds",value:function(){var e;return null!==(e=this.fuseSettings.geoEdgePubIds)&&void 0!==e?e:[]}},{key:"getGeoEdgeKey",value:function(){return this.fuseSettings.geoEdgeKey}},{key:"getPubstackId",value:function(){return this.fuseSettings.pubstackId}},{key:"isBlockthroughEnabled",value:function(){return!this.isYandexEnabled()&&this.fuseSettings.blockthrough}},{key:"isWidgetRendererEnabled",value:function(){return!this.v2Compatibility.disableWidgetsRenderer&&!this.fuseSettings.disableWidgetsRenderer}},{key:"setDisableWidgetRenderer",value:function(){this.v2Compatibility.disableWidgetsRenderer=!0}},{key:"isStrictCmp",value:function(){return Boolean(this.fuseSettings.strict_cmp)}},{key:"isRequestGdprPersonalisation",value:function(){return!this.fuseSettings.disableGdprPersonalisation}},{key:"isIframeCmp",value:function(){return"iframe"===this.fuseSettings.cmp}},{key:"setForceDisablePrebid",value:function(){this.logger.log("[CONFIG]: Forcefully disabling prebid"),this.forceDisablePrebid=!0}},{key:"isMiniScrollersEnabled",value:function(){return Boolean(this.fuseSettings.enableMiniScrollers)}},{key:"scrollToStickDisableDepth",value:function(){return this.fuseSettings.scrollToStickDisableDepth}},{key:"isSpaOldBlockingPageInit",value:function(){return Boolean(this.fuseSettings.spaOldBlockingPageInit)}},{key:"getTopStickyHeaderSelector",value:function(){var e,t;return(null===(t=null===(e=this.getFuseSlots().filter((function(e){var t,n;return(null===(t=e.attributes)||void 0===t?void 0:t.miniscroller)&&(null===(n=e.miniscrollerAttributes)||void 0===n?void 0:n.topStickyHeaderSelector)}))[0])||void 0===e?void 0:e.miniscrollerAttributes)||void 0===t?void 0:t.topStickyHeaderSelector)||this.queryParamReader.queryParamAsString("fuseTopStickyHeaderSelector")||this.fuseSettings.topStickyHeaderSelector}},{key:"getSlotRefWithoutMcm",value:function(e){var t=/^(\/\d*),(\d*)(\/.*)$/i;if(!1===t.test(e))return this.logger.debug("[SETTINGS]: regExGamAdUnitRef.test(slotRef): ".concat(JSON.stringify(t.test(e)),", slotRef: ").concat(e)),e;this.logger.debug("[SETTINGS]: regExGamAdUnitRef.test(slotRef): ".concat(JSON.stringify(t.test(e)),", slotRef: ").concat(e));var n=t.exec(e);return this.logger.debug("[SETTINGS]: slotRef: ".concat(e,", matches: ").concat(JSON.stringify(n))),"".concat(n[1]).concat(n[3])}},{key:"cleanSlotBasedOnMcmMode",value:function(e){var t=this.getSlotRefWithoutMcm(e.slot);return this.logger.debug("[SETTINGS]: before: with MCM: ".concat(e.slot,", after: without MCM: ").concat(t)),Object.assign(Object.assign({},e),{slot:t})}},{key:"cleanSlotSizeMapping",value:function(e){var t,n,i,r,o,s={};return(null===(t=e.sizeMapping)||void 0===t?void 0:t.xl)&&(s.xl=e.sizeMapping.xl),(null===(n=e.sizeMapping)||void 0===n?void 0:n.l)&&(s.l=e.sizeMapping.l),s.m=null===(i=e.sizeMapping)||void 0===i?void 0:i.m,s.s=null===(r=e.sizeMapping)||void 0===r?void 0:r.s,s.xs=null===(o=e.sizeMapping)||void 0===o?void 0:o.xs,Object.assign(Object.assign({},e),{sizeMapping:s})}},{key:"initFuseSlots",value:function(){var e=this;this.accountSettings.fuse_slots=this.accountSettings.fuse_slots.map((function(t){var n,i=e.cleanFuseSlot(Boolean(e.queryParamReader.isMcmOff()),t),r="lazy"===i.activateConditionConfig.type?e.getCurrentBreakpoint():void 0;if(i=Vi(i,r),i=Hi(i,e.fuseSettings.tagCategories),i=e.applyOverrides(i),e.isUseRandomBidderEliminationEnabled()){e.logger.debug("[SETTINGS]: Eliminating bidders from ".concat(i.id));var o=e.getEliminatedBidders();i.bids=i.bids.filter((function(e){return!o.includes(e.bidder)})),i.matchedNetworks=null===(n=i.matchedNetworks)||void 0===n?void 0:n.filter((function(e){return!o.includes(e.network_code)}))}return e.cleanSlotSizeMapping(i)}))}},{key:"cleanFuseSlot",value:function(e,t){return e?(this.logger.debug("[SETTINGS]: will".concat(e?"":" NOT"," remove MCM child reference from the slot ref - ").concat(t.slot)),this.cleanSlotBasedOnMcmMode(t)):t}},{key:"getFuseSlots",value:function(){return this.accountSettings.fuse_slots}},{key:"parseAttributesToComboZoneParams",value:function(e){return si(e.layout)}},{key:"applyOverrides",value:function(e){var t,n,i,r,o,s,a,c,u,d,l,g,p,f,h,v,b,m,S,y,I,x,k,w,_,E,C,T,A,P,R,B,O,z,D;return Object.assign(Object.assign({},e),{attributes:Object.assign(Object.assign({},e.attributes),{interscroller:void 0!==(null===(n=null===(t=this.overrideParams)||void 0===t?void 0:t.interscrollersParams)||void 0===n?void 0:n[e.id])||(null===(i=e.attributes)||void 0===i?void 0:i.interscroller),sticky:void 0!==(null===(o=null===(r=this.overrideParams)||void 0===r?void 0:r.stickiesParams)||void 0===o?void 0:o[e.id])||(null===(s=e.attributes)||void 0===s?void 0:s.sticky),dynamic:void 0!==(null===(c=null===(a=this.overrideParams)||void 0===a?void 0:a.dynamicParams)||void 0===c?void 0:c[e.id])||(null===(u=e.attributes)||void 0===u?void 0:u.dynamic),scrollToStick:void 0!==(null===(l=null===(d=this.overrideParams)||void 0===d?void 0:d.scrollToStickParams)||void 0===l?void 0:l[e.id])||(null===(g=e.attributes)||void 0===g?void 0:g.scrollToStick),miniscroller:void 0!==(null===(f=null===(p=this.overrideParams)||void 0===p?void 0:p.miniscrollersParams)||void 0===f?void 0:f[e.id])||(null===(h=e.attributes)||void 0===h?void 0:h.miniscroller),forceComboZone:void 0!==(null===(m=null===(b=null===(v=this.overrideParams)||void 0===v?void 0:v.comboZoneParams)||void 0===b?void 0:b[e.id])||void 0===m?void 0:m.layout)||(null===(S=e.attributes)||void 0===S?void 0:S.forceComboZone),comboZoneEnabled:void 0!==(null===(x=null===(I=null===(y=this.overrideParams)||void 0===y?void 0:y.comboZoneParams)||void 0===I?void 0:I[e.id])||void 0===x?void 0:x.comboZoneEnabled)||e.attributes.comboZoneEnabled}),interscrollerAttributes:Object.assign(Object.assign({},e.interscrollerAttributes),null===(w=null===(k=this.overrideParams)||void 0===k?void 0:k.interscrollersParams)||void 0===w?void 0:w[e.id]),stickyAttributes:Object.assign(Object.assign({},e.stickyAttributes),null===(E=null===(_=this.overrideParams)||void 0===_?void 0:_.stickiesParams)||void 0===E?void 0:E[e.id]),dynamicAttributes:Object.assign(Object.assign({},e.dynamicAttributes),null===(T=null===(C=this.overrideParams)||void 0===C?void 0:C.dynamicParams)||void 0===T?void 0:T[e.id]),miniscrollerAttributes:Object.assign(Object.assign({},e.miniscrollerAttributes),null===(P=null===(A=this.overrideParams)||void 0===A?void 0:A.miniscrollersParams)||void 0===P?void 0:P[e.id]),comboZoneAttributes:Object.assign(Object.assign({},e.comboZoneAttributes),(null===(O=null===(B=null===(R=this.overrideParams)||void 0===R?void 0:R.comboZoneParams)||void 0===B?void 0:B[e.id])||void 0===O?void 0:O.layout)?this.parseAttributesToComboZoneParams(null===(D=null===(z=this.overrideParams)||void 0===z?void 0:z.comboZoneParams)||void 0===D?void 0:D[e.id]):{})})}},{key:"generateZoneTemplate",value:function(e,t){var n=this.getZoneTemplate(e);if(n){if(!this.zoneCustomiser)return n;var i=function(e,t,n,i){if("function"==typeof t){if(!i)return void e.error("[ZONE][".concat(n,"][fuseZoneCustomiser] api is not defined, skip customisation"));try{return e.log("[ZONE][".concat(n,"][fuseZoneCustomiser] Start")),t(n,i)}catch(t){e.error("[ZONE][".concat(n,"][fuseZoneCustomiser] Encountered error during evaluation"),t)}}}(this.logger,this.zoneCustomiser,e,t);if(i){var r=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},n),{id:i.id,slot:i.gamSlotPath}),i.bids?{bids:i.bids}:{}),i.targeting?{targeting:i.targeting}:{}),{originalZoneTemplateId:n.id}),o=this.accountSettings.fuse_slots.find((function(e){return e.id===r.id}));return o?o.slot!==r.slot?(this.logger.error("[SETTINGS]: ZoneTemplateOverrides for id ".concat(r.id," does not match slot ").concat(r.slot," - the customised settings will be ignored")),o):r:(this.accountSettings.fuse_slots.push(r),r)}return n}}},{key:"getZoneTemplate",value:function(e){return this.getFuseSlots().filter((function(t){return e==t.id||e==t.gamAdUnitId}))[0]}},{key:"isScanDOMOnPageLoad",value:function(){var e=this.fuseSettings.disableAutoLoadSlots;return I(e)||!e}},{key:"isHeaderBiddingSlot",value:function(e){return!e.attributes.interstitial&&e.attributes.headerbidding&&e.bids.length>0}},{key:"isSlotWidget",value:function(e){var t,n,i;return(null===(t=e.attributes)||void 0===t?void 0:t.interscroller)||(null===(n=e.attributes)||void 0===n?void 0:n.sticky)||(null===(i=e.attributes)||void 0===i?void 0:i.dynamic)||null}},{key:"maxSlotHeightForBreakpoint",value:function(e,t){var n;return null===(n=e.sizeMapping[t])||void 0===n?void 0:n.reduce((function(e,t){return y(t[1])&&t[1]>e?Number(t[1]):e}),0)}},{key:"getPrebidOptions",value:function(e){var t,n,i;if(this.isPrebidEnabled()&&this.fuseSettings.prebid.breakpoint_options){var r=this.fuseSettings.prebid.breakpoint_options[e];if(r)return{enabled:r.enabled,sendAllBids:!0===this.fuseSettings.prebid.sendAllBids,timeout:null!==(n=null!==(t=r.timeout)&&void 0!==t?t:this.fuseSettings.prebid.defaultTimeout)&&void 0!==n?n:1e3}}return{enabled:this.isPrebidEnabled(),sendAllBids:!0===this.fuseSettings.prebid.sendAllBids,timeout:null!==(i=this.fuseSettings.prebid.defaultTimeout)&&void 0!==i?i:1e3}}},{key:"isPrebidEnabledAtBP",value:function(e){return this.isPrebidEnabled()&&this.getPrebidOptions(e).enabled}},{key:"isUamEnabledAtBP",value:function(e){return this.isUamEnabled()&&this.getPrebidOptions(e).enabled}},{key:"getHbTimeout",value:function(e,t){var n=this.getPrebidOptions(e).timeout;return t?this.isRefreshPrebidTimeoutBuffering()?4e3:n:this.isIncreaseInitialTimeout()?1.5*n:n}},{key:"getPrebidMediaTypes",value:function(){var e;return null!==(e=this.fuseSettings.prebidMediaTypes)&&void 0!==e?e:["banner"]}},{key:"isPrebidBannerEnabled",value:function(){return this.getPrebidMediaTypes().includes("banner")}},{key:"isPrebidVideoEnabled",value:function(){return this.getPrebidMediaTypes().includes("video")}},{key:"isPrebidNativeEnabled",value:function(){return this.getPrebidMediaTypes().includes("native")}},{key:"isSlotEnabledForBreakpoint",value:function(e,t){var n,i;return(null!==(i=null===(n=e.sizeMapping)||void 0===n?void 0:n[t])&&void 0!==i?i:[]).length>0}},{key:"getPublicationId",value:function(){return this.accountSettings.publication_metadata.publication_id}},{key:"getFlavour",value:function(){var e;return null!==(e=this.accountSettings.fuse_flavour)&&void 0!==e?e:"default"}},{key:"getFuseCDN",value:function(){return this.accountSettings.fuse_cdn}},{key:"getFuseCDNPlatform",value:function(){return this.accountSettings.fuse_cdn_platform}},{key:"getPrebidHash",value:function(){return this.accountSettings.fuse_prebid_hash}},{key:"getBlockedUrls",value:function(){var e;return null!==(e=this.accountSettings.fuse_blocked_url)&&void 0!==e?e:[]}},{key:"getFuseIndustry",value:function(){return this.accountSettings.fuse_industry}},{key:"getFuseSettings",value:function(){return this.fuseSettings}},{key:"getEdgeHtmlMaxAdsRefreshLimit",value:function(){var e;return null!==(e=this.fuseSettings.edgeHtmlMaxAdsRefreshLimit)&&void 0!==e?e:60}},{key:"getDefaultRefreshInterval",value:function(){return this.fuseSettings.refresh}},{key:"getRefreshInterval",value:function(e){var t=e.attributes.refresh,n=void 0;if(y(t)&&t>0)n=t;else if(0===t)n=void 0;else{var i=this.getDefaultRefreshInterval();i&&i>0&&(n=i)}return n}},{key:"getAccountSettings",value:function(){return this.accountSettings}},{key:"getV2CompatOverrides",value:function(){return this.v2Compatibility}},{key:"isTestCreatives",value:function(){var e;return null!==(e=this.queryParamReader.isTestCreativesQuery())&&void 0!==e&&e}},{key:"getCmpDeterminedSampleRate",value:function(){var e;return null!==(e=this.fuseSettings.cmpDeterminedSampleRate)&&void 0!==e?e:0}},{key:"getPrebidTelemetrySampleRate",value:function(){var e;return null!==(e=this.fuseSettings.prebidTelemetrySampleRate)&&void 0!==e?e:1}},{key:"getSlotRequestTelemetrySampleRate",value:function(){var e;return null!==(e=this.fuseSettings.slotRequestTelemetrySampleRate)&&void 0!==e?e:1}},{key:"getPrebidAdRenderSucceededTelemetrySampleRate",value:function(){var e;return null!==(e=this.fuseSettings.prebidAdRenderSucceededTelemetrySampleRate)&&void 0!==e?e:1}},{key:"isForceAuctionBidSizes",value:function(){return this.getYieldExperimentSettingValue(this.fuseSettings.forceAuctionBidSizes)}},{key:"getSlotTestUrls",value:function(){var e;return null!==(e=this.fuseSettings.fuse_test_urls)&&void 0!==e?e:[]}},{key:"getYandexBlockId",value:function(){var e;return null!==(e=this.queryParamReader.queryParamAsString("fuseYandexBlockId"))&&void 0!==e?e:this.fuseSettings.yandexBlockId}},{key:"isYandexEnabled",value:function(){return this.fuseSettings.yandex||this.queryParamReader.queryParamAsBoolean("fuseYandex")||""!==this.queryParamReader.queryParamAsString("fuseYandexBlockId")}},{key:"isMinimumPerceivedRefreshEnabled",value:function(){return this.getYieldExperimentSettingValue(this.fuseSettings.useMinimumPerceivedRefresh)}},{key:"getMinGptRefreshInterval",value:function(){var e;return null!==(e=this.fuseSettings.minGptRefreshInterval)&&void 0!==e?e:30}},{key:"disableYandexSticky",value:function(){var e,t;return this.isYandexEnabled()&&null!==(t=null!==(e=this.queryParamReader.disableYandexSticky())&&void 0!==e?e:this.fuseSettings.disableYandexSticky)&&void 0!==t&&t}},{key:"isPubxaiEnabled",value:function(){return this.getYieldExperimentSettingValue(this.fuseSettings.usePubxai)}},{key:"isPubxaiPrebidOnlyEnabled",value:function(){return!!this.yieldExperiments.usePubxaiPrebidOnly.isEligible&&this.getYieldExperimentSettingValue(this.fuseSettings.usePubxaiPrebidOnly)}},{key:"getIn2wRatio",value:function(){return this.yieldExperiments.in2wInjection.isYieldExperiment&&this.yieldExperiments.in2wInjection.experimentValue?.9:this.fuseSettings.in2wRatio}},{key:"getIn2wAdvertiserId",value:function(){return this.fuseSettings.in2wAdvertiserId}},{key:"getIn2wAdvertiserTimeZone",value:function(){return this.fuseSettings.in2wAdvertiserTimeZone}},{key:"getUseTcfV2",value:function(){var e;return null!==(e=this.fuseSettings.useTcfv2)&&void 0!==e&&e}},{key:"isCmpV2Enabled",value:function(){return this.yieldExperiments.useCmpV2.isEligible?this.getYieldExperimentSettingValue(this.fuseSettings.useCmpV2):this.queryParamReader.queryParamAsBoolean("fuseUseCmpV2")}},{key:"isGppEnabled",value:function(){return this.yieldExperiments.useGpp.isEligible?this.getYieldExperimentSettingValue(this.fuseSettings.useGpp):this.queryParamReader.queryParamAsBoolean("fuseUseGpp")}},{key:"getTenantCode",value:function(){return this.accountSettings.fuse_tenant}},{key:"getPrebidIasPubId",value:function(){return this.fuseSettings.prebidIasPubId}},{key:"isUseBackwardCompatibleNaming",value:function(){var e,t;return null!==(t=null!==(e=this.queryParamReader.isUseBackwardCompatibleNaming())&&void 0!==e?e:this.fuseSettings.useBackwardCompatibleNaming)&&void 0!==t&&t}},{key:"determineAccount",value:function(e,t,n){if(t)return t;if(n){var i=n[e];if(i)return i;this.logger.error("[SETTINGS]: Unable to determine account, no account code defined and/or unable to determine account from given domain map")}else this.logger.error("[SETTINGS]: Unable to determine account, neither account code nor domain map were defined.")}},{key:"getAccountCode",value:function(){return this.accountCode}},{key:"isForceSafeFrames",value:function(){return Boolean(this.forceSafeFrames)}},{key:"setForceSafeFrames",value:function(e){this.forceSafeFrames=Boolean(null==e||e)}},{key:"getCurrentBreakpoint",value:function(e){var t,n=this.breakpoints,i=null!=e?e:this.viewportInfo.getViewportStatus().width;return Object.keys(n).forEach((function(e){var r=n[e];i>=r&&(!t||r>t.size)&&(t={size:r,name:e})})),t}},{key:"getAvailableBidders",value:function(){return this.availableBidders||(this.availableBidders=Array.from(new Set([].concat(v(this.accountSettings.fuse_slots.reduce((function(e,t){return[].concat(v(e),v(t.bids.map((function(e){return e.bidder}))))}),[])),v(this.getAvailableNewBidders())))),this.logger.debug("[SETTINGS]: Available bidders: ".concat(this.availableBidders))),this.availableBidders}},{key:"getAvailableNewBidders",value:function(){return Array.from(new Set(this.accountSettings.fuse_slots.reduce((function(e,t){var n;return[].concat(v(e),v((null!==(n=t.matchedNetworks)&&void 0!==n?n:[]).map((function(e){return e.network_code}))))}),[])))}},{key:"getEliminatedBidders",value:function(){if(!this.eliminatedBidders){for(var e=Math.floor(5*Math.random())+1,t=this.getAvailableBidders().slice(),n=t.length-1;n>0;n--){var i=Math.floor(Math.random()*(n+1)),r=[t[i],t[n]];t[n]=r[0],t[i]=r[1]}this.eliminatedBidders=t.slice(0,e),this.logger.debug("[SETTINGS]: Selected bidders to be eliminated: ".concat(this.eliminatedBidders))}return this.eliminatedBidders}},{key:"allowedBiddersInNewBids",value:function(){var e;return null!==(e=this.queryParamReader.allowedBiddersInNewBids())&&void 0!==e?e:[]}},{key:"getNetworkParams",value:function(){return{network:this.fuseSettings.networkNetworkParams,account:this.fuseSettings.networkAccountParams,contract:this.fuseSettings.networkContractParams}}},{key:"getFuseGeo",value:function(){var e;if("<FUSE_GEO_CODE>"!==(null===(e=this.geo)||void 0===e?void 0:e.code))return this.geo}}])}(),Vi=function(e,t){var n=e.activateConditionConfig,i={activateCondition:void 0,excludeFromAuctionBlock:"none"!==n.type};switch(n.type){case"none":break;case"lazy":var r=null==t?void 0:t.name,o=n.scrollDistance[r];if(I(o)||!1===o)break;i=Object.assign(Object.assign({},i),{activateCondition:{type:"condition",name:Ve,params:n.scrollDistance}});break;case"manual":i=Object.assign(Object.assign({},i),{activateCondition:{type:"condition",name:We}});break;case"custom":i=Object.assign(Object.assign({},i),{activateCondition:n.config});break;default:_(n)}return Object.assign(Object.assign({},e),i)},Hi=function(e,t){var n;if(!t||!Object.keys(t).length)return e;if(!(null===(n=e.zoneCategories)||void 0===n?void 0:n.length))return e;var i={type:"or",subConditions:e.zoneCategories.map((function(e){return t[e]}))};return e.activateCondition?Object.assign(Object.assign({},e),{activateCondition:{type:"and",subConditions:[e.activateCondition,i]}}):Object.assign(Object.assign({},e),{activateCondition:i})},Wi=function(){return c((function e(t){s(this,e),this.bootstrappers=t}),[{key:"getSettingsOverrideParams",value:function(){var e=this.bootstrappers.configBootstrapper,t=this.bootstrappers.environmentBootstrapper.getWindowLocation();return{comboZoneParams:e.qpr.getUnitsAttributesFromParams("combozone",t)}}},{key:"getSettings",value:function(){if(!this.settingsAll){var e=this.bootstrappers.configBootstrapper,t=this.bootstrappers.environmentBootstrapper,n=e.qpr;this.settingsAll=new qi(t.getLogger(),e.getAccountSettings(),e.getBreakpoints(),this.bootstrappers.domBootstrapper.getViewportInfo(),t.getBrowserWindowObject().location.hostname,n,e.zoneCustomiser,e.in2wHook,e.geo,this.getSettingsOverrideParams())}return this.settingsAll}}])}(),Zi=this&&this.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n},Yi="publift-fuse-afs-injection";function Ji(e,t,n,r,o,s){var a=!1,c=!1,u=null;function d(){return s.getActiveSlots().filter((function(e){var t;return!0===(null===(t=e.zoneTemplate.attributes)||void 0===t?void 0:t.afs)})).map((function(e){return e.zoneTemplate}))}function l(t,i,o,s){var c=function(e){return e.enabled,e.urlPattern,Zi(e,["enabled","urlPattern"])}(r.getAfsSettings()),u=Object.assign(Object.assign({},c),{query:t,adPage:o,personalizedAds:a,styleId:null!=s?s:c.styleId});e.log("[AFS]: Page options ".concat(JSON.stringify(u)));var d="var pageOptions = ".concat(JSON.stringify(u),";"),l=i.sort((function(e,t){var n,i;return Number(null===(n=t.afsAttributes)||void 0===n?void 0:n.maxTop)-Number(null===(i=e.afsAttributes)||void 0===i?void 0:i.maxTop)})).map((function(t,i){var r,o=n.document.querySelector('[data-fuse="'.concat(t.id,'"]'));if(o){var s=t.afsAttributes;0!==i&&Number(null===(r=t.afsAttributes)||void 0===r?void 0:r.maxTop)&&(e.warn("[AFS]: Zone ".concat(t.id," has maxTop set but is not the first zone. maxTop will be ignored")),s.maxTop=void 0);var a=Object.assign(Object.assign({},t.afsAttributes),{container:o.id}),c="adblock".concat(i+1);return e.log("[AFS][".concat(t.id,"]: Container options ").concat(JSON.stringify(a))),d+="var ".concat(c," = ").concat(JSON.stringify(a),";"),c}e.warn("[AFS]: No container found for zone ".concat(t.id))})).filter((function(e){return e}));if(l.length){d+="_googCsa('ads', pageOptions, ".concat(l.join(", "),");");var g=document.createElement("script");g.type="text/javascript",g.id=Yi,g.innerHTML=d,document.head.appendChild(g)}}function g(t){c||(c=!0,e.log("[AFS]: Inited by ".concat(t?"timeout":"auction")),p(d(),u))}function p(t,i){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t.length)if(i){var o=i.query,s=i.page,a=i.styleId;if(o){var c=n.document.getElementById(Yi);if(c){if(!r)return void e.log("[AFS]: Already initialized");c.remove()}l(o,t,s,a)}else e.log("[AFS]: No query provided")}else e.log("[AFS]: No page params found. Skip init");else e.log("[AFS]: No zones provided. Skip init")}return r.isCmpRequired()||(e.log("[AFS]: Personalized ads set to true by isCmpRequired"),a=!0),o.onPageInit.subscribe((function(t){var i;c=!1,u=null!==(i=t.afsPageParams)&&void 0!==i?i:function(){try{var t=new RegExp(r.getAfsSettings().urlPattern).exec(n.location.href);if(t)return e.log("[AFS]: Page params extracted",t),{query:null==t?void 0:t[1],page:null==t?void 0:t[2]}}catch(t){e.error("[AFS]: Error extracting page params",t)}}(),setTimeout((function(){return g(!0)}),2e3)})),o.onAuctionEvent.subscribe((function(){return g()})),o.onPageReset.subscribe((function(){var e;null==(e=document.getElementById(Yi))||e.remove(),c=!1})),o.onComponentInitEvent.subscribe((function(t){"cmp"===t.component&&"ready"===t.state._tag&&t.state.output.allowPersonalisation&&(e.log("[AFS]: Personalized ads allowed by CMP output ".concat(JSON.stringify(t.state.output))),a=!0)})),{loadLibrary:function(){t.setStateStatus("afs_load_start");var r=n.document,o=r.createElement("script");o.type="text/javascript",o.innerHTML="\n    (function(g,o){g[o]=g[o]||function(){(g[o]['q']=g[o]['q']||[]).push(\n      arguments)},g[o]['t']=1*new Date})(window,'_googCsa');\n    ",r.querySelector("head").appendChild(o),i({logger:e,window:n},{name:"Afs",url:"//www.google.com/adsense/search/",file:"ads.js",insertSelector:"head"},(function(){e.log("[AFS]: Script loaded"),t.setStateStatus("afs_load_finish")}))},reset:function(t){e.debug("[API]: resetting with ".concat(JSON.stringify(t))),t&&(u=t),p(d(),u,!0)}}}var Qi=function(){return c((function e(t){s(this,e),this.bootstrappers=t}),[{key:"getAfsManager",value:function(){return this.afsManager||(this.afsManager=Ji(this.bootstrappers.environmentBootstrapper.getLogger(),this.bootstrappers.monitoringBootstrapper.getReporter(),this.bootstrappers.environmentBootstrapper.getBrowserWindowObject(),this.bootstrappers.settingsBootstrapper.getSettings(),this.bootstrappers.evtBootstrapper.eventHub,this.bootstrappers.slotsBootstrapper.getFuseSlotRegistry())),this.afsManager}}])}();var Ki=function(){return c((function e(t){s(this,e),this.bootstrappers=t,this._computed={}}),[{key:"eventHub",get:function(){var e=this;return pt("eventHub",this._computed,(function(){return function(e,t){var n={},i={};function r(i){var r,o=pi(e,i),s=null==t?void 0:t.fuseEventEmitterWrapper(),a=s?s(o):o;return null!==(r=n[i])&&void 0!==r?r:n[i]=a}function o(t,n,r){var o;return null!==(o=i[t])&&void 0!==o?o:i[t]=ki(e,t,n,r)}return{get onTagInitComplete(){return r("onTagInitComplete")},get pageInitObservable(){return r("onPageInit")},get onPageInit(){return r("onPageInit")},get onPageReset(){return r("onPageReset")},get onZoneEvent(){return r("onZoneEvent")},get onAuctionEvent(){return r("onAuctionEvent")},get onZoneRegistered(){return o("register_zone",this.onZoneEvent,(function(e){return"registered"==e.zoneEventType?e:null}))},get onZoneDeleted(){return o("delete_zone",this.onZoneEvent,(function(e){return"deleted"==e.zoneEventType?e:null}))},get onZoneActivateApi(){return o("activate_zone_api",this.onZoneEvent,(function(e){return"activate_zone_api"==e.zoneEventType?e:null}))},get activateZoneCalledObservable(){return this.onZoneActivateApi},get onComponentInitEvent(){return r("onComponentInitEvent")},get onInitManagerReady(){return r("onInitManagerReady")},get onWindowResized(){return r("onWindowResized")},get onSlotRegistered(){return r("onSlotRegistered")},get onSlotDestroyed(){return r("onSlotDestroyed")},get onSlotLoaded(){return r("onSlotLoaded")},get onSlotRender(){return r("onSlotRender")},get onSlotResponse(){return r("onSlotResponse")},get onSlotRequested(){return r("onSlotRequested")},get onImpressionViewable(){return r("onImpressionViewable")},get onPrebidAuctionEnd(){return r("onPrebidAuctionEnd")},get onPrebidAdRenderFailed(){return r("onPrebidAdRenderFailed")},get onPrebidAdRenderSucceeded(){return r("onPrebidAdRenderSucceeded")},get onBreakpointChanged(){return o("onBreakpointChanged",this.onWindowResized,(function(e){return e.crossedBp?e:null}))},get onPrivacySettingsSet(){return r("onPrivacySettingsSet")}}}(e.bootstrappers.environmentBootstrapper.logger,e.bootstrappers.environmentBootstrapper.getFuseDebugger())}))}}])}();var Xi,$i;if(null===(Xi=window.self.fusetag)||void 0===Xi?void 0:Xi.loading){var er="[FUSE]: Fusetag is already initialising, and may have been included in the page twice";throw console.error(er),new Error(er)}if(null===($i=window.self.fusetag)||void 0===$i?void 0:$i.init){var tr="[FUSE]: Fusetag is already initialised, and may have been included in the page twice";throw console.error(tr),new Error(tr)}var nr=window.self.fusetag||(window.self.fusetag={que:[]});nr.loading=!0;var ir={inited:{},getOrInit:function(e,t){if(!this.inited[e])try{this.inited[e]=t(),this.logger.debug("Bootstrapper initialised ".concat(e))}catch(t){throw this.logger.error("Caught exception while initialising ".concat(e,": ").concat(JSON.stringify(e))),t}return this.inited[e]},get logger(){return this.environmentBootstrapper.getLogger()},get afsBootstrapper(){var e=this;return this.getOrInit("afsBootstrapper",(function(){return new Qi(e)}))},get cmpBootstrapper(){var e=this;return this.getOrInit("cmpBootstrapper",(function(){return new _e(e)}))},get conditionBootstrapper(){var e=this;return this.getOrInit("conditionBootstrapper",(function(){return new dt(e)}))},get configBootstrapper(){var e=this;return this.getOrInit("configBootstrapper",(function(){return new gt(e)}))},get domBootstrapper(){var e=this;return this.getOrInit("domBootstrapper",(function(){return new yt(e)}))},get environmentBootstrapper(){return this.getOrInit("environmentBootstrapper",(function(){return new xt}))},get evtBootstrapper(){var e=this;return this.getOrInit("evtBootstrapper",(function(){return new Ki(e)}))},get gptBootstrapper(){var e=this;return this.getOrInit("gptBootstrapper",(function(){return new _t(e)}))},get initBootstrapper(){var e=this;return this.getOrInit("initBootstrapper",(function(){return new Tt(e)}))},get monitoringBootstrapper(){var e=this;return this.getOrInit("monitoringBootstrapper",(function(){return new Tn(e)}))},get pluginBootstrapper(){var e=this;return this.getOrInit("pluginBootstrapper",(function(){return new Pn(e)}))},get prebidBootstrapper(){var e=this;return this.getOrInit("prebidBootstrapper",(function(){return new Kn(e)}))},get settingsBootstrapper(){var e=this;return this.getOrInit("settingsBootstrapper",(function(){return new Wi(e)}))},get slotsBootstrapper(){var e=this;return this.getOrInit("slotsBootstrapper",(function(){return new Ai(e)}))},get uamBootstrapper(){var e=this;return this.getOrInit("uamBootstrapper",(function(){return new Pi(e)}))},get widgetBootstrapper(){var e=this;return this.getOrInit("widgetBootstrapper",(function(){return new Ui(e)}))}},rr=ir.monitoringBootstrapper,or=ir.environmentBootstrapper,sr=ir.initBootstrapper,ar=ir.domBootstrapper,cr=ir.uamBootstrapper,ur=ir.cmpBootstrapper,dr=ir.widgetBootstrapper,lr=ir.configBootstrapper,gr=ir.evtBootstrapper.eventHub,pr=rr.getReporter(),fr=or.getLogger(),hr=ir.settingsBootstrapper.getSettings(),vr=function(e){var t=e.environmentBootstrapper.getLogger(),n=e.settingsBootstrapper.getSettings(),i=e.gptBootstrapper.getGptSlotRegistry(),r=e.gptBootstrapper.gptManagerInitSafe,o=e.monitoringBootstrapper.getReporter(),s=e.slotsBootstrapper.getFuseSlotRegistry(),a=e.slotsBootstrapper.getController(),c=e.initBootstrapper.getInitManager(),u=e.environmentBootstrapper.getBrowserWindowObject(),d=e.slotsBootstrapper.getSlotInfo(),l=e.slotsBootstrapper.pageTargeting,g=pi(t,"onTagInitialised"),p=e.slotsBootstrapper.getApiV3(),f=e.slotsBootstrapper.getPageManager();return{enableApi:function(h){t.debug("[INIT]: Enabling Fuse API"),h.fuseUUID=n.getFuseUUID(),h.initialised=!1,h.init=!1,h.getCurrentBreakpoint=function(){return e.domBootstrapper.getViewportInfo().getCurrentBreakpoint()},h.pageInit=function(e){return t.debug("[API]: pageInit(".concat(JSON.stringify(e),")")),f.handlePageInitCall(u.location.href,o.getElapsedTime(),e)},h.registerAll=function(){return t.debug("[API]: registerAll()"),a.registerAndRunAuction(!0,!1,p)},h.registerZone=function(e){if(e&&"string"==typeof e){t.debug("[API]: registerZone('".concat(e,"')"));var n=a.registerZoneAndQueue(e,!0,!1,p),i=null==n?void 0:n.map((function(e){return e.slotDivId}));return(null==i?void 0:i.length)>0&&a.runAuction(),null==i?void 0:i[0]}t.error("[API]: registerZone with invalid zoneDivId: ".concat(JSON.stringify(e)," - ").concat(m(e)))},h.destroyZone=function(e){e&&"string"==typeof e?(t.debug("[API]: destroyZone('".concat(e,"')")),a.destroyZone(e)):t.error("[API]: destroyZone with invalid zoneDivId: ".concat(JSON.stringify(e)," - ").concat(m(e)))},h.activateZone=function(e){e&&"string"==typeof e?(t.debug("[API]: activateZone('".concat(e,"')")),a.activateZone(e)):t.error("[API]: activateZone with invalid zoneDivId: ".concat(JSON.stringify(e)," - ").concat(m(e)))},h.states=o.states,h.events=o.events,h.setTargeting=function(e,n){if("string"==typeof e){if("string"==typeof n||Array.isArray(n))return t.debug("[API]: setTargeting(".concat(e,", ").concat(JSON.stringify(n),")")),l.setTargeting(e,n);t.error("[API]: setTargeting with invalid value: ".concat(JSON.stringify(n)," - ").concat(m(n)))}else t.error("[API]: setTargeting with invalid key: ".concat(JSON.stringify(e)," - ").concat(m(e)))},h.onSlotRenderEnded=function(t){return e.evtBootstrapper.eventHub.onSlotRender.subscribe((function(e){var n={slotId:e.slot.getSlotElementId(),hasCreative:!e.isEmpty,gptEvent:e};t(n)}))},h.onTagInitialised=function(e){g.once(e)},h.onSlotsInitialised=function(e){s.getSlotsInitObservable().once(e)},h.onSlotInitialised=function(e){s.getSlotInitObservable().once(e)},h.setAllowRefreshCallback=function(e){s.setAllowSlotRefreshCallback(e)},h.resetAfs=function(n){t.debug("[API]: resetAfs ".concat(JSON.stringify(n),"')")),e.afsBootstrapper.getAfsManager().reset(n)},h.destroySticky=function(){t.debug("[API]: destroySticky()"),s.destroySticky()},h.privateApi={getWidgetRenderer:function(){return e.widgetBootstrapper.getWidgetsRenderer()},getInitStatus:function(){return c.getInitStatus()},getSlotProblems:function(){return o.getSlotProblems()},resetPage:function(){return t.debug("[API]: resetPage()"),f.reset()},runAuctionAllActiveSlots:function(){return t.debug("[API]: runAuctionAllActiveSlots()"),a.runAuctionAllActiveSlots()},setLogLevel:function(e){return t.setLogLevel(e)},getLogLevel:function(){return t.getLogLevel()},getLogs:function(){return t.getLogs()},getAuctionState:function(){return e.slotsBootstrapper.getAuctionExecutor().getStateView()},getSlotTestUrls:function(){return n.getSlotTestUrls()},isYandexEnabled:function(){return n.isYandexEnabled()},isPrebidEnabled:function(){return n.isPrebidEnabled()},isCmpEnabled:function(){return n.isCmpRequired()},isUamEnabled:function(){return n.isUamEnabled()},isBlockthroughEnabled:function(){return n.isBlockthroughEnabled()},disableRefreshBySlotId:function(t){return e.slotsBootstrapper.getRefreshManager().disableRefreshBySlotId(t)},enableRefreshBySlotId:function(t){return e.slotsBootstrapper.getRefreshManager().enableRefreshBySlotId(t)},enableRefresh:function(){return t.debug("[API]: enableAllRefresh()"),a.enableAllRefresh()},getAllRefresh:function(){return e.slotsBootstrapper.getRefreshManager().getAllRefresh()}},h.loadSlots=function(){t.debug("[API]: loadSlots()"),a.loadSlots(h.initialised,p,(function(){return f.reset()}))},h.getUnits=function(){return s.getZoneDivs()},h.loadSlotById=function(e,n){return function(e,n){var i;t.debug("[API]: loadSlotById(".concat(e,", ").concat(n,")")),(n?a.registerZoneAndQueue(n,!0,!0,p):a.registerAndQueueLastSlotWithFuseId("".concat(e),!0,!0,p))||t.debug("[API]: loadSlotById(".concat(e,", ").concat(n,") did not register a slot")),n&&!1===(null===(i=s.getSlotByZoneDivId(n))||void 0===i?void 0:i.currentlyActive)&&(t.debug("[API]: loadSlotById(".concat(e,", ").concat(n,") activate zone")),a.activateZone(n)),a.runAuction()}(e,n)},h.refreshSlots=function(){return t.debug("[API]: refreshSlots()"),a.runAuctionAllActiveSlots()},h.refreshSlotByCode=function(e){if(e&&"string"==typeof e)return t.debug("[API]: refreshSlotByCode(".concat(e,")")),a.forceRunAuction(e);t.error("[API]: refreshSlotByCode with invalid creativeDivId: ".concat(JSON.stringify(e)," - ").concat(m(e)))},h.getAdSlotsById=function(e){return function(e){if(e&&("string"==typeof e||"number"==typeof e))return i.getSlots("".concat(e));t.warn("[API]: getAdSlotsById with invalid fuseId: ".concat(JSON.stringify(e)," - ").concat(m(e)))}(e)},h.processNewSlots=function(){return t.debug("[API]: processNewSlots()"),a.registerAndRunAuction(!0,!1,p)},h.getTargeting=function(){return l.getTargeting()},h.getAdSlotsByFuseId=h.getAdSlotsById,h.getFuseUnits=h.getUnits,h.loadFuseSlots=h.loadSlots,h.resetSlots=function(){return t.debug("[API]: resetSlots()"),f.reset()},h.resetFuseSlots=function(){return t.debug("[API]: resetFuseSlots()"),f.reset()},h.loadFuseSlotById=h.loadSlotById,h.setSlotTargetingById=function(e,n,r){return function(e,n,r){!e||"string"!=typeof e&&"number"!=typeof e?t.error("[API]: setSlotTargetingById with invalid fuseId: ".concat(JSON.stringify(e)," - ").concat(m(e))):"string"==typeof n?"string"==typeof r||Array.isArray(r)?(t.debug("[API]: setSlotTargetingById(".concat(e,", ").concat(n,", ").concat(r,") started")),i.setSlotTargetingById("".concat(e),n,r)):t.error("[API]: setSlotTargetingById with invalid value: ".concat(JSON.stringify(r)," - ").concat(m(r))):t.error("[API]: setSlotTargetingById with invalid key: ".concat(JSON.stringify(n)," - ").concat(m(n)))}(e,n,r)},h.widgetsRenderer=h.privateApi.getWidgetRenderer(),h.setDefaultTargeting=function(){return t.debug("[API]: setDefaultTargeting()"),r.applyPageTargetingAsync()},h.disableRefresh=function(){return t.debug("[API]: disableRefresh()"),a.destroyAllRefresh()},h.getSlots=function(){return s.getZoneTemplates()},h.getSettings=function(){return Object.assign({},n.getAccountSettings())},n.getReportPageInfo()&&(h.reportPageInfo=function(e,n){t.debug("[API]: reportPageInfo()",e,n),d.reportSlotInfo(e,n)}),h.setForceSafeFrames=function(e){t.debug("[API]: setForceSafeFrame(".concat(e,")")),n.setForceSafeFrames(e),r.setForceSafeFramesAsync()},h.isForceSafeFrames=function(){return n.isForceSafeFrames()},h.getFuseGeo=function(){return n.getFuseGeo()}},tagInitEmitter:g}}(ir);fr.log("[INIT] Initialising with UUID ".concat(hr.getFuseUUID()));var br=ir.slotsBootstrapper,mr=br.getController(),Sr=br.getApiV3(),yr=rr.getTelemetry(),Ir=br.getPageManager(),xr=cr.getUam(),kr=ur.getConsentManager(),wr=sr.getInitManager(),_r=dr.getWidgetsRenderer(),Er=dr.getInterstitialManager(),Cr=ar.getViewportInfo(),Tr=rr.getComponentStatusStore(),Ar=ir.gptBootstrapper.gptManagerInitSafe;yr.prepareBackgroundRequestProcessor(),yr.prepareRecordingWebVitals();var Pr=sr.getFuseQueueManager();var Rr=ir.prebidBootstrapper.getPrebidInitialiser();function Br(e,t,n){e?(fr.debug("[INIT]: Running second (".concat(t,") docReady auto-scan and auction")),pr.setStateStatus("second_autoscan_".concat(t,"_start")),Or(),pr.setStateStatus("second_autoscan_".concat(t,"_finish")),fr.debug("[INIT]: Finished second docReady DOM scan")):Tr.updateState("docReadyScan",A(n,pr.getElapsedTime(),void 0))}var Or=function(){mr.registerAndRunAuction(!0,!1,Sr)};function zr(){pr.setStateStatus("fuse_bootstrap_start");var e=or.getBrowserWindowObject(),r=e.scrollY;vr.enableApi(nr);var o=hr.getTagStartCutoffMs(),s=pr.getElapsedTime();if(!(I(o)||s<o))return fr.warn("[INIT]: Fuse will not show ads because it took ".concat(s,"ms before it began loading")),void pr.setStateStatus("fuse_bootstrap_finish");hr.isCmpRequired()?("none"!==hr.getCmpProvider().partner&&n(lr.qpr.getDelayQuantcastInit(),"simulate quantcast load delay",fr,(function(){return ur.getCmpProviderLoader().load(hr.getCmpProvider())})),kr.enable()):Tr.updateState("cmp",{_tag:"disabled"}),hr.isIframeCmp()&&ur.getIframeCmpManager().load(),hr.isUseGameraEnabled()&&ir.pluginBootstrapper.getGameraManager().init(),hr.isAdmiralEnabled()&&ir.pluginBootstrapper.getAdmiralManager().init(lr.admiralScript),hr.isPubxaiEnabled()||hr.isPubxaiPrebidOnlyEnabled()?M(fr,e,pr,Tr,hr.isPubxaiPrebidOnlyEnabled()):Tr.updateState("pubxai",{_tag:"disabled"}),t(hr.isIn2wInjection(),(function(){return function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:5068036699,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.9,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"America/Los_Angeles";if(k(e)){n.debug("[INIT]: loadIn2WGptHook: advertiserId: ".concat(r,", optRatio: ").concat(o,", timeZone: ").concat(s));try{X(t,n),e(t,[r],"intowow_optimized",["false"],["true"],[[900,10,10,10,10,10,10,10,10,10,10],[900,20,20,20,20,20]],s),i.pushToGPTQue((function(e){var t=Math.random()<o?"true":"false";e.setPageTargeting("intowow_optimized",t)}))}catch(e){n.error("[ERROR]: in2w threw an error during initialisation: ".concat(e))}}else n.error("[ERROR]: loadIn2WGptHook - in2wHook is not defined")}(lr.in2wHook,e,fr,Ar,hr.getIn2wAdvertiserId(),hr.getIn2wRatio(),hr.getIn2wAdvertiserTimeZone())})),t(hr.isIn2wSafeframe(),(function(){return ir.pluginBootstrapper.getIn2wSafeframe().enable()})),function(){if(!hr.isPrebidEnabled())return Tr.updateState("prebid",{_tag:"disabled"}),void fr.info("[INIT]: Not loading Prebid because it is disabled");var e=hr.getPrebidTagStartCutoffMs(),t=pr.getElapsedTime();if(I(e)||t<e){var n=function(e){var t=T(pr.getElapsedTime(),e);Tr.updateState("prebid",t),Zn(Rr,hr,or.getLogger(),or.getBrowserWindowObject(),or.getWindowLocation(),or.getPackageMajorVersion(),pr,lr.isUseBrowserOuterwidth(),lr.getBreakpoints(),lr.qpr,ar.getViewportInfo().getCurrentBreakpoint().name,{onPrebidAuctionEnd:gr.onPrebidAuctionEnd,onPrebidAdRenderFailed:gr.onPrebidAdRenderFailed,onPrebidAdRenderSucceeded:gr.onPrebidAdRenderSucceeded},(function(e){var n=pr.getElapsedTime()-e,i=hr.getPrebidDownloadCutoffMs();I(i)||n<=i?Tr.updateState("prebid",A(t,pr.getElapsedTime(),void 0)):(fr.log("[PREBID]: Not enabling because library took ".concat(n,"ms to download")),Tr.updateState("prebid",{_tag:"cancelled"}))}))},i=Cr.getCurrentBreakpoint().name;hr.isPrebidEnabledAtBP(i)?n(!1):(fr.info("[INIT]: Prebid not enabled at breakpoint ".concat(i,", deferring initialisation")),Tr.updateState("prebid",{_tag:"deferred"}),gr.onBreakpointChanged.subscribe((function(e){var t=e.name;hr.isPrebidEnabledAtBP(t)&&"deferred"===Tr.state.prebid._tag&&(fr.info("[INIT]: Prebid is enabled for breakpoint ".concat(i,", loading it now")),n(!0))})))}else Tr.updateState("prebid",{_tag:"cancelled"}),fr.info("[INIT]: Skipping prebid load because fuse took ".concat(t,"ms to begin loading"))}(),function(){if(!hr.isUamEnabled())return Tr.updateState("uam",{_tag:"disabled"}),void fr.info("[INIT]: Not loading Uam because it is disabled");var e=hr.getUamTagStartCutoffMs(),t=pr.getElapsedTime();if(!(I(e)||t<e))return Tr.updateState("uam",{_tag:"cancelled"}),void fr.info("[INIT]: Deferring UAM load because fuse took ".concat(t,"ms to begin loading"));var i=function(e){n(lr.qpr.getDelayUamInit(),"simulate uam download delay",fr,(function(){var t=T(pr.getElapsedTime(),e);Tr.updateState("uam",t),xr.load(hr.isCmpRequired(),(function(){Tr.updateState("uam",A(t,pr.getElapsedTime(),void 0))}))}))};hr.isUamEnabledAtBP(Cr.getCurrentBreakpoint().name)?i(!1):(Tr.updateState("uam",{_tag:"deferred"}),gr.onBreakpointChanged.subscribe((function(e){var t=e.name;hr.isUamEnabledAtBP(t)&&"deferred"===Tr.state.uam._tag&&(fr.info("[INIT]: UAM is enabled for breakpoint ".concat(t,", loading it now")),i(!0))})))}(),hr.isYandexEnabled()?(Tr.updateState("gpt",{_tag:"disabled"}),function(){var e=T(pr.getElapsedTime());if(Tr.updateState("yandex",e),window.yaContextCb)Tr.updateState("yandex",A(e,pr.getElapsedTime(),void 0));else{var t=or.getBrowserWindowObject().document,n=t.createElement("script");n.innerHTML="window.yaContextCb=window.yaContextCb||[]",t.head.appendChild(n);var i=t.createElement("script");i.src="https://yandex.ru/ads/system/context.js",i.async=!0,t.head.appendChild(i);var r=setInterval((function(){var t,n;(null===(n=null===(t=window.Ya)||void 0===t?void 0:t.Context)||void 0===n?void 0:n.AdvManager)&&(Tr.updateState("yandex",A(e,pr.getElapsedTime(),void 0)),clearInterval(r))}),100)}}()):(Tr.updateState("yandex",{_tag:"disabled"}),function(){var e=T(pr.getElapsedTime());Tr.updateState("gpt",e);var t=lr.qpr.getDelayGptInit(),n=or.getBrowserWindowObject();ee(ir.gptBootstrapper.gptInitialiser,fr,pr,n,t,(function(t){Tr.updateState("gpt",A(e,pr.getElapsedTime(),void 0)),Ar.onGoogletagInitialised(t),Er.initInterstitial()}))}(),Ar.pushToGPTQue((function(){!function(e,t,n,r,o){r.isBlockthroughEnabled()?o?(n.setStateStatus("blockthrough_load_start"),i({logger:e,window:t},te,(function(){e.log("[BLOCKTHROUGH]: Tag loaded"),n.setStateStatus("blockthrough_load_finish")}))):e.debug("[INIT]: Skip loading blockthrough because page on XS breakpoint"):e.debug("[INIT]: Skip loading blockthrough because it is not enabled")}(fr,e,pr,hr,Cr.isNotXsBreakpoint())}))),hr.isGeoEdgeEnabled()&&ir.pluginBootstrapper.getGeoEdgeManager().init(),(hr.isPrebidServer()||hr.isAssertiveYieldEnabled())&&ir.pluginBootstrapper.getAssertiveYieldManager().init(),t(hr.isConfiantEnabled(),(function(){return function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"ZVeqITFg3t0RVj7Gh41kEbdx9DA",o=arguments.length>4?arguments[4]:void 0;t.setStateStatus("confiant_load_start");var s=n.confiant||{};s[r]=s[r]||{clientSettings:{}};var a=s[r].clientSettings||(s[r].clientSettings={});a.callback=function(t,n,i,r,o,s){e.log("[CONFIANT]: Has blocked the ad: ",t,n,i,r,o,JSON.stringify(s))},a.prebidExcludeBidders=[],a.prebidNameSpace="fusePbjs",a.on_prebid_error=function(t){e.log("[CONFIANT]: failed to scan an ad",t)},a.onRendered=function(t){e.log("[CONFIANT]: Rendered the ad",t)},n.confiant=s,i({logger:e,window:n},function(e){return{name:"Confiant",url:"//cdn.confiant-integrations.net/".concat(e,"/gpt_and_prebid/"),file:"config.js"}}(r),(function(){e.log("[CONFIANT]: Script loaded"),t.setStateStatus("confiant_load_finish"),o&&o()}))}(fr,pr,e,hr.getConfiantId())})),t(hr.isId5Enabled(),(function(){return L.enable(hr)})),t(hr.isIdentityEnabled(),(function(){return G.enable(e,hr)})),t(hr.getAfsSettings().enabled,(function(){return ir.afsBootstrapper.getAfsManager().loadLibrary()})),t(hr.isResponsiveEnabled(),(function(){fr.info("[INIT]: Enabling responsive"),br.configureResponsive()})),hr.isPubstackEnabled()?function(e,t,n,r,o){var s=T(n.getElapsedTime());r.updateState("pubstack",s),n.setStateStatus("pubstack_load_start"),i({logger:e,window:t},function(e){return{name:"Pubstack",url:"//boot.pbstck.com/v1/tag/",file:e}}(o),(function(){e.log("[PUBSTACK]: Script loaded"),n.setStateStatus("pubstack_load_finish"),r.updateState("pubstack",A(s,n.getElapsedTime(),{}))}))}(fr,e,pr,Tr,hr.getPubstackId()):Tr.updateState("pubstack",{_tag:"disabled"}),wr.setIsLowDwellPage(Ir.isLowDwellUrl(e.location.toString())),lr.onLoadCallback?function(e,t,n,i,r,o){try{e.log("[INIT][onFuseLoadCallback] Start"),t(n,i,r,o),e.debug("[INIT][onFuseLoadCallback] Finish")}catch(n){e.error("[INIT][onFuseLoadCallback] Encountered error during evaluation",n,t)}}(fr,lr.onLoadCallback,e,nr,hr.getV2CompatOverrides(),br.getApiV3()):fr.debug("[INIT]: No custom callback defined"),yr.recordFuseLoad(r),hr.isScanDOMOnPageLoad()?function(){var e=document.readyState,t=T(pr.getElapsedTime());if(Tr.updateState("docReadyScan",t),"complete"===e)fr.info("[INIT]: Document state is already 'complete'"),Br(!1,e,t);else{var n=!1;"interactive"===e&&(fr.info("[INIT]: Document state is already 'interactive'"),n=!0,Br(!1,e,t)),document.addEventListener("readystatechange",(function(){var e=document.readyState;pr.setStateStatus("document_readystatechange_".concat(e)),fr.info("[INIT]: Received document '".concat(e,"' listener callback"));var i=n;n=!0,Br(i,e,t)}))}}():Tr.updateState("docReadyScan",{_tag:"disabled"}),function(){if(hr.getIosChromeClickHandle()){var e=rr.getDeviceInfo();e.getBrowser()===F.Chrome&&e.getOperatingSystem()===U.IOS&&(fr.debug("[INIT]: Monitoring touch for Chrome on IOS"),ar.getTouchObserver().monitorTouchDetect(),ar.enableFastClick())}}(),gr.onInitManagerReady.immediateOrOnce((function(){pr.setStateStatus("fuse_queue_start"),Pr.processBacklog(),pr.setStateStatus("fuse_queue_finish"),hr.isWidgetRendererEnabled()&&_r.init(),nr.initialised=!0,nr.init=!0,nr.loading=!1,pr.setStateStatus("tag_initialised"),wr.setTagInitialised(),(Ir.isPageInitCalled()||hr.isScanDOMOnPageLoad()||hr.isAutoRegistrationEnabled())&&(pr.setStateStatus("fuse_trigger_auto_auction_start"),mr.registerAndQueue(!0,!1,Sr),pr.setStateStatus("fuse_trigger_auto_auction_finish"),hr.isAutoRegistrationEnabled()&&(Or(),setInterval((function(){Or()}),200))),pr.setStateStatus("on_tag_init_event_start"),vr.tagInitEmitter.emit({}),gr.onTagInitComplete.emit({tagInitUrl:e.location.href}),pr.setStateStatus("on_tag_init_event_finish"),mr.runAuction();var t=gr.onPageInit;t.subscribe((function(){return Er.initInterstitial()})),t.subscribe((function(){fr.debug("[PAGE]: Registering slots and running auction after PageInit"),wr.setIsLowDwellPage(Ir.isLowDwellUrl(e.location.toString())),Or()})),dr.getVideoManager().init(),gr.onPageReset.subscribe((function(){fr.debug("[PAGE]: Received page reset event"),Er.clearInterstitial()}))})),pr.setStateStatus("fuse_bootstrap_finish")}n(lr.qpr.getDelayInit(),"simulate slow fuse download",fr,(function(){return zr()}))}));
